<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>LOM TV — Latvijas Online Mūzika</title>
<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#9b4dff">
<meta name="description" content="Latvijas Online Mūzikas kanāls. Retro TV formātā baudi labāko latviešu un ārzemju mūziku.">
<!-- iOS PWA -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="LOM TV">
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><rect width='512' height='512' rx='80' fill='%230a0a0a'/><text x='256' y='200' font-family='sans-serif' font-size='120' font-weight='900' fill='%239b4dff' text-anchor='middle'>LOM</text><text x='256' y='350' font-family='sans-serif' font-size='140' font-weight='900' fill='%2335ed7e' text-anchor='middle'>TV</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&family=Noto+Sans:wght@400;500;600;700&family=Bowlby+One+SC&family=Russo+One&family=Caveat:wght@400;500;600;700&family=Sigmar+One&family=Gveret+Levin&family=Handjet:wght@400;500;700&family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
<style>
:root{
  /* Retro-Futurism Palette (80s inspired) */
  --neon-purple:#9b4dff;
  --electric-blue:#19d0e8;
  --hot-pink:#ff4cd2;
  --neon-green:#35ed7e;
  --chrome-silver:#c0c0c0;
  --deep-black:#000000;
  --plastic-black:#0a0a0a;
  --pure-white:#ffffff;
  /* CRT Screen */
  --screen-bg:#0a0a0f;
  /* Typography */
  --font-display:'Montserrat',sans-serif;
  --font-main:'Noto Sans',sans-serif;
  --font-mono:'Noto Sans',monospace;
  /* Layout */
  --panel-w:360px;
  /* Discord / UI akcenta krāsas */
  --blurple:#5865f2;
  --light-blurple:#7983f5;
  --dark-blurple:#3e4ab0;
  --discord-green:#57f287;
  /* Glow helpers */
  --purple-glow:rgba(155,77,255,0.6);
  --blue-glow:rgba(25,208,232,0.6);
  --pink-glow:rgba(255,76,210,0.6);
  --green-glow:rgba(53,237,126,0.6);
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-user-select:none;user-select:none}
html,body{width:100%;height:100%;overflow:hidden;font-family:var(--font-main);background:#000000;color:var(--pure-white)}

/* START SCREEN — Sci-Fi Cyberpunk Background */
@keyframes nebulaDrift{0%{transform:translate(0,0) scale(1)}25%{transform:translate(2%,-1%) scale(1.02)}50%{transform:translate(-1%,2%) scale(1)}75%{transform:translate(1%,1%) scale(1.01)}100%{transform:translate(0,0) scale(1)}}
@keyframes gridPulse{0%,100%{opacity:0.04}50%{opacity:0.08}}
@keyframes particleFloat{0%{transform:translateY(100vh) scale(0);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-10vh) scale(1);opacity:0}}
.start-screen{position:fixed;inset:0;z-index:300;overflow:hidden;
  background:#020808;
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px}
/* Nebula clouds layer */
.start-screen::before{content:'';position:absolute;inset:-20%;z-index:0;
  background:
    radial-gradient(ellipse 80% 50% at 25% 15%,rgba(155,77,255,0.2) 0%,transparent 50%),
    radial-gradient(ellipse 60% 60% at 75% 75%,rgba(25,208,232,0.15) 0%,transparent 50%),
    radial-gradient(ellipse 50% 40% at 60% 30%,rgba(255,76,210,0.1) 0%,transparent 45%),
    radial-gradient(ellipse 90% 70% at 40% 60%,rgba(53,237,126,0.06) 0%,transparent 55%),
    radial-gradient(ellipse 100% 100% at 50% 50%,rgba(5,15,15,0.9) 20%,transparent 70%);
  animation:nebulaDrift 20s ease-in-out infinite;pointer-events:none}
/* Grid overlay */
.start-screen::after{content:'';position:absolute;inset:0;z-index:1;pointer-events:none;
  background:
    linear-gradient(rgba(25,208,232,0.03) 1px,transparent 1px) 0 0 / 60px 60px,
    linear-gradient(90deg,rgba(25,208,232,0.03) 1px,transparent 1px) 0 0 / 60px 60px;
  animation:gridPulse 4s ease-in-out infinite}
/* Floating particles */
.start-particles{position:absolute;inset:0;z-index:1;pointer-events:none;overflow:hidden}
.start-particle{position:absolute;width:2px;height:2px;border-radius:50%;background:rgba(25,208,232,0.8);
  box-shadow:0 0 6px rgba(25,208,232,0.6);animation:particleFloat linear infinite}
.start-particle:nth-child(1){left:10%;animation-duration:8s;animation-delay:0s}
.start-particle:nth-child(2){left:25%;animation-duration:12s;animation-delay:2s;width:3px;height:3px;background:rgba(155,77,255,0.7);box-shadow:0 0 8px rgba(155,77,255,0.5)}
.start-particle:nth-child(3){left:40%;animation-duration:10s;animation-delay:4s}
.start-particle:nth-child(4){left:55%;animation-duration:9s;animation-delay:1s;width:3px;height:3px;background:rgba(255,76,210,0.6);box-shadow:0 0 8px rgba(255,76,210,0.4)}
.start-particle:nth-child(5){left:70%;animation-duration:11s;animation-delay:3s}
.start-particle:nth-child(6){left:85%;animation-duration:7s;animation-delay:5s;width:3px;height:3px;background:rgba(155,77,255,0.7);box-shadow:0 0 8px rgba(155,77,255,0.5)}
.start-particle:nth-child(7){left:15%;animation-duration:13s;animation-delay:6s}
.start-particle:nth-child(8){left:50%;animation-duration:8s;animation-delay:2.5s;width:1px;height:1px;background:rgba(53,237,126,0.6);box-shadow:0 0 4px rgba(53,237,126,0.4)}
.start-particle:nth-child(9){left:92%;animation-duration:10s;animation-delay:1.5s}
.start-particle:nth-child(10){left:35%;animation-duration:14s;animation-delay:4.5s;width:2px;height:2px;background:rgba(25,208,232,0.5)}
.start-screen{transition:opacity 0.6s ease}
.start-screen.fade-out{opacity:0;pointer-events:none}
.start-screen.hidden{display:none}
.start-btn{position:relative;z-index:10;margin-top:44px;width:120px;height:120px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;padding-left:8px;
  background:linear-gradient(145deg,rgba(155,77,255,0.2),rgba(20,20,30,0.9));
  border:3px solid rgba(155,77,255,0.6);cursor:pointer;
  box-shadow:0 0 30px rgba(155,77,255,0.35),0 0 60px rgba(155,77,255,0.12),inset 0 0 30px rgba(155,77,255,0.08),0 8px 32px rgba(0,0,0,0.5);
  transition:all .3s ease;animation:startBtnPulse 2.5s ease-in-out infinite}
.start-btn:hover{
  background:linear-gradient(145deg,rgba(155,77,255,0.35),rgba(30,20,50,0.95));
  border-color:rgba(155,77,255,0.9);
  box-shadow:0 0 50px rgba(155,77,255,0.5),0 0 100px rgba(155,77,255,0.2),inset 0 0 40px rgba(155,77,255,0.12),0 8px 32px rgba(0,0,0,0.5);
  transform:scale(1.08)}
.start-btn:active{transform:scale(0.95);box-shadow:0 0 20px rgba(155,77,255,0.4),inset 0 0 20px rgba(155,77,255,0.15)}
.start-btn .play-tri{width:0;height:0;border-style:solid;border-width:28px 0 28px 48px;
  border-color:transparent transparent transparent #fff;
  filter:drop-shadow(0 0 12px rgba(155,77,255,0.8)) drop-shadow(0 0 24px rgba(155,77,255,0.4))}
.start-btn-label{position:absolute;bottom:-36px;left:50%;transform:translateX(-50%);white-space:nowrap;
  font-family:'Handjet',var(--font-main);font-size:15px;letter-spacing:5px;color:rgba(155,77,255,0.6);text-transform:uppercase}
@keyframes startBtnPulse{0%,100%{box-shadow:0 0 30px rgba(155,77,255,0.35),0 0 60px rgba(155,77,255,0.12),inset 0 0 30px rgba(155,77,255,0.08),0 8px 32px rgba(0,0,0,0.5);border-color:rgba(155,77,255,0.6)}50%{box-shadow:0 0 45px rgba(155,77,255,0.5),0 0 90px rgba(155,77,255,0.2),inset 0 0 35px rgba(155,77,255,0.12),0 8px 32px rgba(0,0,0,0.5);border-color:rgba(155,77,255,0.85)}}
@keyframes sphereSpin{0%{transform:rotateX(-210deg) rotateY(0deg) rotateZ(185deg)}100%{transform:rotateX(-210deg) rotateY(360deg) rotateZ(185deg)}}
@keyframes sphereShine{50%,100%{border-color:transparent;box-shadow:0 0 1px 1px transparent,0 0 1px 1px transparent inset;filter:hue-rotate(180deg)}}
@keyframes letterGlow{
  0%,100%{
    filter:drop-shadow(0 0 15px var(--neon-purple)) drop-shadow(0 0 30px rgba(155,77,255,0.4));
    transform:scale(1)
  }
  50%{
    filter:drop-shadow(0 0 25px #b366ff) drop-shadow(0 0 50px rgba(155,77,255,0.6));
    transform:scale(1.02)
  }
}
@keyframes stripeScroll{
  0%{background-position:0 0}
  100%{background-position:0 22px}
}
.logo-container{position:relative;z-index:10;display:flex;flex-direction:column;align-items:center;justify-content:center}
.logo-sub-wrap{display:flex;flex-direction:column;align-items:flex-start;position:relative}
.logo-main{position:relative;display:flex;align-items:center;justify-content:center}
.logo-letter{font-family:'Bowlby One SC',var(--font-display),sans-serif;font-size:200px;font-weight:400;letter-spacing:6px;animation:letterGlow 2.5s ease-in-out infinite, stripeScroll 2.5s linear infinite;text-transform:uppercase;position:relative;z-index:2;display:inline-flex;align-items:center;line-height:0.85;
  /* IBM-style horizontal stripes — animated downward */
  background:repeating-linear-gradient(0deg,
    var(--neon-purple) 0px,var(--neon-purple) 16px,
    transparent 16px,transparent 22px);
  background-size:100% 22px;
  -webkit-background-clip:text;background-clip:text;
  -webkit-text-fill-color:transparent;
  filter:drop-shadow(0 0 15px var(--neon-purple)) drop-shadow(0 0 30px rgba(155,77,255,0.4))}
.logo-L{margin-right:14px;font-family:'Bowlby One SC',sans-serif}
.logo-M{margin-left:14px;font-family:'Sigmar One',sans-serif;font-size:220px;
  animation:letterGlow 2.5s ease-in-out infinite,stripeScroll 2.5s linear infinite,neonFlicker 4s ease-in-out infinite alternate}
/* Neon flicker — "M" burts reizēm mirgo/nodziest kā neona lampa */
@keyframes neonFlicker{
  0%,100%{opacity:1;filter:drop-shadow(0 0 15px var(--neon-purple)) drop-shadow(0 0 30px rgba(155,77,255,0.4))}
  7%{opacity:1}
  7.5%{opacity:0.3;filter:drop-shadow(0 0 2px var(--neon-purple))}
  8%{opacity:1;filter:drop-shadow(0 0 15px var(--neon-purple)) drop-shadow(0 0 30px rgba(155,77,255,0.4))}
  8.5%{opacity:0.6;filter:drop-shadow(0 0 4px var(--neon-purple))}
  9%{opacity:1}
  62%{opacity:1}
  62.5%{opacity:0.2;filter:drop-shadow(0 0 1px var(--neon-purple))}
  63%{opacity:1}
  63.5%{opacity:0.5;filter:drop-shadow(0 0 3px var(--neon-purple))}
  64%{opacity:1;filter:drop-shadow(0 0 15px var(--neon-purple)) drop-shadow(0 0 30px rgba(155,77,255,0.4))}
}
.logo-letter::before{content:'';position:absolute;inset:-15px;z-index:-1;
  background:repeating-linear-gradient(0deg,rgba(0,0,0,0.15) 0px,rgba(0,0,0,0.15) 1px,transparent 1px,transparent 2px);
  pointer-events:none;border-radius:12px;
  backdrop-filter:blur(2px)}
.logo-o-sphere{display:inline-flex;align-items:center;justify-content:center;width:160px;height:200px;position:relative;margin:0 -4px;flex-shrink:0;perspective:600px}
.logo-o-sphere .logo-sphere{--c:var(--neon-purple);width:160px;height:160px;margin:0;left:10px;top:20px;position:absolute;transform-style:preserve-3d;transform:rotateX(-210deg) rotateY(45deg) rotateZ(185deg)}
.logo-o-sphere .logo-sphere div{--sz:23%;width:var(--sz);height:var(--sz);position:absolute;border:0.15vmin solid var(--c);border-radius:100%;transform:rotateX(90deg) translateZ(86px);box-shadow:0 0 0.3vmin 0.3vmin var(--c),0 0 0.3vmin 0.3vmin var(--c) inset;background:transparent;left:50%;top:50%;margin-left:calc(var(--sz)/-2);margin-top:calc(var(--sz)/-2)}
.logo-o-sphere .logo-sphere div:nth-child(2){--sz:40%;--dl:calc(var(--dv)*-2);transform:rotateX(90deg) translateZ(79px)}
.logo-o-sphere .logo-sphere div:nth-child(3){--sz:55%;--dl:calc(var(--dv)*-3);transform:rotateX(90deg) translateZ(72px)}
.logo-o-sphere .logo-sphere div:nth-child(4){--sz:68%;--dl:calc(var(--dv)*-4);transform:rotateX(90deg) translateZ(63px)}
.logo-o-sphere .logo-sphere div:nth-child(5){--sz:78%;--dl:calc(var(--dv)*-5);transform:rotateX(90deg) translateZ(54px)}
.logo-o-sphere .logo-sphere div:nth-child(6){--sz:86%;--dl:calc(var(--dv)*-6);transform:rotateX(90deg) translateZ(45px)}
.logo-o-sphere .logo-sphere div:nth-child(7){--sz:92%;--dl:calc(var(--dv)*-7);transform:rotateX(90deg) translateZ(36px)}
.logo-o-sphere .logo-sphere div:nth-child(8){--sz:96%;--dl:calc(var(--dv)*-8);transform:rotateX(90deg) translateZ(27px)}
.logo-o-sphere .logo-sphere div:nth-child(9){--sz:99%;--dl:calc(var(--dv)*-9);transform:rotateX(90deg) translateZ(18px)}
.logo-o-sphere .logo-sphere div:nth-child(10){--sz:100%;--dl:calc(var(--dv)*-10);transform:rotateX(90deg) translateZ(9px)}
.logo-o-sphere .logo-sphere div:nth-child(11){--sz:100%;--dl:calc(var(--dv)*-11);transform:rotateX(90deg) translateZ(0)}
.logo-o-sphere .logo-sphere div:nth-child(12){--sz:99%;--dl:calc(var(--dv)*-12);transform:rotateX(90deg) translateZ(-9px)}
.logo-o-sphere .logo-sphere div:nth-child(13){--sz:96%;--dl:calc(var(--dv)*-13);transform:rotateX(90deg) translateZ(-18px)}
.logo-o-sphere .logo-sphere div:nth-child(14){--sz:92%;--dl:calc(var(--dv)*-14);transform:rotateX(90deg) translateZ(-27px)}
.logo-o-sphere .logo-sphere div:nth-child(15){--sz:86%;--dl:calc(var(--dv)*-15);transform:rotateX(90deg) translateZ(-36px)}
.logo-o-sphere .logo-sphere div:nth-child(16){--sz:78%;--dl:calc(var(--dv)*-16);transform:rotateX(90deg) translateZ(-45px)}
.logo-o-sphere .logo-sphere div:nth-child(17){--sz:68%;--dl:calc(var(--dv)*-17);transform:rotateX(90deg) translateZ(-54px)}
.logo-o-sphere .logo-sphere div:nth-child(18){--sz:55%;--dl:calc(var(--dv)*-18);transform:rotateX(90deg) translateZ(-63px)}
.logo-o-sphere .logo-sphere div:nth-child(19){--sz:40%;--dl:calc(var(--dv)*-19);transform:rotateX(90deg) translateZ(-72px)}
.logo-o-sphere .logo-sphere div:nth-child(20){--sz:23%;--dl:calc(var(--dv)*-20);transform:rotateX(90deg) translateZ(-79px)}
.logo-o-sphere .logo-sphere div:nth-child(21){--sz:10%;--dl:calc(var(--dv)*-21);transform:rotateX(90deg) translateZ(-86px)}
.logo-tv{font-family:'Gveret Levin',cursive;font-size:110px;font-weight:400;color:var(--electric-blue);letter-spacing:2px;position:relative;top:-30px;margin-left:-60px;z-index:3;
  transform:rotate(-14deg);
  text-shadow:0 0 16px rgba(25,208,232,0.9),0 0 32px rgba(25,208,232,0.5);
  display:inline-block;align-self:flex-start;
  -webkit-text-stroke:2px rgba(25,208,232,0.4)}
.logo-sphere-wrap{position:absolute;inset:-25px;display:flex;align-items:center;justify-content:center;pointer-events:none;perspective:600px}
.logo-sphere{--c:var(--neon-purple);position:absolute;width:160px;height:160px;transform-style:preserve-3d;animation:sphereSpin 10s linear infinite}
.logo-sphere div{--sz:23%;--s:2s;--d:40;--dv:calc(var(--s)/var(--d));--dl:calc(var(--dv)*-1);width:var(--sz);height:var(--sz);position:absolute;border:0.15vmin solid var(--c);border-radius:100%;transform:rotateX(90deg) translateZ(78px);box-shadow:0 0 0.3vmin 0.3vmin var(--c),0 0 0.3vmin 0.3vmin var(--c) inset;animation:sphereShine var(--s) linear var(--dl) infinite;background:transparent;left:50%;top:50%;margin-left:calc(var(--sz)/-2);margin-top:calc(var(--sz)/-2)}
.logo-sphere div:nth-child(2){--sz:40%;--dl:calc(var(--dv)*-2);transform:rotateX(90deg) translateZ(71px)}
.logo-sphere div:nth-child(3){--sz:55%;--dl:calc(var(--dv)*-3);transform:rotateX(90deg) translateZ(64px)}
.logo-sphere div:nth-child(4){--sz:68%;--dl:calc(var(--dv)*-4);transform:rotateX(90deg) translateZ(56px)}
.logo-sphere div:nth-child(5){--sz:78%;--dl:calc(var(--dv)*-5);transform:rotateX(90deg) translateZ(48px)}
.logo-sphere div:nth-child(6){--sz:86%;--dl:calc(var(--dv)*-6);transform:rotateX(90deg) translateZ(40px)}
.logo-sphere div:nth-child(7){--sz:92%;--dl:calc(var(--dv)*-7);transform:rotateX(90deg) translateZ(32px)}
.logo-sphere div:nth-child(8){--sz:96%;--dl:calc(var(--dv)*-8);transform:rotateX(90deg) translateZ(24px)}
.logo-sphere div:nth-child(9){--sz:99%;--dl:calc(var(--dv)*-9);transform:rotateX(90deg) translateZ(16px)}
.logo-sphere div:nth-child(10){--sz:100%;--dl:calc(var(--dv)*-10);transform:rotateX(90deg) translateZ(8px)}
.logo-sphere div:nth-child(11){--sz:100%;--dl:calc(var(--dv)*-11);transform:rotateX(90deg) translateZ(0)}
.logo-sphere div:nth-child(12){--sz:99%;--dl:calc(var(--dv)*-12);transform:rotateX(90deg) translateZ(-8px)}
.logo-sphere div:nth-child(13){--sz:96%;--dl:calc(var(--dv)*-13);transform:rotateX(90deg) translateZ(-16px)}
.logo-sphere div:nth-child(14){--sz:92%;--dl:calc(var(--dv)*-14);transform:rotateX(90deg) translateZ(-24px)}
.logo-sphere div:nth-child(15){--sz:86%;--dl:calc(var(--dv)*-15);transform:rotateX(90deg) translateZ(-32px)}
.logo-sphere div:nth-child(16){--sz:78%;--dl:calc(var(--dv)*-16);transform:rotateX(90deg) translateZ(-40px)}
.logo-sphere div:nth-child(17){--sz:68%;--dl:calc(var(--dv)*-17);transform:rotateX(90deg) translateZ(-48px)}
.logo-sphere div:nth-child(18){--sz:55%;--dl:calc(var(--dv)*-18);transform:rotateX(90deg) translateZ(-56px)}
.logo-sphere div:nth-child(19){--sz:40%;--dl:calc(var(--dv)*-19);transform:rotateX(90deg) translateZ(-64px)}
.logo-sphere div:nth-child(20){--sz:23%;--dl:calc(var(--dv)*-20);transform:rotateX(90deg) translateZ(-71px)}
.logo-sphere div:nth-child(21){--sz:10%;--dl:calc(var(--dv)*-21);transform:rotateX(90deg) translateZ(-78px)}
.lomk-sub{font-family:'Handjet',var(--font-main),sans-serif;font-size:26px;font-weight:700;color:rgba(224,227,255,0.65);letter-spacing:8px;text-transform:uppercase;margin-top:34px;width:100%;text-align:left;padding-left:0;margin-left:10px}
.start-sub{font-family:var(--font-main);font-size:18px;font-weight:400;color:rgba(224,227,255,0.35);letter-spacing:5px;width:auto;text-align:left;margin-top:10px;position:relative;z-index:10;align-self:flex-start;margin-left:20px}

/* CALIBRATION (УЭИТ) */
.calib-screen{position:absolute;inset:0;z-index:25;display:none;flex-direction:column;border-radius:inherit}
.calib-screen.show{display:flex}
.calib-bars{flex:1;display:flex}
.calib-bar{flex:1}
.calib-bar:nth-child(1){background:#fff}
.calib-bar:nth-child(2){background:#ff0}
.calib-bar:nth-child(3){background:#0ff}
.calib-bar:nth-child(4){background:#0f0}
.calib-bar:nth-child(5){background:#f0f}
.calib-bar:nth-child(6){background:#f00}
.calib-bar:nth-child(7){background:#00f}
.calib-bar:nth-child(8){background:#000}
.calib-bottom{height:28%;display:flex}
.calib-bottom-bar{flex:1}
.calib-bottom-bar:nth-child(1){background:#00007f}
.calib-bottom-bar:nth-child(2){background:#fff}
.calib-bottom-bar:nth-child(3){background:#7f007f}
.calib-bottom-bar:nth-child(4){background:#000}
.calib-bottom-bar:nth-child(5){background:#131313}
.calib-bottom-bar:nth-child(6){background:#000}
.calib-bottom-bar:nth-child(7){background:#1c1c1c}
.calib-bottom-bar:nth-child(8){background:#000}
.calib-label{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:var(--font-mono);font-size:26px;color:rgba(255,255,255,0.75);letter-spacing:8px;background:rgba(0,0,0,0.45);padding:8px 24px}

/* ČATA JOSLA — zem TV */
/* MAIN APP */
#app{position:fixed;inset:12px;display:none}

/* TV CASING — Retro Plastic Shell with unified frame */
.tv-casing{position:absolute;inset:0;overflow:hidden;
  background:
    radial-gradient(ellipse 120% 50% at 50% 0%,rgba(155,77,255,0.08) 0%,transparent 60%),
    linear-gradient(135deg,#0a0a0a 0%,#000000 25%,#0a0a0a 50%,#000000 75%,#0a0a0a 100%);
  background-size:100% 100%,400% 400%;
  animation:plasticSheen 8s ease infinite;
  border-radius:18px;
  border:3px solid;
  border-color:#3a3a3a #1a1a1a #0a0a0a #2a2a2a;
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.8),
    0 0 0 4px #111,
    0 0 0 5px rgba(255,255,255,0.06),
    0 8px 40px rgba(0,0,0,0.9),
    0 2px 20px rgba(155,77,255,0.1),
    inset 0 1px 0 rgba(255,255,255,0.05),
    inset 0 -1px 0 rgba(0,0,0,0.8)}
@keyframes plasticSheen{0%{background-position:0% 0%,0% 50%}50%{background-position:0% 0%,100% 50%}100%{background-position:0% 0%,0% 50%}}
/* Grain texture overlay — monologue.to style */
.tv-casing::after{content:'';position:absolute;inset:0;border-radius:inherit;pointer-events:none;z-index:100;
  opacity:0.18;mix-blend-mode:overlay;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size:128px 128px}

/* SCREEN AREA — Chrome Bezel */
.tv-screen-area{position:absolute;top:16px;bottom:16px;left:16px;right:calc(var(--panel-w) + 16px);
  background:linear-gradient(145deg,#1a1a1a 0%,#0a0a0a 50%,#1a1a1a 100%);
  border-radius:10px;
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.1),
    inset 0 -2px 0 rgba(0,0,0,0.8),
    0 0 60px rgba(155,77,255,0.15),
    0 4px 20px rgba(0,0,0,0.8),
    0 8px 32px rgba(0,0,0,0.9);
  border:3px solid;
  border-color:#2e2e2e #0e0e0e #080808 #222}
.tv-screen{position:absolute;top:13px;bottom:13px;left:13px;right:13px;background:var(--screen-bg);border-radius:3px;overflow:hidden;box-shadow:inset 0 0 0 1px rgba(88,101,242,0.1),inset 5px 5px 18px rgba(0,0,0,0.95),inset -5px -5px 18px rgba(0,0,0,0.95)}
.tv-screen::before{content:'';position:absolute;inset:0;border-radius:inherit;background:radial-gradient(ellipse 52% 22% at 16% 7%,rgba(88,101,242,0.06) 0%,transparent 100%),radial-gradient(ellipse at center,transparent 42%,rgba(0,0,0,0.5) 100%);pointer-events:none;z-index:12}
.tv-screen::after{content:'';position:absolute;inset:0;border-radius:inherit;box-shadow:inset 0 0 65px rgba(0,0,0,0.72);pointer-events:none;z-index:13}
.scanlines{position:absolute;inset:0;z-index:11;pointer-events:none;border-radius:inherit;
  background:
    repeating-linear-gradient(0deg,rgba(0,0,0,0.15) 0px,rgba(0,0,0,0.15) 1px,transparent 1px,transparent 2px),
    repeating-linear-gradient(90deg,rgba(155,77,255,0.01) 0px,transparent 1px,transparent 4px);
  animation:scanlineFlicker 8s linear infinite}
@keyframes scanlineFlicker{0%,100%{opacity:0.8}50%{opacity:0.95}}
.yt-slot{width:100%;height:100%;border:none;position:absolute;inset:0;z-index:1;transition:opacity 1.5s ease}
.yt-slot.yt-ready{top:-80px;left:-15px;width:calc(100% + 30px);height:calc(100% + 160px);pointer-events:none;transform:scale(1.25)}
.yt-slot.yt-hidden{opacity:0}
/* Dimming overlay — aptumšo ekrānu pirms crossfade */
.tv-dim-overlay{position:absolute;inset:0;z-index:3;pointer-events:none;background:rgba(0,0,0,0);transition:background 5s ease;border-radius:inherit}
.tv-dim-overlay.dimming{background:rgba(0,0,0,0.6)}
.yt-blocker{position:absolute;inset:0;z-index:2;cursor:pointer;background:transparent}
/* Bottom bar to hide YouTube related video thumbnails */
.yt-bottom-hide{position:absolute;bottom:0;left:0;right:0;height:90px;z-index:2;background:linear-gradient(to top,#000 60%,transparent 100%);pointer-events:none}

/* ERA EFFECTS */
/* VINTAGE (≤1989): Melnbalts, tumšas malas/stūri, vecā TV estētika */
.tv-screen.era-vintage .yt-slot{filter:grayscale(1) brightness(0.78) contrast(1.18) sepia(0.15);transition:filter .8s ease,opacity 2s ease}
.tv-screen.era-vcr .yt-slot{filter:saturate(0.55) contrast(1.1) brightness(0.88) sepia(0.05);transition:filter .8s ease,opacity 2s ease}
.tv-screen.era-modern .yt-slot{filter:none;transition:filter .8s ease,opacity 2s ease}
/* Vintage vinjete — tumši stūri un malas, kā vecā TV */
.era-overlay-vintage{position:absolute;inset:0;pointer-events:none;border-radius:inherit;z-index:4;opacity:0;transition:opacity .8s ease;
  background:
    radial-gradient(ellipse at center,transparent 30%,rgba(0,0,0,0.5) 65%,rgba(0,0,0,0.85) 100%),
    radial-gradient(circle at 8% 8%,rgba(0,0,0,0.4) 0%,transparent 35%),
    radial-gradient(circle at 92% 8%,rgba(0,0,0,0.4) 0%,transparent 35%),
    radial-gradient(circle at 8% 92%,rgba(0,0,0,0.4) 0%,transparent 35%),
    radial-gradient(circle at 92% 92%,rgba(0,0,0,0.4) 0%,transparent 35%)}
.tv-screen.era-vintage .era-overlay-vintage{opacity:1}
/* Vintage grain/noise overlay */
.era-overlay-vintage-grain{position:absolute;inset:0;pointer-events:none;border-radius:inherit;z-index:4;opacity:0;transition:opacity .8s ease;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.12'/%3E%3C/svg%3E");
  background-size:128px 128px;mix-blend-mode:overlay}
.tv-screen.era-vintage .era-overlay-vintage-grain{opacity:1;animation:vintageGrain .08s steps(1) infinite}
@keyframes vintageGrain{0%{background-position:0 0}25%{background-position:-32px 16px}50%{background-position:16px -32px}75%{background-position:-16px -16px}100%{background-position:0 0}}
/* Vintage horizontal lines (old TV scanline effect, thicker) */
.era-overlay-vintage-lines{position:absolute;inset:0;pointer-events:none;border-radius:inherit;z-index:4;opacity:0;transition:opacity .8s ease;
  background:repeating-linear-gradient(0deg,transparent 0px,transparent 3px,rgba(0,0,0,0.12) 3px,rgba(0,0,0,0.12) 4px)}
.tv-screen.era-vintage .era-overlay-vintage-lines{opacity:1}

/* VHS/VCR (1990-2000): Noise, tracking lines, chromatic aberration */
.era-overlay-vcr{position:absolute;inset:0;pointer-events:none;border-radius:inherit;z-index:4;opacity:0;transition:opacity .8s ease;
  background:repeating-linear-gradient(0deg,transparent 0px,transparent 2px,rgba(0,0,0,0.06) 2px,rgba(0,0,0,0.06) 3px,transparent 3px,transparent 5px)}
.tv-screen.era-vcr .era-overlay-vcr{opacity:1;animation:vcrNoise .12s steps(1) infinite}
@keyframes vcrNoise{0%{background-position:0 0}25%{background-position:0 -2px}50%{background-position:0 1px}75%{background-position:0 -1px}100%{background-position:0 0}}
/* VHS chromatic aberration (color fringing) */
.era-overlay-vcr-chroma{position:absolute;inset:0;pointer-events:none;border-radius:inherit;z-index:3;opacity:0;transition:opacity .8s ease;
  background:linear-gradient(90deg,rgba(255,0,80,0.035) 0%,transparent 20%,transparent 80%,rgba(0,80,255,0.035) 100%)}
.tv-screen.era-vcr .era-overlay-vcr-chroma{opacity:1}
/* VHS tracking band — horizontal white line drifting up */
.era-overlay-vcr-band{position:absolute;left:0;right:0;pointer-events:none;z-index:5;opacity:0;transition:opacity .8s ease;
  height:4px;background:rgba(255,255,255,0.08);filter:blur(1px);box-shadow:0 0 12px rgba(255,255,255,0.04)}
.tv-screen.era-vcr .era-overlay-vcr-band{opacity:1;animation:vcrBandDrift 6s linear infinite}
@keyframes vcrBandDrift{0%{top:100%;opacity:0}3%{opacity:1}97%{opacity:1}100%{top:-4px;opacity:0}}
/* VHS noise/grain overlay */
.era-overlay-vcr-grain{position:absolute;inset:0;pointer-events:none;border-radius:inherit;z-index:4;opacity:0;transition:opacity .8s ease;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.08'/%3E%3C/svg%3E");
  background-size:100px 100px;mix-blend-mode:overlay}
.tv-screen.era-vcr .era-overlay-vcr-grain{opacity:1;animation:vhsGrain .1s steps(1) infinite}
@keyframes vhsGrain{0%{background-position:0 0}33%{background-position:-20px 10px}66%{background-position:10px -20px}100%{background-position:0 0}}
/* VHS occasional glitch — horizontal shift */
.era-overlay-vcr-glitch{position:absolute;inset:0;pointer-events:none;border-radius:inherit;z-index:5;opacity:0;overflow:hidden}
.tv-screen.era-vcr .era-overlay-vcr-glitch{animation:vhsGlitchFlash 8s ease-in-out infinite}
@keyframes vhsGlitchFlash{0%,92%,100%{opacity:0}93%{opacity:1}94%{opacity:0}96%{opacity:1}97%{opacity:0}}

/* SCREEN OVERLAYS */
@keyframes logoPulse{0%,100%{text-shadow:0 0 8px var(--neon-purple),0 0 16px rgba(155,77,255,0.4)}50%{text-shadow:0 0 14px var(--neon-purple),0 0 28px rgba(155,77,255,0.7)}}
.screen-logo{position:absolute;top:8px;left:8px;z-index:10;display:flex;align-items:center;gap:3px;background:none;border:none;padding:12px 22px 12px 16px;border-radius:0;
  animation:vhsRgbText 2s steps(9) infinite alternate,logoGlitch 8s infinite}
/* TV Logo Glitch — retro TV traucējums */
@keyframes logoGlitch{
  0%,4%,8%,100%{transform:none;opacity:1;filter:none}
  4.5%{transform:translate(3px,-1px) skewX(-2deg);filter:hue-rotate(90deg) saturate(2);opacity:0.9}
  5%{transform:translate(-2px,1px) skewX(1deg);filter:hue-rotate(-90deg)}
  5.5%{transform:none;filter:none;opacity:1}
  47%,47.5%{transform:translate(1px,0);filter:brightness(1.5)}
  48%{transform:none;filter:none}
}
@keyframes miniStripeScroll{0%{background-position:0 0}100%{background-position:0 7px}}
.screen-logo-l{font-family:'Bowlby One SC',sans-serif;font-size:58px;font-weight:400;letter-spacing:2px;line-height:1;text-transform:uppercase;
  background:repeating-linear-gradient(0deg,var(--neon-purple) 0px,var(--neon-purple) 5px,transparent 5px,transparent 7px);
  background-size:100% 7px;-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
  filter:drop-shadow(0 0 6px var(--neon-purple));
  animation:miniStripeScroll 2.5s linear infinite}
.screen-logo-o-sphere{display:inline-flex;align-items:center;justify-content:center;width:60px;height:74px;position:relative;margin:0 -1px;flex-shrink:0;perspective:320px}
.screen-logo-o-sphere .screen-logo-sphere{--c:var(--neon-purple);width:60px;height:60px;margin:0;left:1px;top:6px;position:absolute;transform-style:preserve-3d;animation:sphereSpin 10s linear infinite}
.screen-logo-o-sphere .screen-logo-sphere div{--sz:23%;--s:2s;--d:40;--dv:calc(var(--s)/var(--d));--dl:calc(var(--dv)*-1);width:var(--sz);height:var(--sz);position:absolute;border:0.12vmin solid var(--c);border-radius:100%;transform:rotateX(90deg) translateZ(34px);box-shadow:0 0 0.24vmin 0.24vmin var(--c),0 0 0.24vmin 0.24vmin var(--c) inset;animation:sphereShine var(--s) linear var(--dl) infinite;background:transparent;left:50%;top:50%;margin-left:calc(var(--sz)/-2);margin-top:calc(var(--sz)/-2)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(2){--sz:40%;--dl:calc(var(--dv)*-2);transform:rotateX(90deg) translateZ(30px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(3){--sz:55%;--dl:calc(var(--dv)*-3);transform:rotateX(90deg) translateZ(27px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(4){--sz:68%;--dl:calc(var(--dv)*-4);transform:rotateX(90deg) translateZ(23px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(5){--sz:78%;--dl:calc(var(--dv)*-5);transform:rotateX(90deg) translateZ(20px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(6){--sz:86%;--dl:calc(var(--dv)*-6);transform:rotateX(90deg) translateZ(15px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(7){--sz:92%;--dl:calc(var(--dv)*-7);transform:rotateX(90deg) translateZ(11px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(8){--sz:96%;--dl:calc(var(--dv)*-8);transform:rotateX(90deg) translateZ(8px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(9){--sz:99%;--dl:calc(var(--dv)*-9);transform:rotateX(90deg) translateZ(5px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(10){--sz:100%;--dl:calc(var(--dv)*-10);transform:rotateX(90deg) translateZ(2px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(11){--sz:100%;--dl:calc(var(--dv)*-11);transform:rotateX(90deg) translateZ(0)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(12){--sz:99%;--dl:calc(var(--dv)*-12);transform:rotateX(90deg) translateZ(-2px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(13){--sz:96%;--dl:calc(var(--dv)*-13);transform:rotateX(90deg) translateZ(-5px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(14){--sz:92%;--dl:calc(var(--dv)*-14);transform:rotateX(90deg) translateZ(-8px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(15){--sz:86%;--dl:calc(var(--dv)*-15);transform:rotateX(90deg) translateZ(-11px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(16){--sz:78%;--dl:calc(var(--dv)*-16);transform:rotateX(90deg) translateZ(-15px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(17){--sz:68%;--dl:calc(var(--dv)*-17);transform:rotateX(90deg) translateZ(-20px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(18){--sz:55%;--dl:calc(var(--dv)*-18);transform:rotateX(90deg) translateZ(-23px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(19){--sz:40%;--dl:calc(var(--dv)*-19);transform:rotateX(90deg) translateZ(-27px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(20){--sz:23%;--dl:calc(var(--dv)*-20);transform:rotateX(90deg) translateZ(-30px)}
.screen-logo-o-sphere .screen-logo-sphere div:nth-child(21){--sz:10%;--dl:calc(var(--dv)*-21);transform:rotateX(90deg) translateZ(-34px)}
.screen-logo-m{font-family:'Sigmar One',sans-serif;font-size:56px;font-weight:400;letter-spacing:2px;line-height:1;text-transform:uppercase;
  background:repeating-linear-gradient(0deg,var(--neon-purple) 0px,var(--neon-purple) 5px,transparent 5px,transparent 7px);
  background-size:100% 7px;-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
  filter:drop-shadow(0 0 6px var(--neon-purple));
  animation:miniStripeScroll 2.5s linear infinite}
.screen-logo-tv{font-family:'Gveret Levin',cursive;font-size:28px;font-weight:400;color:var(--electric-blue);letter-spacing:1px;
  text-shadow:0 0 8px rgba(25,208,232,0.7);transform:rotate(-8deg);display:inline-block;margin-left:-10px;align-self:flex-start;position:relative;top:4px}
.ch-switch-overlay{position:absolute;top:13px;right:14px;z-index:15;font-family:'Press Start 2P',monospace;font-size:20px;font-weight:400;color:#fff;
  text-shadow:0 0 10px rgba(255,255,255,0.5);opacity:0;transition:opacity .15s;background:rgba(0,0,0,0.65);padding:6px 16px;border:none;border-radius:4px;letter-spacing:2px;
  animation:vhsRgbText 1.5s steps(9) infinite alternate}
.ch-switch-overlay.show{opacity:1}
/* LIVE badge + report button — labajā augšā */
.tv-live-strip{position:absolute;top:6px;right:16px;z-index:15;display:flex;align-items:center;gap:8px;pointer-events:auto;
  animation:vhsRgbText 2.5s steps(9) infinite alternate}
.tv-live-badge{display:flex;align-items:center;gap:5px;font-family:'Press Start 2P',monospace;font-size:clamp(8px,1.1vw,13px);color:#fff;
  background:rgba(0,0,0,0.55);padding:5px 10px;border-radius:4px;letter-spacing:1px;white-space:nowrap}
.tv-live-dot{width:8px;height:8px;border-radius:50%;background:#e53935;display:inline-block;animation:livePulse 1.5s ease-in-out infinite;margin-right:2px;flex-shrink:0}
@keyframes livePulse{0%,100%{opacity:1;box-shadow:0 0 4px #e53935}50%{opacity:.4;box-shadow:0 0 10px #ff5252,0 0 18px #e53935}}
.tv-live-count{color:rgba(255,255,255,0.8);margin-left:3px}
.tv-reactions{display:flex;gap:4px}
.tv-react-btn{background:rgba(0,0,0,0.55);border:1px solid rgba(255,255,255,0.15);color:rgba(255,255,255,0.7);
  font-size:clamp(10px,1.3vw,16px);padding:4px 8px;border-radius:4px;cursor:pointer;transition:all .2s;line-height:1}
.tv-react-btn:hover{background:rgba(255,255,255,0.12);color:#fff}
.tv-react-report:hover{color:#ffdd57;border-color:#ffdd5750}
.tv-react-btn.reacted{transform:scale(1.3);transition:transform .15s}
/* Report popup — 2 soļi: atbilst/neatbilst + iesaki dziesmu */
.tv-report-popup{position:absolute;top:100%;right:0;margin-top:6px;z-index:20;
  background:rgba(10,10,10,0.96);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,0.12);
  border-radius:10px;padding:16px 20px;min-width:280px;max-width:360px;width:max-content;
  font-family:var(--font-main),sans-serif;font-size:13px;color:#ddd;
  line-height:1.5;letter-spacing:0.3px;
  opacity:0;pointer-events:none;transform:translateY(-4px);transition:all .2s ease;
  box-shadow:0 12px 48px rgba(0,0,0,0.7);
  animation:none!important;text-shadow:none!important}
.tv-report-popup *{animation:none!important;text-shadow:none!important}
.tv-report-popup.show{opacity:1;pointer-events:auto;transform:translateY(0)}
.tv-report-q{color:#ddd;margin-bottom:10px;text-align:center;font-weight:600}
.tv-report-btns{display:flex;gap:8px;justify-content:center;margin-bottom:0}
.tv-report-btn{padding:7px 20px;border-radius:6px;border:1px solid rgba(255,255,255,0.12);
  background:rgba(255,255,255,0.05);color:#ccc;font-family:inherit;font-size:13px;
  cursor:pointer;transition:all .15s;letter-spacing:0.5px;font-weight:500}
.tv-report-btn:hover{background:rgba(255,255,255,0.12)}
.tv-report-btn.yes{border-color:rgba(53,237,126,0.3);color:#35ed7e}
.tv-report-btn.yes:hover{background:rgba(53,237,126,0.12);border-color:#35ed7e}
.tv-report-btn.no{border-color:rgba(255,107,107,0.3);color:#ff6b6b}
.tv-report-btn.no:hover{background:rgba(255,107,107,0.12);border-color:#ff6b6b}
.tv-report-thanks{color:#35ed7e;text-align:center;font-size:13px}
.tv-report-divider{height:1px;background:rgba(255,255,255,0.06);margin:12px 0}
.tv-report-suggest-label{color:#aaa;margin-bottom:6px;font-size:12px;font-weight:600;letter-spacing:1px;text-transform:uppercase}
.tv-report-input{width:100%;padding:8px 12px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);
  background:rgba(255,255,255,0.05);color:#ddd;font-family:var(--font-main),sans-serif;font-size:13px;
  outline:none;transition:border-color .2s;box-sizing:border-box;margin-bottom:8px}
.tv-report-input:focus{border-color:rgba(53,237,126,0.4)}
.tv-report-input::placeholder{color:rgba(255,255,255,0.3)}
.tv-report-submit{width:100%;padding:9px;border-radius:6px;border:1px solid rgba(53,237,126,0.25);
  background:rgba(53,237,126,0.12);color:#35ed7e;font-family:var(--font-main),sans-serif;
  font-size:13px;cursor:pointer;transition:all .15s;letter-spacing:1.5px;font-weight:600;text-transform:uppercase}
.tv-report-submit:hover{background:rgba(53,237,126,0.2);border-color:rgba(53,237,126,0.45)}
.tv-report-submit:disabled{opacity:0.4;cursor:default}
/* TV Info Overlay — 3 phase system */
.tv-overlay{position:absolute;bottom:80px;left:20px;z-index:14;pointer-events:none;
  transform:translateX(-110%);opacity:0;transition:transform .6s cubic-bezier(.22,1,.36,1),opacity .5s ease;
  max-width:520px}
.tv-overlay.show{transform:translateX(0);opacity:1}
.tv-overlay-inner{background:rgba(0,0,0,0.52);backdrop-filter:blur(10px);border-left:4px solid var(--neon-purple);
  padding:14px 22px 12px;border-radius:0 8px 8px 0;
  box-shadow:0 4px 20px rgba(0,0,0,0.6),0 0 20px rgba(155,77,255,0.12)}
.tv-overlay-label{font-family:'Handjet',var(--font-main),sans-serif;font-size:24px;font-weight:700;letter-spacing:6px;text-transform:uppercase;margin-bottom:6px;
  color:var(--neon-purple);text-shadow:0 0 10px rgba(155,77,255,0.6),0 0 20px rgba(155,77,255,0.25)}
.tv-overlay.phase-next .tv-overlay-inner{border-left-color:var(--electric-blue);box-shadow:0 4px 20px rgba(0,0,0,0.6),0 0 20px rgba(25,208,232,0.12)}
.tv-overlay.phase-next .tv-overlay-label{color:var(--electric-blue);text-shadow:0 0 10px rgba(25,208,232,0.6),0 0 20px rgba(25,208,232,0.25)}
.tv-overlay-title{font-family:'Russo One',var(--font-display),sans-serif;font-size:30px;font-weight:400;color:#fff;margin-bottom:4px;line-height:1.2;
  white-space:normal;word-wrap:break-word;text-shadow:0 2px 6px rgba(0,0,0,0.9),0 0 12px rgba(155,77,255,0.1)}
.tv-overlay-artist{font-family:'Russo One',var(--font-display),sans-serif;font-size:22px;font-weight:400;color:rgba(200,210,240,0.75);
  white-space:normal;word-wrap:break-word;font-style:normal;letter-spacing:0.3px}
.tv-overlay-meta{font-family:'Handjet',var(--font-main),sans-serif;font-size:18px;font-weight:500;color:rgba(224,227,255,0.5);letter-spacing:3px;margin-top:4px}
.screen-progress{position:absolute;bottom:28px;left:0;right:0;z-index:10;height:3px;background:rgba(255,255,255,0.05);pointer-events:none}
.screen-progress-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--hot-pink),var(--neon-purple),var(--electric-blue));box-shadow:0 0 8px rgba(255,76,210,0.6);transition:width .3s}
.sms-ticker-screen{position:absolute;bottom:0;left:0;right:0;z-index:26;height:64px;overflow:hidden;background:rgba(0,0,10,0.88);border-top:2px solid rgba(88,101,242,0.25);pointer-events:none}
.sms-ticker-screen.off{display:none}
.sms-ticker-inner{display:flex;position:absolute;top:0;left:0;height:100%;white-space:nowrap;align-items:center;animation:tickerScroll 60s linear infinite}
@keyframes tickerScroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
.sms-item{font-family:var(--font-main);font-size:18px;font-weight:500;padding:0 28px;flex-shrink:0}
.sms-name{color:rgba(130,140,170,0.65);font-weight:700}
.sms-text{color:rgba(140,148,175,0.5)}
.sms-sep{color:var(--blurple);margin:0 8px;opacity:0.6}
/* Volume OSD — NMTV green blocks style */
.vol-osd{position:absolute;bottom:80px;left:30px;z-index:18;display:none;flex-direction:column;gap:6px;
  background:
    linear-gradient(140deg,rgba(0,0,0,0.8),rgba(0,0,0,0.9)),
    repeating-linear-gradient(0deg,rgba(53,237,126,0.08) 0px,rgba(53,237,126,0.08) 1px,transparent 1px,transparent 3px),
    repeating-linear-gradient(90deg,rgba(53,237,126,0.06) 0px,rgba(53,237,126,0.06) 1px,transparent 1px,transparent 3px);
  border:2px solid #35ed7e;border-radius:6px;padding:12px 18px;
  backdrop-filter:blur(4px);min-width:240px}
.vol-osd.show{display:flex}
.vol-osd-label{font-family:var(--font-display);font-size:18px;font-weight:800;color:#35ed7e;letter-spacing:3px;text-transform:uppercase;text-shadow:0 0 8px rgba(53,237,126,0.6)}
.vol-osd-bar{display:flex;align-items:center;gap:0;height:28px}
.vol-osd-blocks{display:flex;gap:3px;height:100%;align-items:flex-end}
.vol-osd-block{width:12px;border-radius:2px;background:#35ed7e;box-shadow:0 0 4px rgba(53,237,126,0.6);transition:height .08s}
.vol-osd-dashes{display:flex;gap:3px;height:100%;align-items:center;flex:1}
.vol-osd-dash{width:12px;height:3px;background:#35ed7e;opacity:0.3;border-radius:1px}
.vol-osd-value{font-family:var(--font-display);font-size:32px;font-weight:900;color:#35ed7e;text-shadow:0 0 10px rgba(53,237,126,0.6);line-height:1;position:absolute;right:18px;top:50%;transform:translateY(-50%)}
/* Muted overlay */
.mute-osd{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:18;display:none;flex-direction:column;align-items:center;gap:6px;
  background:
    linear-gradient(140deg,rgba(0,0,0,0.82),rgba(0,0,0,0.92)),
    repeating-linear-gradient(0deg,rgba(53,237,126,0.08) 0px,rgba(53,237,126,0.08) 1px,transparent 1px,transparent 3px),
    repeating-linear-gradient(90deg,rgba(53,237,126,0.06) 0px,rgba(53,237,126,0.06) 1px,transparent 1px,transparent 3px);
  border:2px solid #35ed7e;border-radius:8px;padding:20px 36px;
  backdrop-filter:blur(4px)}
.mute-osd.show{display:flex}
.mute-osd-icon{font-size:36px}
.mute-osd-text{font-family:'Press Start 2P',monospace;font-size:22px;font-weight:400;color:#35ed7e;letter-spacing:2px;
  text-shadow:0 0 10px rgba(53,237,126,0.6);animation:vhsRgbText 1.5s steps(9) infinite alternate}
.mute-osd-sub{font-family:'Press Start 2P',monospace;font-size:10px;font-weight:400;color:#35ed7e;letter-spacing:1px;opacity:0.7;text-transform:uppercase}

/* TV Color Bars — rādās kad video nav pieejams */
.tv-color-bars{position:absolute;inset:0;z-index:19;background:#111;display:none;flex-direction:column;align-items:center;justify-content:center;border-radius:inherit;overflow:hidden}
.tv-color-bars.show{display:flex}
.tv-color-bars .bars-row{display:flex;width:100%;flex:1}
.tv-color-bars .bar{flex:1}
.tv-color-bars .bars-text{
  position:absolute;bottom:22%;left:0;right:0;text-align:center;
  font-family:'Press Start 2P',monospace;font-size:clamp(10px,1.3vw,14px);color:#fff;
  text-shadow:2px 2px 0 #000,-1px -1px 0 #000;
  animation:barsTextBlink 1.2s steps(1) infinite;
}
@keyframes barsTextBlink{0%,80%{opacity:1}81%,100%{opacity:0}}
.static-noise{position:absolute;inset:0;z-index:20;background:#000;display:none;align-items:center;justify-content:center;border-radius:inherit}
.static-noise.show{display:flex}
.static-noise canvas{width:100%;height:100%;border-radius:inherit}
.power-off-screen{position:absolute;inset:0;z-index:22;background:#000;display:none;align-items:center;justify-content:center;border-radius:inherit}
.power-off-screen.show{display:flex}
.power-dot{width:6px;height:6px;background:#fff;border-radius:50%;box-shadow:0 0 30px rgba(255,255,255,0.9),0 0 60px rgba(200,200,255,0.5);animation:powerOff .6s ease-out forwards}
@keyframes powerOff{0%{width:100%;height:3px;border-radius:0;opacity:1;box-shadow:0 0 40px rgba(255,255,255,0.9)}40%{width:40px;height:3px;border-radius:0;opacity:1;box-shadow:0 0 30px rgba(255,255,255,0.8)}70%{width:8px;height:3px;border-radius:1px;opacity:0.9}100%{width:4px;height:4px;border-radius:50%;opacity:0;box-shadow:0 0 10px rgba(255,255,255,0.3)}}

/* RIGHT PANEL — Glossy Black Plastic */
.tv-panel{position:absolute;top:4px;bottom:4px;right:10px;width:var(--panel-w);overflow:hidden;
  background:
    linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px) 0 0 / 20px 20px,
    linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px) 0 0 / 20px 20px,
    linear-gradient(170deg,rgba(255,255,255,0.015) 0%,transparent 30%,transparent 70%,rgba(255,255,255,0.01) 100%),
    linear-gradient(90deg,#0d0d0d 0%,#141414 50%,#0d0d0d 100%);
  border-left:1px solid rgba(192,192,192,0.08);
  border-radius:16px;
  display:flex;flex-direction:column;padding:10px 16px 0;gap:8px;overflow:hidden;
  box-shadow:
    -6px 0 24px rgba(0,0,0,0.9),
    inset 2px 0 1px rgba(255,255,255,0.04),
    inset -1px 0 1px rgba(0,0,0,0.5),
    0 0 0 1px rgba(255,255,255,0.06),
    0 4px 16px rgba(0,0,0,0.6),
    inset 0 1px 0 rgba(255,255,255,0.03)}
.tv-panel::-webkit-scrollbar{width:4px}
.tv-panel::-webkit-scrollbar-track{background:transparent}
.tv-panel::-webkit-scrollbar-thumb{background:rgba(88,101,242,0.2);border-radius:4px}
.tv-panel::-webkit-scrollbar-thumb:hover{background:rgba(88,101,242,0.4)}
.tv-panel::before{content:'';position:absolute;inset:0;border-radius:inherit;
  background:
    linear-gradient(115deg,transparent 30%,rgba(255,255,255,0.04) 35%,rgba(255,255,255,0.07) 38%,rgba(255,255,255,0.04) 41%,transparent 46%),
    radial-gradient(ellipse 80% 30% at 70% 15%,rgba(255,255,255,0.06) 0%,transparent 50%),
    radial-gradient(ellipse 60% 60% at 50% 50%,rgba(155,77,255,0.04) 0%,transparent 70%),
    radial-gradient(ellipse 100% 100% at 50% 100%,rgba(0,0,0,0.3) 0%,transparent 60%);
  pointer-events:none;z-index:0}
.tv-panel::after{content:'';position:absolute;inset:0;border-radius:inherit;pointer-events:none;z-index:0;
  opacity:0.15;mix-blend-mode:multiply;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size:128px 128px}
.tv-panel > *{position:relative;z-index:1}
.panel-divider{height:1px;flex-shrink:0;background:linear-gradient(90deg,transparent,rgba(88,101,242,0.2),transparent);margin:0}
.panel-header-wrapper{position:relative;flex-shrink:0;margin-bottom:0;margin-top:-10px;padding-top:10px}
.panel-header-wrapper::before{display:none}
.panel-header-wrapper > *{position:relative;z-index:1}
.panel-header{display:flex;flex-direction:column;align-items:stretch;flex-shrink:0;padding:0 0 2px;background:transparent;border-radius:4px;gap:6px;position:relative}
.panel-header > *{position:relative;z-index:1}
.panel-header-top-row{display:flex;align-items:center;justify-content:space-between;gap:10px;overflow:hidden;position:relative}
.panel-led{width:8px;height:8px;border-radius:50%;background:var(--neon-green);box-shadow:0 0 10px rgba(53,237,126,0.9),0 0 20px rgba(53,237,126,0.5);transition:all .3s;flex-shrink:0;animation:ledPulse 2s ease-in-out infinite}
@keyframes ledPulse{0%,100%{box-shadow:0 0 10px rgba(53,237,126,0.9),0 0 20px rgba(53,237,126,0.5)}50%{box-shadow:0 0 15px rgba(53,237,126,1),0 0 30px rgba(53,237,126,0.7)}}
.panel-led.off{background:#1a1a1a;box-shadow:inset 0 1px 2px rgba(0,0,0,0.8);animation:none}
.section-label{font-family:var(--font-main);font-size:17px;font-weight:700;color:rgba(224,227,255,0.35);letter-spacing:3px;text-transform:uppercase;flex-shrink:0;padding:0 2px}

/* CHANNEL GRID */
.channel-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:5px;flex-shrink:0;justify-items:center;width:100%;margin-top:2px;
  background:linear-gradient(180deg,rgba(255,255,255,0.025) 0%,rgba(0,0,0,0.15) 100%),#151515;
  border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:8px;
  box-shadow:inset 0 3px 8px rgba(0,0,0,0.7),inset 0 -1px 2px rgba(255,255,255,0.04),inset 2px 0 6px rgba(0,0,0,0.4),inset -2px 0 6px rgba(0,0,0,0.4)}
.ch-btn{position:relative;border:none;background:transparent;cursor:pointer;width:100%;max-width:100%;height:44px;padding:0;overflow:hidden;border-radius:8px;perspective:600px;-webkit-tap-highlight-color:transparent;flex-shrink:0}
.ch-flipdisc{position:absolute;inset:0;transform-style:preserve-3d;transition:transform 0.52s cubic-bezier(0.7,0,0.2,1)}
.ch-btn.active .ch-flipdisc{transform:rotateX(-180deg)}
.ch-btn:hover:not(.active) .ch-flipdisc{transform:rotateX(-14deg)}
.ch-face{position:absolute;inset:0;display:flex;flex-direction:row;align-items:center;justify-content:center;gap:6px;backface-visibility:hidden;-webkit-backface-visibility:hidden;border-radius:8px;padding:0 10px}
.ch-face-front{
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 10% 14% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#44444a 0%,#2e2e35 50%,#222228 100%);
  border:none;
  box-shadow:0 3px #0a0a0a,0 5px 8px rgba(0,0,0,0.6),
    inset 0 1px 0 rgba(255,255,255,0.14),
    inset 0 -1px 2px rgba(0,0,0,0.6),
    inset 2px 0 3px rgba(0,0,0,0.15),
    inset -2px 0 3px rgba(0,0,0,0.15)}
.ch-face-back{
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 10% 14% no-repeat,
    radial-gradient(at 20% 20%,#0000,rgba(60,20,120,0.3)) 0 40% / 110% 120%,
    linear-gradient(180deg,rgba(155,77,255,0.4) 0%,rgba(120,50,220,0.25) 50%,rgba(80,30,160,0.2) 100%);
  transform:rotateX(180deg);border:none;
  box-shadow:0 3px rgba(60,20,120,0.9),0 5px 8px rgba(0,0,0,0.6),
    0 0 14px rgba(155,77,255,0.4),
    inset 0 1px 0 rgba(255,255,255,0.15),
    inset 0 -1px 2px rgba(0,0,0,0.5),
    inset 2px 0 3px rgba(0,0,0,0.15),
    inset -2px 0 3px rgba(0,0,0,0.15)}
.ch-face .ch-icon{font-size:26px;line-height:1;filter:grayscale(0.4);flex-shrink:0}
.ch-face-back .ch-icon{filter:grayscale(0)}
.ch-face .ch-name{font-family:var(--font-main);font-size:15px;font-weight:700;color:rgba(224,227,255,0.5);line-height:1.2;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;letter-spacing:1.5px;text-transform:uppercase}
.ch-face-front .ch-name{color:rgba(224,227,255,0.4)}
.ch-face-back .ch-name{color:#fff;font-weight:800;text-shadow:0 1px 4px rgba(0,0,0,0.5)}
.ch-btn.active::after{content:'';position:absolute;top:4px;right:4px;width:5px;height:5px;border-radius:50%;background:var(--discord-green);box-shadow:0 0 7px var(--green-glow);z-index:5}

/* RETRO CHROME BUTTON */
.wood-btn{border-radius:8px;border:none;cursor:pointer;font-family:var(--font-main);font-size:18px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .12s;
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 8% 16% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#44444a 0%,#2e2e35 50%,#222228 100%);
  color:var(--electric-blue);
  box-shadow:0 3px #111,0 5px 8px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,255,255,0.14),
    inset 0 -1px 2px rgba(0,0,0,0.5),
    inset 2px 0 3px rgba(0,0,0,0.12),
    inset -2px 0 3px rgba(0,0,0,0.12),
    0 0 8px rgba(25,208,232,0.15);
  padding:8px 12px}
.wood-btn:hover{background:
    linear-gradient(#fff2,#fff0) 100% 50% / 8% 16% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#50505a 0%,#383840 50%,#2a2a30 100%);
  color:var(--pure-white);
  box-shadow:0 3px #111,0 4px 6px rgba(0,0,0,0.5),inset 0 1px 0 rgba(255,255,255,0.15),inset 0 -1px 1px rgba(0,0,0,0.4),0 0 14px rgba(25,208,232,0.3)}
.wood-btn:active{transform:translateY(3px);box-shadow:0 0 #111,inset 2px 2px 4px rgba(0,0,0,0.6),0 0 10px rgba(25,208,232,0.3)}

/* NOW PLAYING */
.panel-np{flex-shrink:0;background:linear-gradient(180deg,rgba(255,255,255,0.025) 0%,rgba(0,0,0,0.15) 100%),#151515;border-radius:10px;border:1px solid rgba(255,255,255,0.08);padding:10px 12px;display:flex;flex-direction:column;gap:8px;
  box-shadow:inset 0 3px 8px rgba(0,0,0,0.7),inset 0 -1px 2px rgba(255,255,255,0.04),inset 2px 0 6px rgba(0,0,0,0.4),inset -2px 0 6px rgba(0,0,0,0.4)}
.panel-np-row1{display:flex;align-items:center;gap:8px}
.np-indicator{width:7px;height:7px;border-radius:50%;flex-shrink:0;background:rgba(224,227,255,0.2);box-shadow:none;animation:npPulse 2s ease-in-out infinite}
.np-indicator.playing{background:var(--discord-green);box-shadow:0 0 7px var(--green-glow)}
@keyframes npPulse{0%,100%{opacity:1}50%{opacity:0.3}}
.panel-np-title{font-family:var(--font-main);font-size:20px;font-weight:500;color:rgba(224,227,255,0.7);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}
.panel-np-row2{display:flex;align-items:center;gap:8px}
.panel-np-btns{display:flex;gap:6px}
.np-sm-btn{width:40px;height:40px;border-radius:6px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;transition:all .12s;
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 10% 14% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#44444a 0%,#2e2e35 50%,#222228 100%);
  color:var(--light-blurple);
  box-shadow:0 2px #111,0 4px 6px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,255,255,0.12),
    inset 0 -1px 2px rgba(0,0,0,0.4),
    inset 1px 0 2px rgba(0,0,0,0.1),
    inset -1px 0 2px rgba(0,0,0,0.1)}
.np-sm-btn:hover{background:
    linear-gradient(#fff2,#fff0) 100% 50% / 10% 14% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#50505a 0%,#383840 50%,#2a2a30 100%);
  color:var(--pure-white)}
.np-sm-btn:active{transform:translateY(2px);box-shadow:0 0 #111,inset 2px 2px 4px rgba(0,0,0,0.6)}
.panel-progress{flex:1;height:3px;background:rgba(88,101,242,0.1);border-radius:2px;overflow:hidden}
.panel-progress-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--dark-blurple),var(--blurple),var(--light-blurple));border-radius:2px;transition:width .3s}

/* CH ARROWS - D-PAD STYLE */
.ch-arrows-row{display:flex;flex-direction:column;gap:8px;flex-shrink:0;flex:1;align-items:center}
.ch-arrows-label{font-family:var(--font-main);font-size:13px;font-weight:700;color:rgba(224,227,255,0.4);letter-spacing:2px;text-transform:uppercase;margin-bottom:2px}
.ch-dpad{display:grid;grid-template-columns:repeat(3,40px);grid-template-rows:repeat(3,40px);gap:6px;align-items:center;justify-items:center}
.ch-dpad-btn{width:40px;height:40px;background:rgba(88,101,242,0.1);border:1px solid rgba(88,101,242,0.2);border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;color:rgba(224,227,255,0.7);transition:all .15s;grid-column:2;grid-row:2}
.ch-dpad-btn.up{grid-column:2;grid-row:1}
.ch-dpad-btn.down{grid-column:2;grid-row:3}
.ch-dpad-btn.left{grid-column:1;grid-row:2}
.ch-dpad-btn.right{grid-column:3;grid-row:2}
.ch-dpad-btn:hover{background:rgba(88,101,242,0.25);border-color:rgba(88,101,242,0.5);color:var(--pure-white)}
.ch-dpad-btn:active{transform:translateY(1px)}
.ch-dpad-center{grid-column:2;grid-row:2;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-family:var(--font-main);font-size:12px;font-weight:700;color:rgba(224,227,255,0.2);text-transform:uppercase;pointer-events:none;letter-spacing:1px}
/* CONTROL BUTTONS — 3-Column Layout */
.controls-section{display:flex;flex-direction:column;gap:7px;align-items:stretch;width:100%;flex-shrink:0;position:relative;
  background:linear-gradient(180deg,rgba(255,255,255,0.025) 0%,rgba(0,0,0,0.15) 100%),#151515;
  border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:8px;
  box-shadow:inset 0 3px 8px rgba(0,0,0,0.7),inset 0 -1px 2px rgba(255,255,255,0.04),inset 2px 0 6px rgba(0,0,0,0.4),inset -2px 0 6px rgba(0,0,0,0.4)}
.controls-section > *{position:relative;z-index:1}

/* 3-column grid: [MUTE/VOL−] [CH] [INFO/VOL+] */
.controls-3col{display:grid;grid-template-columns:1fr auto 1fr;gap:8px;align-items:end}
.ctrl-col{display:flex;flex-direction:column;gap:6px}
.ctrl-col-center{align-self:stretch}

/* MUTE & INFO — short buttons */
.ctrl-btn{height:36px;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;
  font-family:var(--font-main);font-size:17px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;
  color:rgba(224,227,255,0.8);
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 8% 16% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#44444a 0%,#2e2e35 50%,#222228 100%);
  box-shadow:0 3px #111,0 5px 8px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,255,255,0.14),
    inset 0 -1px 2px rgba(0,0,0,0.5),
    inset 2px 0 3px rgba(0,0,0,0.12),
    inset -2px 0 3px rgba(0,0,0,0.12);
  transition:all .12s}
.ctrl-btn:hover{background:
    linear-gradient(#fff2,#fff0) 100% 50% / 8% 16% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#50505a 0%,#383840 50%,#2a2a30 100%);
  color:var(--pure-white)}
.ctrl-btn:active{transform:translateY(3px);box-shadow:0 0 #111,inset 3px 3px 6px rgba(0,0,0,0.7),inset 0 0 4px rgba(0,0,0,0.3)}
.ctrl-btn .ctrl-arrow{font-size:24px;color:rgba(224,227,255,0.5)}
/* VOL triangles: left ◄ bigger, right ► bigger, pushed to edges */
#volDownBtn .ctrl-arrow{font-size:36px;margin-left:-4px;margin-right:2px}
#volUpBtn .ctrl-arrow{font-size:31px;margin-right:-4px;margin-left:2px}
.ctrl-btn .ctrl-label{white-space:nowrap}

/* MUTE active state */
#muteBtn.active{background:linear-gradient(145deg,rgba(53,237,126,0.3),rgba(53,237,126,0.15));
  color:rgba(53,237,126,0.95);box-shadow:0 3px rgba(20,80,40,0.8),0 4px 4px rgba(0,0,0,0.4),0 0 8px rgba(53,237,126,0.15)}

/* Visas ctrl pogas — vienāds augstums */
#muteBtn,#infoBtn,#volDownBtn,#volUpBtn{height:52px;font-size:16px;letter-spacing:1px}

/* CH vertical button */
.ch-vertical-btn{width:60px;height:auto;min-height:96px;
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 12% 10% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#44444a 0%,#2e2e35 50%,#222228 100%);
  border:1px solid rgba(255,255,255,0.06);border-radius:8px;
  display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:6px 4px;cursor:default;
  box-shadow:0 3px #111,0 5px 8px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,255,255,0.12),
    inset 0 -1px 2px rgba(0,0,0,0.5),
    inset 2px 0 3px rgba(0,0,0,0.12),
    inset -2px 0 3px rgba(0,0,0,0.12);
  transition:all .15s;flex-shrink:0}
.ch-vertical-btn-top{flex:1;width:100%;display:flex;align-items:center;justify-content:center;font-size:34px;color:rgba(224,227,255,0.8);border-bottom:1px solid rgba(255,255,255,0.06);cursor:pointer;transition:background .15s;line-height:1;border-radius:4px 4px 0 0}
.ch-vertical-btn-top:hover{background:rgba(88,101,242,0.2);color:var(--pure-white)}
.ch-vertical-btn-center{flex-shrink:0;font-family:var(--font-main);font-size:17px;font-weight:700;color:rgba(224,227,255,0.35);letter-spacing:2px;text-transform:uppercase;padding:4px 0;pointer-events:none}
.ch-vertical-btn-bottom{flex:1;width:100%;display:flex;align-items:center;justify-content:center;font-size:34px;color:rgba(224,227,255,0.8);border-top:1px solid rgba(255,255,255,0.06);cursor:pointer;transition:background .15s;line-height:1;border-radius:0 0 4px 4px}
.ch-vertical-btn-bottom:hover{background:rgba(88,101,242,0.2);color:var(--pure-white)}

/* POWER + UTILITIES */
/* Horizontal Power Button */
.power-btn-horizontal{flex:1;height:44px;border:none;border-radius:8px;cursor:pointer;font-family:var(--font-main);font-size:17px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;display:flex;align-items:center;justify-content:center;gap:5px;transition:all .12s;color:rgba(224,227,255,0.8);position:relative;overflow:hidden;min-width:0;
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 8% 16% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0002) 0 40% / 110% 120%,
    linear-gradient(180deg,#44444a 0%,#2e2e35 50%,#222228 100%);
  box-shadow:0 3px #111,0 5px 8px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,255,255,0.14),
    inset 0 -1px 2px rgba(0,0,0,0.5),
    inset 2px 0 3px rgba(0,0,0,0.12),
    inset -2px 0 3px rgba(0,0,0,0.12)}
.power-btn-horizontal::before{display:none}
.power-btn-horizontal.fullscreen{width:100%;height:auto;flex:0 0 auto;position:static;z-index:auto;pointer-events:auto}
.power-btn-horizontal.fullscreen:hover{background:linear-gradient(145deg,#3a3a3a,#2a2a2a);color:var(--pure-white)}
.power-btn-horizontal.fullscreen.active{background:linear-gradient(145deg,rgba(53,237,126,0.25),rgba(53,237,126,0.12));color:rgba(53,237,126,0.95);box-shadow:0 3px rgba(20,80,40,0.8),0 4px 4px rgba(0,0,0,0.4),0 0 8px rgba(53,237,126,0.15);position:static;z-index:auto;pointer-events:auto}
.power-btn-horizontal:hover{background:linear-gradient(145deg,#3a3a3a,#2a2a2a);color:var(--pure-white)}
.power-btn-horizontal:active{transform:translateY(3px);box-shadow:0 0 #111,inset 2px 2px 4px rgba(0,0,0,0.6)}
.power-btn-horizontal .power-icon{position:relative;z-index:1;font-size:21px}
.power-btn-horizontal .power-text{position:relative;z-index:1;font-weight:700}
/* (Old extra-wide-btn, mute-vol-row, #muteBtn, #extraRightBtn removed — replaced by .controls-3col layout) */
/* 3D ON/OFF Toggle Switch */
.power-toggle{
  font-size:0.35em;
  appearance:none;-webkit-appearance:none;
  background:linear-gradient(45deg,#0008 40%,#0000 60%) 50% 50% / 50% 20% no-repeat,#111;
  width:100%;
  aspect-ratio:7/2;
  border-radius:2.5em;
  box-shadow:
    inset 0 -0.3em 0.4em -0.2em #fff2,
    inset 0 0.25em 0.5em #0001,
    inset 0 0.5em 0.5em #0001,
    inset 0 0 0 1.25em #222;
  display:flex;align-items:center;justify-content:center;
  position:relative;
  transform-style:preserve-3d;
  perspective:250em;
  cursor:pointer;
  border:none;outline:none}
.power-toggle::before,.power-toggle::after{
  --chip:100%;
  position:absolute;top:50%;left:50%;
  content:"";height:75%;border-radius:0.5em;aspect-ratio:2.15;
  border:0.125em solid #0000;box-sizing:border-box;
  transition:all 0.15s linear;
  display:grid;place-items:center;
  font-family:var(--font-main);font-size:3em;font-weight:800;letter-spacing:0.2em;
  background:
    linear-gradient(#fff1,#fff0) var(--chip) 50% / 10.25% 12% no-repeat,
    radial-gradient(at 20% 20%,#0000,#0003) 0 40% / 110% 120% padding-box,
    linear-gradient(#44444a,#28282f) 0 40% / 110% 120% padding-box,
    linear-gradient(#5b5b61,#28282f 50%,#202028) 0 40% / 110% 120% border-box}
.power-toggle::before{
  content:"ON";color:#fff8;
  transform:translate(-100%,-50%) rotateY(30deg);
  box-shadow:
    -0.5em 0 0.5em -0.25em #3334,
    -1em 0 #333,
    -0.5em 1em 1em -0.25em #0002,
    -1.5em 1.5em 1em -1em #0004,
    -2em 2em 1em -2em #0006,
    inset 0 0 2.5em #0004;
  transform-origin:100% 50%;
  border-radius:0.5em 0 0 0.5em;
  clip-path:polygon(-100% 0,105% 0,105% 45%,90% 45%,90% 55%,105% 55%,105% 200%,-100% 200%)}
.power-toggle::after{
  --chip:-5%;
  content:"OFF";color:#e6503c;text-shadow:0 0 1em #e6503c;
  transform:translate(0,-50%) rotateY(-0.1deg);
  box-shadow:
    0 0 0 -0.25em #000,0 0 #222,0 0 0 0 #0002,0 0 0 0 #0004,0 0 0 0 #0006,0 0 0 0 #0004,
    inset 2em 0 1.5em -1.5em #0001,inset 0 0 0 #0004;
  transform-origin:0% 50%;
  border-radius:0 0.5em 0.5em 0;
  clip-path:polygon(0 -100%,200% -100%,200% 200%,0 200%,0 55%,10% 55%,10% 45%,0 45%)}
.power-toggle:checked::before{
  color:#35ed7e;text-shadow:0 0 1em rgba(53,237,126,0.8);
  transform:translate(-100%,-50%) rotateY(0.1deg);
  box-shadow:0 0 0 -0.25em #fff1,0 0 #333,0 0 0 0 #0002,0 0 0 0 #0004,0 0 0 0 #0006,
    inset 0 0 2.5em #0002}
.power-toggle:checked::after{
  color:#aa281a;text-shadow:0 0 0;
  transform:translate(0,-50%) rotateY(-30deg);
  box-shadow:
    0.5em 0 0.5em -0.25em #000,1em 0 #282828,
    0.5em 1em 1em -0.25em #0002,1.5em 1.5em 1em -1em #0004,
    2em 2em 1em -2em #0006,2em 0.25em 1em #0004,
    inset 0 0 0 0 #0001,inset 0 0 1.5em #ffffff08;
  z-index:1}
/* FULL/SPĒLE poga stili ir .power-pair-btn klasē */
.power-top-row{display:flex;flex-direction:column;gap:5px;width:100%;flex-shrink:0;overflow:visible;position:relative}
.power-btn-pair{display:flex;gap:5px;width:90%;margin:0 auto}
.power-pair-btn{flex:1;height:44px;display:flex;align-items:center;justify-content:center;gap:5px;border:none;border-radius:8px;cursor:pointer;
  font-family:var(--font-main);font-size:13px;font-weight:700;letter-spacing:2px;text-transform:uppercase;transition:all .15s}
.pair-btn-icon{width:22px;height:31px;flex-shrink:0}
.pair-btn-icon-text{font-size:26px;line-height:1;color:#fff}
.pair-btn-text{font-size:16px;letter-spacing:2px}
/* FULL — zaļā poga */
.power-pair-btn.fullscreen{
  background:linear-gradient(180deg,#1e4a1e 0%,#143a14 50%,#0e2a0e 100%);
  color:#35ed7e;
  box-shadow:0 3px #0a1a0a,0 5px 8px rgba(0,0,0,0.5),0 0 12px rgba(53,237,126,0.15),
    inset 0 1px 0 rgba(255,255,255,0.1),inset 0 -1px 2px rgba(0,0,0,0.5)}
.power-pair-btn.fullscreen:hover{
  background:linear-gradient(180deg,#2a6a2a 0%,#1e5a1e 50%,#184a18 100%);
  color:#66ff99;box-shadow:0 3px #0a1a0a,0 5px 8px rgba(0,0,0,0.5),0 0 24px rgba(53,237,126,0.4),
    inset 0 1px 0 rgba(255,255,255,0.15);transform:scale(1.02)}
.power-pair-btn.fullscreen.active{
  background:linear-gradient(180deg,#2a6a2a,#1e5a1e);color:#66ff99;
  box-shadow:0 1px #0a1a0a,inset 0 2px 4px rgba(0,0,0,0.6),0 0 18px rgba(53,237,126,0.3)}
/* SPĒLE — violetā poga */
.power-pair-btn.game-btn{
  background:linear-gradient(180deg,#3a1e5a 0%,#2a1445 50%,#1e0e35 100%);
  color:#b366ff;
  box-shadow:0 3px #120a20,0 5px 8px rgba(0,0,0,0.5),0 0 12px rgba(155,77,255,0.15),
    inset 0 1px 0 rgba(255,255,255,0.1),inset 0 -1px 2px rgba(0,0,0,0.5)}
.power-pair-btn.game-btn:hover{
  background:linear-gradient(180deg,#4a2a70 0%,#3a1e60 50%,#2a1450 100%);
  color:#d0a0ff;box-shadow:0 3px #120a20,0 5px 8px rgba(0,0,0,0.5),0 0 24px rgba(155,77,255,0.4),
    inset 0 1px 0 rgba(255,255,255,0.15);transform:scale(1.02)}
.power-pair-btn.game-btn.active{
  background:linear-gradient(180deg,#4a2a70,#3a1e60);color:#d0a0ff;
  box-shadow:0 1px #120a20,inset 0 2px 4px rgba(0,0,0,0.6),0 0 18px rgba(155,77,255,0.3)}
.btn-icon-wrap{display:flex;align-items:center;justify-content:center;width:80%;aspect-ratio:1;position:relative}
.full-square{border:none;border-radius:0;position:relative}
.full-square::before,
.full-square::after{content:'';position:absolute}
.full-square::before{top:0;left:0;
  border-top:6px solid currentColor;border-left:6px solid currentColor;
  width:20px;height:20px;background:none}
.full-square::after{bottom:0;right:0;
  border-bottom:6px solid currentColor;border-right:6px solid currentColor;
  width:20px;height:20px}
.full-corner-tl,.full-corner-tr,.full-corner-bl,.full-corner-br{position:absolute;width:20px;height:20px}
.full-corner-tr{top:0;right:0;border-top:6px solid currentColor;border-right:6px solid currentColor}
.full-corner-bl{bottom:0;left:0;border-bottom:6px solid currentColor;border-left:6px solid currentColor}
.btn-icon-wrap .power-text{font-size:16px;font-weight:800;letter-spacing:2px;position:relative;z-index:1}
.panel-header{display:flex;flex-direction:column;gap:6px}
.power-label{font-family:var(--font-main);font-size:17px;font-weight:700;color:rgba(224,227,255,0.35);letter-spacing:2px;text-transform:uppercase}
/* Retro VU Meter Bars */
.indicator-bars{display:flex;gap:2px;align-items:center;justify-content:flex-end;flex:1;padding-right:8px}
.indicator-bar{width:4px;height:16px;border-radius:1px;transition:all .2s;background:rgba(192,192,192,0.1);border:1px solid rgba(0,0,0,0.5)}
.indicator-bar:nth-child(1){background:var(--neon-green)}
.indicator-bar:nth-child(2){background:var(--neon-green)}
.indicator-bar:nth-child(3){background:var(--electric-blue)}
.indicator-bar:nth-child(4){background:rgba(25,208,232,0.3)}
.indicator-bar:nth-child(5){background:rgba(192,192,192,0.2)}
.indicator-bar:nth-child(6){background:rgba(192,192,192,0.15)}
.indicator-bar.active{height:22px;box-shadow:0 0 8px currentColor,inset 0 1px 0 rgba(255,255,255,0.3)}
/* Bottom zone: SMS + Share pinned to bottom of panel */
/* Speaker grille fills space between channels and SMS */
.speaker-grille{flex:1;min-height:30px;
  background:
    repeating-linear-gradient(0deg,
      transparent 0px,transparent 3px,
      rgba(255,255,255,0.04) 3px,rgba(255,255,255,0.04) 4px),
    repeating-linear-gradient(0deg,
      transparent 0px,transparent 7px,
      rgba(0,0,0,0.3) 7px,rgba(0,0,0,0.3) 8px);
  border-radius:8px;
  box-shadow:inset 0 2px 6px rgba(0,0,0,0.5),inset 0 -2px 6px rgba(0,0,0,0.3)}
@media(max-height:780px){.speaker-grille{display:none}}
.panel-bottom-zone{flex-shrink:0;display:flex;flex-direction:column;gap:4px;padding:4px 0 2px;margin-top:auto;
  position:sticky;bottom:0;background:linear-gradient(0deg,#0d0d0d 60%,transparent)}
.util-btns-bottom{display:flex;flex-direction:column;gap:8px;flex-shrink:0}
.util-btns-bottom .wood-btn span{font-size:24px}
.util-btns-bottom .wood-btn{height:48px;width:100%;padding:0 14px;font-size:18px;border-radius:8px;
  /* Glass button style */
  background:linear-gradient(145deg,rgba(255,255,255,0.08),rgba(255,255,255,0.02));
  border:1px solid rgba(255,255,255,0.12);
  backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
  color:var(--electric-blue);
  box-shadow:0 2px 8px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.1),0 0 12px rgba(25,208,232,0.1);
  text-shadow:0 0 8px rgba(25,208,232,0.4)}
.util-btns-bottom .wood-btn:hover{background:linear-gradient(145deg,rgba(255,255,255,0.14),rgba(255,255,255,0.04));
  border-color:rgba(25,208,232,0.3);color:var(--pure-white);
  box-shadow:0 2px 12px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.15),0 0 20px rgba(25,208,232,0.2)}
.util-btns-bottom .wood-btn:active{transform:translateY(2px);box-shadow:inset 0 2px 4px rgba(0,0,0,0.5)}

/* SMS */
.sms-panel{background:linear-gradient(180deg,rgba(255,255,255,0.025) 0%,rgba(0,0,0,0.15) 100%),#151515;border-radius:10px;border:1px solid rgba(255,255,255,0.08);padding:10px 12px;display:flex;gap:8px;flex-direction:column;flex-shrink:0;
  box-shadow:inset 0 3px 8px rgba(0,0,0,0.7),inset 0 -1px 2px rgba(255,255,255,0.04),inset 2px 0 6px rgba(0,0,0,0.4),inset -2px 0 6px rgba(0,0,0,0.4)}
.sms-panel.disabled{opacity:0.35;pointer-events:none}
.sms-panel-row{display:flex;gap:8px;align-items:center}
.sms-panel input,.sms-panel textarea{background:rgba(0,0,0,0.5);border:1px solid rgba(88,101,242,0.25);border-radius:6px;color:var(--light-blurple);font-family:var(--font-main);font-size:20px;font-weight:500;padding:8px 10px;outline:none;-webkit-user-select:text;user-select:text}
.sms-panel input::placeholder{color:rgba(224,227,255,0.25)}
.sms-panel input:focus{border-color:var(--blurple);background:rgba(88,101,242,0.08)}
.sms-name-input{flex:1;min-width:0}
.sms-text-input{width:100%;resize:none;min-height:56px;line-height:1.4;font-family:var(--font-main)}
.sms-send-btn{padding:10px 14px;border:none;border-radius:6px;cursor:default;font-family:var(--font-main);font-size:18px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;transition:all .12s;
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 8% 16% no-repeat,
    radial-gradient(at 20% 20%,#0000,rgba(30,15,0,0.3)) 0 40% / 110% 120%,
    linear-gradient(180deg,#3a2a10 0%,#2e1e0a 50%,#221608 100%);
  color:rgba(255,180,50,0.45);
  box-shadow:0 2px #1a0e04,0 4px 6px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,200,80,0.08),
    inset 0 -1px 2px rgba(0,0,0,0.5),
    inset 2px 0 3px rgba(0,0,0,0.15),
    inset -2px 0 3px rgba(0,0,0,0.15);
  flex-shrink:0;pointer-events:none}
.sms-send-btn.active{pointer-events:auto;cursor:pointer;
  background:
    linear-gradient(#fff1,#fff0) 100% 50% / 8% 16% no-repeat,
    radial-gradient(at 20% 20%,#0000,rgba(30,15,0,0.3)) 0 40% / 110% 120%,
    linear-gradient(180deg,#4a3510 0%,#3a280c 50%,#2e1e08 100%);
  color:rgba(255,200,60,0.95);
  box-shadow:0 3px #1a0e04,0 5px 8px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,200,80,0.15),
    inset 0 -1px 2px rgba(0,0,0,0.4),
    inset 2px 0 3px rgba(0,0,0,0.12),
    inset -2px 0 3px rgba(0,0,0,0.12),
    0 0 10px rgba(255,180,50,0.2);
  text-shadow:0 0 6px rgba(255,180,50,0.4)}
.sms-send-btn.active:hover{
  background:
    linear-gradient(#fff2,#fff0) 100% 50% / 8% 16% no-repeat,
    radial-gradient(at 20% 20%,#0000,rgba(30,15,0,0.3)) 0 40% / 110% 120%,
    linear-gradient(180deg,#5a4018 0%,#4a3310 50%,#3a2508 100%);
  color:#ffc832;
  box-shadow:0 3px #1a0e04,0 5px 8px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,200,80,0.2),
    inset 0 -1px 2px rgba(0,0,0,0.4),
    inset 2px 0 3px rgba(0,0,0,0.1),
    inset -2px 0 3px rgba(0,0,0,0.1),
    0 0 16px rgba(255,180,50,0.35)}
.sms-send-btn:active{transform:translateY(3px);box-shadow:0 0 #1a0e04,inset 3px 3px 6px rgba(0,0,0,0.7),inset 0 0 4px rgba(0,0,0,0.3)}


/* INFO POPUP — Retro-Futuristic style */
@keyframes infoGlitchIn{0%{clip-path:inset(100% 0 0 0);opacity:0}30%{clip-path:inset(40% 0 0 0);opacity:0.7}32%{clip-path:inset(45% 0 0 0)}60%{clip-path:inset(10% 0 0 0);opacity:1}62%{clip-path:inset(12% 0 0 0)}100%{clip-path:inset(0);opacity:1}}
.info-popup-overlay{display:none;position:fixed;inset:0;z-index:200;background:rgba(0,0,0,0.55);backdrop-filter:blur(4px);align-items:center;justify-content:center}
.info-popup-overlay.show{display:flex}
.info-popup{position:relative;width:560px;max-width:94vw;max-height:82vh;display:flex;flex-direction:column;
  background:rgba(10,10,10,0.96);
  border:1px solid rgba(255,255,255,0.12);
  border-radius:10px;
  padding:0;overflow:hidden;
  box-shadow:0 12px 48px rgba(0,0,0,0.7);
  animation:infoGlitchIn 0.35s ease-out}
.info-popup-header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px 10px;
  border-bottom:1px solid rgba(255,255,255,0.08)}
.info-popup-title{font-family:var(--font-main),sans-serif;font-size:15px;font-weight:700;
  color:#ddd;letter-spacing:2px;text-transform:uppercase}
.info-popup-close{width:32px;height:32px;border:1px solid rgba(255,255,255,0.12);border-radius:4px;
  background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.6);cursor:pointer;font-size:16px;
  display:flex;align-items:center;justify-content:center;transition:all .15s}
.info-popup-close:hover{background:rgba(255,255,255,0.12);color:#fff;border-color:rgba(255,255,255,0.25)}
.info-popup-body{padding:16px 20px 20px;font-family:var(--font-main),sans-serif;font-size:13px;font-weight:400;line-height:1.6;
  color:rgba(220,220,220,0.9);position:relative;z-index:1;letter-spacing:0.3px;overflow:auto}
.info-popup-body p{margin-bottom:10px}
.info-popup-body .info-strap{display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:4px;border:1px solid rgba(255,255,255,0.12);
  background:rgba(255,255,255,0.04);
  font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:#aaa}
.info-popup-body strong{color:#35ed7e;font-weight:600}
.info-popup-body .info-version{font-family:var(--font-main),monospace;font-size:11px;color:rgba(255,255,255,0.35);
  letter-spacing:2px;margin-top:14px;display:block;text-transform:uppercase}
/* Shared form style — used in both INFO and Report */
.contact-form{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.contact-form-row{display:flex;gap:8px}
.contact-form-row .contact-input{flex:1;min-width:0}
.contact-input{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;padding:8px 12px;
  color:#ddd;font-family:var(--font-main),sans-serif;font-size:13px;letter-spacing:0.3px;outline:none;transition:border-color .2s;box-sizing:border-box}
.contact-input::placeholder{color:rgba(255,255,255,0.3)}
.contact-input:focus{border-color:rgba(53,237,126,0.4)}
.contact-textarea{resize:vertical;min-height:50px}
.contact-submit{background:rgba(53,237,126,0.12);color:#35ed7e;border:1px solid rgba(53,237,126,0.25);
  border-radius:6px;padding:9px 16px;font-family:var(--font-main),sans-serif;font-size:13px;letter-spacing:1.5px;cursor:pointer;
  transition:all .2s;text-transform:uppercase;font-weight:600}
.contact-submit:hover{background:rgba(53,237,126,0.2);border-color:rgba(53,237,126,0.45)}
.contact-submit:disabled{opacity:0.5;cursor:not-allowed}
.contact-status{font-size:12px;color:#35ed7e;text-align:center;min-height:16px}
.info-section-label{font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:#888;margin:14px 0 6px;padding-top:10px;border-top:1px solid rgba(255,255,255,0.06)}
/* Grid lines removed — clean look */

/* FULLSCREEN MODE — panel hidden, screen fills entire viewport */
.tv-casing.fs-mode .tv-panel{display:none}
.tv-casing.fs-mode .tv-screen-area{top:0;bottom:0;left:0;right:0;border-radius:0;border:none;box-shadow:none;background:#000}
.tv-casing.fs-mode .tv-screen{top:0;bottom:0;left:0;right:0;border-radius:0}
.tv-casing.fs-mode{border-radius:0;border:none;box-shadow:none}
.tv-casing.fs-mode::after{display:none}
/* Fullscreen: zoom video to fill (cover letterbox) */
.tv-casing.fs-mode .yt-slot.yt-ready{position:absolute;top:-80px;left:-15px;width:calc(100% + 30px);height:calc(100% + 160px);transform:scale(1.25);object-fit:cover}
/* Fullscreen exit button — top right */
.fs-exit-btn{display:none;position:absolute;top:54px;right:20px;z-index:50;
  width:48px;height:48px;border-radius:50%;border:none;cursor:pointer;
  background:rgba(0,0,0,0.7);color:rgba(255,255,255,0.8);
  font-size:22px;font-weight:bold;
  backdrop-filter:blur(6px);
  box-shadow:0 2px 12px rgba(0,0,0,0.5),0 0 0 1px rgba(255,255,255,0.1);
  transition:all .2s;align-items:center;justify-content:center}
.fs-exit-btn:hover{background:rgba(255,68,68,0.5);color:#fff;transform:scale(1.1);
  box-shadow:0 2px 16px rgba(255,68,68,0.4),0 0 0 1px rgba(255,68,68,0.3)}
.tv-casing.fs-mode .fs-exit-btn{display:flex}
/* Fullscreen: wider SMS ticker */
.tv-casing.fs-mode .sms-ticker-screen{display:none}
.tv-casing.fs-mode .sms-item{font-size:28px;padding:0 40px}

/* VHS OSD OVERLAY */
.vhs-osd{position:absolute;inset:0;z-index:15;pointer-events:none;font-family:'Press Start 2P',monospace;font-size:clamp(8px,1.2vw,14px);color:#fff}
.vhs-osd-ch{display:none}
.vhs-osd-time{position:absolute;top:102px;left:42px;animation:vhsRgbText 1.5s steps(9) infinite alternate;text-shadow:0 0 6px rgba(255,255,255,0.4);font-size:clamp(7px,1vw,12px);opacity:0.85}
@keyframes vhsRgbText{
  0%,25%{text-shadow:-1px 1px 6px rgba(255,255,255,0.5),0 0 2px rgba(251,0,231,0.6),0 0 2px rgba(0,233,235,0.6)}
  45%,55%{text-shadow:-1px 1px 6px rgba(255,255,255,0.5),3px 0 1px rgba(251,0,231,0.7),-3px 0 1px rgba(0,233,235,0.7)}
  90%,100%{text-shadow:-1px 1px 6px rgba(255,255,255,0.5),-2px 0 1px rgba(251,0,231,0.6),2px 0 1px rgba(0,233,235,0.6)}
}

/* RESPONSIVE */
@media(max-width:1100px){:root{--panel-w:300px}}
@media(max-width:900px){:root{--panel-w:260px}.tv-screen-area{top:10px;bottom:10px;left:10px;right:calc(var(--panel-w)+8px)}.tv-screen{top:9px;bottom:9px;left:9px;right:9px}.ch-btn{height:50px}}
@media(max-width:540px){:root{--panel-w:220px}.channel-grid{grid-template-columns:repeat(2,1fr)}.ch-btn{height:44px}}

/* MOBILE — sākuma ekrāna logo samazināšana */
@media(max-width:540px){
  .logo-letter{font-size:120px !important}
  .logo-letter.logo-M{font-size:130px !important}
  .logo-o-sphere{width:100px;height:130px}
  .logo-tv{font-size:65px}
  .lomk-sub{font-size:18px}
  .start-btn{width:90px;height:90px;margin-top:24px}
  .start-btn .play-tri{border-width:20px 0 20px 35px}
  .start-btn-label{font-size:12px;bottom:-28px}
}
@media(max-width:400px){
  .logo-letter{font-size:80px !important}
  .logo-letter.logo-M{font-size:90px !important}
  .logo-o-sphere{width:70px;height:90px}
  .logo-tv{font-size:42px}
  .lomk-sub{font-size:15px;letter-spacing:3px}
  .start-btn{width:76px;height:76px;margin-top:18px}
  .start-btn .play-tri{border-width:16px 0 16px 28px}
  .start-sub{font-size:14px}
}

/* MOBILE LANDSCAPE — Sākuma ekrāns */
@media(max-height:500px) and (orientation:landscape){
  .start-screen{gap:6px;justify-content:center}
  .logo-letter{font-size:88px !important}
  .logo-letter.logo-M{font-size:98px !important}
  .logo-o-sphere{width:70px;height:70px}
  .logo-o-sphere .logo-sphere{width:68px;height:68px}
  .logo-tv{font-size:44px;top:-16px;margin-left:-32px}
  .lomk-sub{font-size:14px;letter-spacing:4px;margin-top:6px}
  .start-sub{font-size:12px;margin-top:2px}
  .start-btn{width:60px;height:60px;margin-top:8px}
  .start-btn .play-tri{border-width:13px 0 13px 22px}
  .start-btn-label{font-size:10px;bottom:-22px}
}
@media(max-height:380px) and (orientation:landscape){
  .start-screen{gap:3px}
  .logo-letter{font-size:62px !important}
  .logo-letter.logo-M{font-size:70px !important}
  .logo-o-sphere{width:50px;height:50px}
  .logo-o-sphere .logo-sphere{width:48px;height:48px}
  .logo-tv{font-size:30px;top:-10px;margin-left:-22px}
  .lomk-sub{font-size:11px;letter-spacing:3px;margin-top:3px}
  .start-sub{font-size:10px;margin-top:1px}
  .start-btn{width:48px;height:48px;margin-top:4px}
  .start-btn .play-tri{border-width:11px 0 11px 18px}
  .start-btn-label{font-size:9px;bottom:-20px}
}

/* MOBILE LANDSCAPE — TV skats optimizēts */
@media(max-width:900px) and (orientation:landscape){
  :root{--panel-w:200px}
  /* Panelis scrollējams */
  .tv-panel{overflow-y:auto;overflow-x:hidden;padding:6px 10px 0;gap:5px}
  .tv-screen-area{top:4px;bottom:4px;left:4px;right:calc(var(--panel-w)+4px)}
  .tv-screen{top:4px;bottom:4px;left:4px;right:4px}
  /* Overlay */
  .tv-overlay{bottom:44px;left:6px;max-width:65%}
  .tv-overlay-inner{padding:8px 14px 6px}
  .tv-overlay-title{font-size:20px}
  .tv-overlay-artist{font-size:15px}
  .tv-overlay-label{font-size:16px;letter-spacing:3px;margin-bottom:4px}
  /* SMS ticker uz ekrāna */
  .sms-ticker-screen{height:40px}
  .sms-item{font-size:13px;padding:0 16px}
  .screen-progress{bottom:18px}
  /* Kanālu grid — slēpj ikonas lai nosaukums ietilpst */
  .channel-grid{gap:3px;padding:4px}
  .ch-btn{height:30px;border-radius:5px}
  .ch-face .ch-icon{display:none}
  .ch-face .ch-name{font-size:11px;letter-spacing:0.5px}
  .ch-face{gap:0;padding:0 6px}
  /* Panel header */
  .panel-header-wrapper{padding:4px 6px}
  .panel-divider{margin:2px 0}
  /* Controls — kompaktāks, šaurāks CH lai ietilpst 200px */
  .controls-section{padding:4px 4px}
  .controls-3col{gap:2px}
  .ctrl-col{gap:3px}
  .ctrl-btn{height:32px;font-size:11px;letter-spacing:0.5px;padding:0 4px}
  #muteBtn,#infoBtn,#volDownBtn,#volUpBtn{height:32px;font-size:11px}
  .ctrl-btn .ctrl-arrow{font-size:16px}
  #volDownBtn .ctrl-arrow{font-size:22px;margin-left:-2px;margin-right:0}
  #volUpBtn .ctrl-arrow{font-size:20px;margin-right:-2px;margin-left:0}
  .ctrl-btn .ctrl-label{font-size:10px}
  .ch-vertical-btn{min-height:68px;width:32px}
  .ch-vertical-btn-top,.ch-vertical-btn-bottom{font-size:18px}
  .ch-vertical-btn-center{font-size:9px}
  /* ON/OFF + FULL/CHILL */
  .power-top-row{gap:2px}
  .power-btn-pair{gap:2px}
  .power-pair-btn{height:28px}
  .pair-btn-icon{width:12px;height:16px}
  .pair-btn-icon-text{font-size:14px}
  .pair-btn-text{font-size:10px;letter-spacing:0.5px}
  .power-toggle{font-size:0.18em}
  /* Live strip */
  .tv-live-strip{top:6px;right:10px;gap:5px}
  .tv-live-badge{font-size:7px;padding:3px 6px}
  .tv-react-btn{font-size:9px;padding:3px 5px}
  .tv-report-popup{min-width:220px;max-width:300px;padding:10px 12px;font-size:11px;right:-40px}
  .tv-report-input{font-size:11px;padding:6px 8px}
  /* VHS OSD */
  .vhs-osd{font-size:clamp(6px,1vw,10px)}
  .vhs-osd-time{top:60px;left:14px}
  /* SMS panelis — kompaktāks, vertikāls layout */
  .sms-panel{padding:4px 5px}
  .sms-panel-row{gap:3px;flex-direction:column}
  .sms-send-btn{font-size:11px;padding:5px 8px;width:100%}
  .sms-name-input{font-size:12px;padding:4px 6px;width:100%;box-sizing:border-box}
  .sms-text-input{min-height:24px;font-size:12px;padding:4px 6px}
  /* Apakšējās pogas */
  .util-btns-bottom .wood-btn{height:32px;font-size:13px}
  .util-btns-bottom .wood-btn span{font-size:18px}
  /* Speaker */
  .speaker-grille{display:none}
  /* Bottom zone — sticky */
  .panel-bottom-zone{padding:3px 0 2px}
  /* Logo uz ekrāna */
  .screen-logo{top:4px;left:6px;padding:2px 6px;gap:1px}
  .screen-logo-l{font-size:18px}
  .screen-logo-m{font-size:17px}
  .screen-logo-o-sphere{width:18px;height:22px}
  .screen-logo-o-sphere .screen-logo-sphere{width:18px;height:18px}
  .screen-logo-tv{font-size:9px}
  .screen-logo-l,.screen-logo-m{text-shadow:none}
  /* Indicator bars kompaktāki */
  .indicator-bars{padding-right:4px}
  .indicator-bar{width:3px;height:12px}
}
@media(max-height:400px) and (orientation:landscape){
  .sms-ticker-screen{height:32px}
  .sms-item{font-size:11px;padding:0 12px}
  .tv-overlay{bottom:40px}
  .screen-progress{bottom:14px}
  #app{inset:6px !important}
  /* Panelis vēl kompaktāks */
  .tv-panel{padding:4px 8px 0;gap:3px}
  .panel-header-wrapper{padding:2px 4px}
  .power-toggle{font-size:0.18em}
  .power-pair-btn{height:28px}
  .pair-btn-text{font-size:10px}
  .pair-btn-icon-text{font-size:15px}
  .controls-section{padding:2px 4px}
  .ctrl-btn{height:28px;font-size:10px}
  #muteBtn,#infoBtn,#volDownBtn,#volUpBtn{height:28px;font-size:10px}
  .ch-vertical-btn{min-height:60px;width:36px}
  .ch-vertical-btn-top,.ch-vertical-btn-bottom{font-size:18px}
  .ch-btn{height:28px}
  .ch-face .ch-icon{font-size:14px}
  .ch-face .ch-name{font-size:10px}
  .sms-panel{padding:3px 4px}
  .sms-send-btn{font-size:10px;padding:4px 6px}
  .sms-name-input{font-size:12px;padding:3px 5px}
  .sms-text-input{min-height:24px;font-size:11px;padding:3px 5px}
  .util-btns-bottom .wood-btn{height:28px;font-size:12px}
  .panel-bottom-zone{padding:2px 0}
  /* Logo */
  .screen-logo{top:2px;left:4px;padding:2px 4px;gap:0}
  .screen-logo-l{font-size:14px}
  .screen-logo-m{font-size:13px}
  .screen-logo-o-sphere{width:14px;height:17px}
  .screen-logo-o-sphere .screen-logo-sphere{width:14px;height:14px}
  .screen-logo-tv{font-size:7px}
}

/* "PAGRIEZ TELEFONU" OVERLAY — tikai portrait mobilajā */
@keyframes rotatePhoneAnim{0%,100%{transform:rotate(0deg)}30%,70%{transform:rotate(-90deg)}}
.rotate-overlay{display:none;position:fixed;inset:0;z-index:500;background:#020808;
  flex-direction:column;align-items:center;justify-content:center;gap:16px;color:#fff;text-align:center;padding:20px}
.rotate-phone-icon{font-size:64px;animation:rotatePhoneAnim 3s ease-in-out infinite}
.rotate-text{font-family:'Russo One',var(--font-display),sans-serif;font-size:22px;color:var(--neon-purple);
  text-shadow:0 0 12px rgba(155,77,255,0.5)}
.rotate-sub{font-family:var(--font-main);font-size:14px;color:rgba(200,210,240,0.5);max-width:280px}
@media(max-width:768px) and (orientation:portrait){
  .rotate-overlay{display:flex !important}
  #app{display:none !important}
}


/* ====== SYNTHWAVE GAME CHANNEL ====== */
.game-slot{position:absolute;inset:0;z-index:6;overflow:hidden;background:#0a0014}
.sw-scene{position:absolute;inset:0;overflow:hidden}
/* Hide YT overlays when game is active (logo paliek redzams!) */
.game-slot:not([style*="display:none"]):not([style*="display: none"])~.yt-blocker,
.game-slot:not([style*="display:none"]):not([style*="display: none"])~.yt-bottom-hide{display:none}
/* Stars */
.sw-stars{position:absolute;inset:0;z-index:0}
.sw-star{position:absolute;width:2px;height:2px;border-radius:50%;background:#fff;opacity:0.6;
  animation:swStarTwinkle 3s ease-in-out infinite alternate}
@keyframes swStarTwinkle{0%{opacity:0.3;transform:scale(0.8)}100%{opacity:0.9;transform:scale(1.2)}}
/* Sun — centered above horizon */
.sw-sun{position:absolute;bottom:42%;left:50%;transform:translateX(-50%);width:200px;height:200px;z-index:1;
  background:radial-gradient(circle,#ff2975 0%,#ff6b2b 30%,#f5a623 55%,transparent 72%);
  border-radius:50%;box-shadow:0 0 60px rgba(255,41,117,0.6),0 0 120px rgba(255,107,43,0.3);
  mask-image:linear-gradient(to bottom,#000 42%,transparent 42%,transparent 46%,#000 46%,#000 50%,transparent 50%,transparent 54%,#000 54%,#000 58%,transparent 58%,transparent 63%,#000 63%,#000 70%,transparent 70%,transparent 78%,#000 78%);
  -webkit-mask-image:linear-gradient(to bottom,#000 42%,transparent 42%,transparent 46%,#000 46%,#000 50%,transparent 50%,transparent 54%,#000 54%,#000 58%,transparent 58%,transparent 63%,#000 63%,#000 70%,transparent 70%,transparent 78%,#000 78%)}
/* Horizon glow — wider, more atmospheric */
.sw-horizon{position:absolute;bottom:44%;left:0;right:0;height:8px;z-index:2;
  background:linear-gradient(90deg,transparent 5%,rgba(255,41,117,0.5) 15%,rgba(255,107,43,0.9) 50%,rgba(255,41,117,0.5) 85%,transparent 95%);
  box-shadow:0 0 40px rgba(255,41,117,0.6),0 0 80px rgba(255,107,43,0.2);filter:blur(2px)}
/* Horizon ambient glow — subtle color wash above */
.sw-horizon::before{content:'';position:absolute;bottom:100%;left:10%;right:10%;height:40px;
  background:linear-gradient(to top,rgba(255,107,43,0.12),transparent);filter:blur(8px);pointer-events:none}
/* Grid floor — perspective ground */
.sw-grid-wrap{position:absolute;bottom:0;left:0;right:0;height:46%;z-index:2;
  overflow:hidden;perspective:400px;perspective-origin:50% 0%}
.sw-grid{width:200%;height:200%;position:absolute;top:0;left:-50%;
  background:
    repeating-linear-gradient(rgba(155,77,255,0.45) 0px,rgba(155,77,255,0.45) 1px,transparent 1px,transparent 30px),
    repeating-linear-gradient(90deg,rgba(155,77,255,0.35) 0px,rgba(155,77,255,0.35) 1px,transparent 1px,transparent 60px);
  background-size:60px 30px,60px 30px;
  transform:rotateX(75deg);transform-origin:50% 0%;
  animation:swGridMove 1s linear infinite}
@keyframes swGridMove{0%{background-position:0 0,0 0}100%{background-position:0 30px,0 0}}
/* Lane dividers — dashed pink lines */
.sw-lane-l{position:absolute;bottom:0;left:38%;width:2px;height:46%;z-index:5;
  background:repeating-linear-gradient(to top,rgba(255,41,117,0.6) 0px,rgba(255,41,117,0.6) 12px,transparent 12px,transparent 24px)}
.sw-lane-r{position:absolute;bottom:0;left:62%;width:2px;height:46%;z-index:5;
  background:repeating-linear-gradient(to top,rgba(255,41,117,0.6) 0px,rgba(255,41,117,0.6) 12px,transparent 12px,transparent 24px)}
/* Road edge glow lines — neon cyan with pulse */
.sw-road-edge-l{position:absolute;bottom:0;left:15%;width:3px;height:46%;z-index:5;
  background:linear-gradient(to top,rgba(25,208,232,0.9),rgba(25,208,232,0.4) 40%,transparent 75%);
  box-shadow:0 0 8px rgba(25,208,232,0.4),0 0 16px rgba(25,208,232,0.15);
  animation:roadEdgePulse 2s ease-in-out infinite alternate}
.sw-road-edge-r{position:absolute;bottom:0;right:15%;width:3px;height:46%;z-index:5;
  background:linear-gradient(to top,rgba(25,208,232,0.9),rgba(25,208,232,0.4) 40%,transparent 75%);
  box-shadow:0 0 8px rgba(25,208,232,0.4),0 0 16px rgba(25,208,232,0.15);
  animation:roadEdgePulse 2s ease-in-out infinite alternate}
@keyframes roadEdgePulse{0%{opacity:0.7}100%{opacity:1}}
/* Car — DeLorean-style retro sports car */
.sw-car{position:absolute;bottom:8%;left:50%;transform:translateX(-50%);z-index:10;
  width:70px;height:100px;transition:left 0.15s ease-out}
/* Car body — lower chassis */
.sw-car::before{content:'';position:absolute;bottom:0;left:3px;width:64px;height:28px;
  background:linear-gradient(180deg,#c0c0c0 0%,#8a8a9e 40%,#5a5a6e 100%);
  border-radius:4px 4px 2px 2px;
  box-shadow:0 0 20px rgba(25,208,232,0.6),0 0 40px rgba(155,77,255,0.3),0 4px 12px rgba(0,0,0,0.8),
    inset 0 2px 0 rgba(255,255,255,0.3),inset 0 -2px 4px rgba(0,0,0,0.5);
  border:1px solid rgba(25,208,232,0.3)}
/* Car body — top/windshield wedge */
.sw-car::after{content:'';position:absolute;bottom:26px;left:7px;width:56px;height:56px;
  background:linear-gradient(180deg,rgba(25,208,232,0.95) 0%,rgba(25,208,232,0.3) 20%,#2a2a3e 45%,#c0c0c0 60%,#8a8a9e 100%);
  clip-path:polygon(5% 100%,95% 100%,85% 30%,72% 0%,28% 0%,15% 30%);
  box-shadow:0 -8px 24px rgba(25,208,232,0.7)}
/* Headlights beam — dual cones */
.sw-car-lights{position:absolute;bottom:80px;left:50%;transform:translateX(-50%);width:90px;height:160px;z-index:9;
  background:
    linear-gradient(to top,rgba(25,208,232,0.2) 0%,transparent 70%),
    radial-gradient(ellipse 30% 100% at 35% 100%,rgba(25,208,232,0.15),transparent 60%),
    radial-gradient(ellipse 30% 100% at 65% 100%,rgba(25,208,232,0.15),transparent 60%);
  clip-path:polygon(30% 100%,70% 100%,98% 0%,2% 0%);pointer-events:none;
  filter:blur(5px);opacity:0.6}
/* Tail lights — twin red rectangles */
.sw-car-tail{position:absolute;bottom:2px;left:50%;transform:translateX(-50%);width:64px;height:5px;
  background:linear-gradient(90deg,transparent 2%,#ff2975 10%,#ff4488 22%,transparent 35%,transparent 65%,#ff4488 78%,#ff2975 90%,transparent 98%);
  box-shadow:0 3px 14px rgba(255,41,117,0.8),0 0 6px rgba(255,41,117,0.5);border-radius:1px}
/* Neon underglow */
.sw-car-glow{position:absolute;bottom:-6px;left:50%;transform:translateX(-50%);width:72px;height:12px;
  background:radial-gradient(ellipse,rgba(25,208,232,0.5) 0%,rgba(155,77,255,0.3) 40%,transparent 70%);
  filter:blur(6px);pointer-events:none;animation:underGlow 2s ease-in-out infinite alternate}
@keyframes underGlow{0%{opacity:0.6}100%{opacity:1}}
/* Obstacles container */
#swObstacles{position:absolute;inset:0;z-index:8;pointer-events:none}
/* Obstacles */
.sw-obstacle{position:absolute;pointer-events:none;opacity:0}
/* Palm tree — neon synthwave style */
.sw-palm{width:60px;height:90px}
.sw-palm-trunk{position:absolute;bottom:0;left:50%;transform:translateX(-50%);
  width:8px;height:52px;
  background:linear-gradient(90deg,#2a1a00,#5a3800 30%,#8a5a10 50%,#5a3800 70%,#2a1a00);
  border-radius:2px;
  box-shadow:inset -2px 0 4px rgba(0,0,0,0.5),0 0 8px rgba(155,77,255,0.15)}
.sw-palm-trunk::before{content:'';position:absolute;inset:0;
  background:repeating-linear-gradient(0deg,transparent 0px,transparent 5px,rgba(0,0,0,0.2) 5px,rgba(0,0,0,0.2) 6px)}
.sw-palm-top{position:absolute;top:0;left:50%;transform:translateX(-50%);
  width:60px;height:45px;
  background:
    radial-gradient(ellipse 50% 50% at 50% 90%,rgba(53,237,126,0.9) 0%,transparent 50%),
    radial-gradient(ellipse 90% 40% at 30% 70%,rgba(53,237,126,0.7) 0%,transparent 50%),
    radial-gradient(ellipse 90% 40% at 70% 70%,rgba(53,237,126,0.7) 0%,transparent 50%),
    radial-gradient(ellipse 70% 50% at 20% 50%,rgba(25,208,232,0.4) 0%,transparent 50%),
    radial-gradient(ellipse 70% 50% at 80% 50%,rgba(25,208,232,0.4) 0%,transparent 50%);
  filter:drop-shadow(0 0 10px rgba(53,237,126,0.6)) drop-shadow(0 0 20px rgba(53,237,126,0.2))}
/* Building — neon skyscraper with lit windows */
.sw-building{position:relative;
  background:linear-gradient(180deg,#2a1a3e 0%,#1a0e2e 40%,#0e0818 100%);
  border:1px solid rgba(155,77,255,0.5);
  box-shadow:0 0 16px rgba(155,77,255,0.4),0 0 32px rgba(155,77,255,0.15),inset 0 0 20px rgba(0,0,0,0.6)}
.sw-building::before{content:'';position:absolute;inset:3px;
  background:
    repeating-linear-gradient(0deg,transparent 0px,transparent 6px,rgba(155,77,255,0.12) 6px,rgba(155,77,255,0.12) 7px),
    repeating-linear-gradient(90deg,transparent 0px,transparent 7px,rgba(155,77,255,0.08) 7px,rgba(155,77,255,0.08) 8px);
  opacity:0.9}
/* Neon lit windows */
.sw-building::after{content:'';position:absolute;inset:4px;
  background:
    radial-gradient(circle 2px at 25% 15%,rgba(25,208,232,0.9),transparent 3px),
    radial-gradient(circle 2px at 65% 25%,rgba(255,41,117,0.8),transparent 3px),
    radial-gradient(circle 2px at 35% 45%,rgba(245,166,35,0.7),transparent 3px),
    radial-gradient(circle 2px at 75% 55%,rgba(25,208,232,0.7),transparent 3px),
    radial-gradient(circle 2px at 20% 70%,rgba(255,41,117,0.6),transparent 3px),
    radial-gradient(circle 2px at 60% 80%,rgba(53,237,126,0.7),transparent 3px);
  animation:windowFlicker 3s steps(1) infinite}
@keyframes windowFlicker{0%,100%{opacity:1}25%{opacity:0.8}50%{opacity:1}75%{opacity:0.7}}
/* Antenna/spire on top */
/* Mountain — dark silhouette with neon edge */
.sw-mountain{clip-path:polygon(50% 0%,0% 100%,100% 100%);
  background:linear-gradient(180deg,#2a1050 0%,#1a0a3e 35%,#0a0014 100%);
  box-shadow:0 0 12px rgba(155,77,255,0.3);position:relative}
.sw-mountain::before{content:'';position:absolute;inset:0;
  clip-path:polygon(50% 0%,0% 100%,100% 100%);
  background:linear-gradient(180deg,transparent 0%,transparent 85%,rgba(155,77,255,0.2) 100%)}
.sw-mountain::after{content:'';position:absolute;top:0;left:50%;width:40%;height:30%;
  transform:translateX(-50%);
  clip-path:polygon(50% 0%,0% 100%,100% 100%);
  background:linear-gradient(180deg,rgba(255,255,255,0.25) 0%,rgba(200,210,255,0.1) 100%);
  filter:blur(1px)}
/* Neon diamond collectible — pulsējošs ar glow */
.sw-diamond{width:28px;height:28px;position:relative;
  background:linear-gradient(135deg,#35ed7e,#19d0e8);
  clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);
  box-shadow:0 0 20px rgba(53,237,126,0.9),0 0 40px rgba(53,237,126,0.4);
  animation:swDiamondSpin 1.5s ease-in-out infinite}
@keyframes swDiamondSpin{0%{filter:hue-rotate(0deg) brightness(1);transform:scale(1)}25%{filter:hue-rotate(20deg) brightness(1.2)}50%{filter:hue-rotate(40deg) brightness(1.4);transform:scale(1.15)}75%{filter:hue-rotate(20deg) brightness(1.2)}100%{filter:hue-rotate(0deg) brightness(1);transform:scale(1)}}
/* Neon barrel obstacle */
.sw-barrel{width:28px;height:32px;
  background:linear-gradient(90deg,#1a0e2e 0%,#3a1a5e 20%,#5a2a8e 50%,#3a1a5e 80%,#1a0e2e 100%);
  border-radius:4px;border:1px solid rgba(255,41,117,0.6);
  box-shadow:0 0 12px rgba(255,41,117,0.5),inset 0 0 8px rgba(0,0,0,0.5);position:relative}
.sw-barrel::before{content:'';position:absolute;top:30%;left:0;right:0;height:3px;
  background:linear-gradient(90deg,transparent,#ff2975,transparent);
  box-shadow:0 0 8px rgba(255,41,117,0.8)}
.sw-barrel::after{content:'⚠';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  font-size:12px;line-height:1;filter:drop-shadow(0 0 4px rgba(245,166,35,0.8))}
/* Kruīzera auto — pretimbraucošs */
.sw-cruiser{width:40px;height:60px;position:relative}
.sw-cruiser::before{content:'';position:absolute;bottom:0;left:4px;width:32px;height:18px;
  background:linear-gradient(90deg,#e53935,#c62828);border-radius:3px 3px 1px 1px;
  box-shadow:0 0 16px rgba(229,57,53,0.7),0 3px 8px rgba(0,0,0,0.6);
  border:1px solid rgba(255,100,100,0.3)}
.sw-cruiser::after{content:'';position:absolute;bottom:16px;left:8px;width:24px;height:30px;
  background:linear-gradient(180deg,rgba(245,166,35,0.8) 0%,rgba(245,166,35,0.3) 20%,#1a1a2e 50%,#e53935 70%);
  clip-path:polygon(10% 100%,90% 100%,80% 30%,65% 0%,35% 0%,20% 30%)}
/* Kruīzera priekšējie lukturi */
.sw-cruiser-lights{position:absolute;top:-4px;left:50%;transform:translateX(-50%);width:32px;height:6px;
  background:linear-gradient(90deg,transparent 5%,#f5a623 15%,#f5a623 30%,transparent 45%,transparent 55%,#f5a623 70%,#f5a623 85%,transparent 95%);
  box-shadow:0 -4px 12px rgba(245,166,35,0.6);border-radius:1px}
/* Score */
.sw-score{position:absolute;top:16px;right:20px;z-index:15;
  font-family:'Handjet',var(--font-main),sans-serif;font-size:48px;font-weight:700;
  color:#35ed7e;letter-spacing:4px;
  text-shadow:0 0 16px rgba(53,237,126,0.7),0 0 32px rgba(53,237,126,0.3)}
.sw-score::before{content:'SCORE';display:block;font-size:14px;letter-spacing:8px;
  color:rgba(53,237,126,0.5);margin-bottom:2px}
/* LOM brand — below score, not overlapping screen-logo */
.sw-lom{position:absolute;bottom:16px;right:20px;z-index:15;
  font-family:'Russo One',var(--font-display),sans-serif;font-size:22px;
  color:rgba(155,77,255,0.5);letter-spacing:6px;
  text-shadow:0 0 12px rgba(155,77,255,0.4)}
/* Bonus flash */
.sw-bonus{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);z-index:20;
  font-family:'Handjet',var(--font-main),sans-serif;font-size:72px;font-weight:700;
  color:#f5a623;letter-spacing:8px;
  text-shadow:0 0 24px rgba(245,166,35,0.9),0 0 48px rgba(245,166,35,0.4);
  animation:swBonusPop 1s ease-out forwards;pointer-events:none}
@keyframes swBonusPop{0%{opacity:1;transform:translate(-50%,-50%) scale(0.3)}40%{transform:translate(-50%,-50%) scale(1.3)}100%{opacity:0;transform:translate(-50%,-50%) scale(1.6) translateY(-40px)}}
/* Car hit flash */
@keyframes swCarHit{0%,100%{opacity:1}25%,75%{opacity:0.2}}
.sw-car.hit{animation:swCarHit 0.5s ease}
/* Hit screen flash — sarkans blīkšķis */
.sw-hit-flash{position:absolute;inset:0;z-index:18;pointer-events:none;background:rgba(255,0,0,0);transition:background .05s;border-radius:inherit}
.sw-hit-flash.flash{background:rgba(255,0,0,0.3)}
/* Lives — sirdis augšā kreisajā */
.sw-lives{position:absolute;top:16px;left:20px;z-index:15;display:flex;gap:6px}
.sw-heart{font-size:24px;filter:drop-shadow(0 0 6px rgba(255,41,117,0.8));transition:all .3s}
.sw-heart.lost{opacity:0.2;transform:scale(0.7);filter:none}
/* High score zem score */
.sw-hiscore{position:absolute;top:82px;right:20px;z-index:15;
  font-family:'Handjet',var(--font-main),sans-serif;font-size:18px;color:rgba(245,166,35,0.6);letter-spacing:2px}
.sw-hiscore::before{content:'HI ';color:rgba(245,166,35,0.4)}
/* GAME OVER ekrāns */
.sw-gameover{position:absolute;inset:0;z-index:25;display:flex;flex-direction:column;align-items:center;justify-content:center;
  background:radial-gradient(ellipse at 50% 70%,rgba(10,0,20,0.85),rgba(10,0,20,0.97));
  opacity:0;pointer-events:none;transition:opacity .5s ease}
.sw-gameover.show{opacity:1;pointer-events:auto}
.sw-go-title{font-family:'Handjet',var(--font-main),sans-serif;font-size:clamp(48px,8vw,86px);font-weight:700;
  color:#ff2975;letter-spacing:8px;text-transform:uppercase;
  text-shadow:0 0 30px rgba(255,41,117,0.8),0 0 60px rgba(255,41,117,0.4),0 4px 0 #9b4dff;
  animation:swGoGlow 2s ease-in-out infinite alternate}
@keyframes swGoGlow{0%{text-shadow:0 0 30px rgba(255,41,117,0.8),0 0 60px rgba(255,41,117,0.4),0 4px 0 #9b4dff}
  100%{text-shadow:0 0 50px rgba(255,41,117,1),0 0 100px rgba(255,41,117,0.6),0 4px 0 #b366ff,0 0 20px rgba(155,77,255,0.5)}}
.sw-go-score{font-family:'Handjet',var(--font-main),sans-serif;font-size:clamp(28px,4vw,42px);
  color:#35ed7e;letter-spacing:4px;margin-top:12px;
  text-shadow:0 0 16px rgba(53,237,126,0.7)}
.sw-go-hiscore{font-family:'Handjet',var(--font-main),sans-serif;font-size:clamp(18px,2.5vw,24px);
  color:#f5a623;letter-spacing:3px;margin-top:6px;opacity:0.8}
.sw-go-restart{font-family:'Handjet',var(--font-main),sans-serif;font-size:clamp(22px,3vw,32px);
  color:#19d0e8;letter-spacing:4px;margin-top:28px;cursor:pointer;
  text-shadow:0 0 12px rgba(25,208,232,0.6);padding:12px 32px;
  border:2px solid rgba(25,208,232,0.4);border-radius:8px;background:rgba(25,208,232,0.08);
  transition:all .2s;text-transform:uppercase}
.sw-go-restart:hover{background:rgba(25,208,232,0.15);border-color:rgba(25,208,232,0.7);
  box-shadow:0 0 24px rgba(25,208,232,0.3);transform:scale(1.05)}
/* Neon dekoratīva josla game over */
.sw-go-line{width:200px;height:3px;margin:16px 0;
  background:linear-gradient(90deg,transparent,#ff2975 20%,#9b4dff 50%,#19d0e8 80%,transparent);
  box-shadow:0 0 12px rgba(255,41,117,0.5)}
/* Mobile game controls */
.sw-touch-controls{position:absolute;bottom:0;left:0;right:0;height:50%;z-index:12;display:flex;pointer-events:auto}
.sw-touch-left,.sw-touch-right{flex:1;-webkit-tap-highlight-color:transparent}

/* ====== PWA INSTALL POPUP ====== */
.pwa-overlay{display:none;position:fixed;inset:0;z-index:250;background:rgba(0,0,0,0.6);backdrop-filter:blur(4px);align-items:center;justify-content:center}
.pwa-overlay.show{display:flex}
.pwa-popup{width:420px;max-width:92vw;background:rgba(10,10,10,0.96);border:1px solid rgba(255,255,255,0.12);
  border-radius:14px;overflow:hidden;box-shadow:0 16px 60px rgba(0,0,0,0.7);animation:infoGlitchIn 0.35s ease-out}
.pwa-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px 12px}
.pwa-header-title{font-family:var(--font-main);font-size:14px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:#ddd}
.pwa-close{width:34px;height:34px;border-radius:50%;border:none;background:rgba(180,40,40,0.7);color:#fff;font-size:18px;
  cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .15s;box-shadow:inset 0 -2px 4px rgba(0,0,0,0.4)}
.pwa-close:hover{background:rgba(220,50,50,0.85)}
.pwa-body{padding:4px 20px 20px}
.pwa-card{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:16px 18px;
  margin-bottom:10px;display:flex;align-items:center;gap:14px;cursor:pointer;transition:all .15s}
.pwa-card:hover{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.16)}
.pwa-card-icon{width:40px;height:40px;border:1.5px solid rgba(255,200,50,0.5);border-radius:8px;display:flex;align-items:center;justify-content:center;
  font-size:20px;flex-shrink:0;color:#ffc832}
.pwa-card-text{flex:1}
.pwa-card-title{font-weight:700;font-size:14px;color:#eee;margin-bottom:2px}
.pwa-card-desc{font-size:12px;color:#888}
.pwa-footer{text-align:center;padding:10px 20px 16px;font-size:12px;color:#666}
/* PWA Install Instructions (2. solis) */
.pwa-instructions{display:none;padding:0 20px 20px}
.pwa-instructions.show{display:block}
.pwa-back{background:none;border:none;color:var(--electric-blue);cursor:pointer;font-size:13px;font-family:var(--font-main);
  padding:4px 0;margin-bottom:10px;display:flex;align-items:center;gap:6px}
.pwa-back:hover{text-decoration:underline}
.pwa-instructions p{font-size:13px;color:#bbb;margin-bottom:12px}
.pwa-step{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:8px;padding:12px 16px;margin-bottom:8px}
.pwa-step strong{color:#ffc832;font-size:13px}
.pwa-step span{display:block;font-size:12px;color:#aaa;margin-top:2px}
</style>
</head>
<body>

<!-- START -->
<div class="start-screen" id="startScreen">
  <div class="start-particles">
    <div class="start-particle"></div><div class="start-particle"></div><div class="start-particle"></div>
    <div class="start-particle"></div><div class="start-particle"></div><div class="start-particle"></div>
    <div class="start-particle"></div><div class="start-particle"></div><div class="start-particle"></div>
    <div class="start-particle"></div>
  </div>
  <div class="logo-container">
    <div class="logo-sub-wrap">
      <div class="logo-main">
        <span class="logo-letter logo-L">L</span><span class="logo-o-sphere"><span class="logo-sphere"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></span></span><span class="logo-letter logo-M">M</span><span class="logo-tv">tv</span>
      </div>
      <div class="lomk-sub">Latvijas Online Mūzikas Kanāls</div>
      <div class="start-sub">kopš 2003. gada</div>
    </div>
  </div>
  <button class="start-btn" id="startBtn" onclick="launchTV()">
    <div class="play-tri"></div>
    <span class="start-btn-label">CHILL</span>
  </button>
</div>

<!-- CALIBRATION moved inside tv-screen -->

<!-- ROTATE PHONE OVERLAY (mobile portrait) -->
<div class="rotate-overlay" id="rotateOverlay">
  <div class="rotate-phone-icon">📱</div>
  <div class="rotate-text">Pagriez telefonu horizontāli</div>
  <div class="rotate-sub">LOM TV vislabāk skatāms landscape režīmā</div>
</div>

<!-- APP -->
<div id="app">
  <div class="tv-casing">

    <!-- SCREEN -->
    <div class="tv-screen-area">
      <div class="tv-screen" id="tvScreen">
        <div class="scanlines"></div>
        <div id="yt-slot-a" class="yt-slot"></div>
        <div id="yt-slot-b" class="yt-slot yt-hidden"></div>
        <div class="tv-dim-overlay" id="tvDimOverlay"></div>
        <!-- GAME CHANNEL SLOT -->
        <div id="game-slot" class="game-slot" style="display:none">
          <div class="sw-scene">
            <div class="sw-stars" id="swStars"></div>
            <div class="sw-sun"></div>
            <div class="sw-horizon"></div>
            <div class="sw-grid-wrap"><div class="sw-grid"></div></div>
            <div class="sw-lane-l"></div><div class="sw-lane-r"></div>
            <div class="sw-road-edge-l"></div><div class="sw-road-edge-r"></div>
            <div id="swObstacles"></div>
            <div class="sw-car" id="swCar">
              <div class="sw-car-lights"></div>
              <div class="sw-car-tail"></div>
              <div class="sw-car-glow"></div>
            </div>
            <div class="sw-hit-flash" id="swHitFlash"></div>
            <div class="sw-lives" id="swLives"></div>
            <div class="sw-score" id="swScore">0</div>
            <div class="sw-hiscore" id="swHiscore">0</div>
            <div class="sw-lom">LOM</div>
            <div class="sw-touch-controls"><div class="sw-touch-left" id="swTouchL"></div><div class="sw-touch-right" id="swTouchR"></div></div>
            <!-- GAME OVER -->
            <div class="sw-gameover" id="swGameover">
              <div class="sw-go-title">GAME OVER</div>
              <div class="sw-go-line"></div>
              <div class="sw-go-score" id="swGoScore">SCORE: 0</div>
              <div class="sw-go-hiscore" id="swGoHiscore">BEST: 0</div>
              <div class="sw-go-line"></div>
              <button class="sw-go-restart" id="swGoRestart">SPĒLĒT VĒL</button>
            </div>
          </div>
        </div>
        <div class="yt-blocker" id="ytBlocker"></div>
        <div class="yt-bottom-hide"></div>
        <div class="era-overlay-vintage"></div>
        <div class="era-overlay-vintage-grain"></div>
        <div class="era-overlay-vintage-lines"></div>
        <div class="era-overlay-vcr"></div>
        <div class="era-overlay-vcr-chroma"></div>
        <div class="era-overlay-vcr-band"></div>
        <div class="era-overlay-vcr-grain"></div>
        <div class="era-overlay-vcr-glitch"></div>
        <div class="screen-logo"><span class="screen-logo-l">L</span><span class="screen-logo-o-sphere"><span class="screen-logo-sphere"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></span></span><span class="screen-logo-m">M</span><span class="screen-logo-tv">tv</span></div>
        <button class="fs-exit-btn" id="fsExitBtn" onclick="toggleFullscreen()" title="Iziet no pilnekrāna">✕</button>
        <div class="ch-switch-overlay" id="chOverlay"></div>
        <div class="now-playing" id="nowPlaying">
          <div class="now-playing-text" id="npText">—</div>
          <div class="now-playing-ch" id="npCh">KAN 1</div>
        </div>
        <!-- VHS OSD Overlay -->
        <div class="vhs-osd" id="vhsOsd">
          <div class="vhs-osd-ch" id="vhsOsdCh">▶ POP</div>
          <div class="vhs-osd-time" id="vhsOsdTime">--:--</div>
        </div>
        <!-- LIVE viewers + report — labajā augšējā stūrī -->
        <div class="tv-live-strip" id="tvLiveStrip">
          <div class="tv-live-badge"><span class="tv-live-dot"></span>LIVE <span class="tv-live-count" id="tvLiveCount">147</span></div>
          <div class="tv-reactions" style="position:relative">
            <button class="tv-react-btn tv-react-report" id="reactReport" title="Ziņot par dziesmu">&#9888;</button>
            <div class="tv-report-popup" id="reportPopup">
              <div class="tv-report-q">Vai dziesma atbilst šim kanālam?</div>
              <div class="tv-report-btns">
                <button class="tv-report-btn yes" id="reportFits">atbilst</button>
                <button class="tv-report-btn no" id="reportNotFits">neatbilst</button>
              </div>
              <div class="tv-report-divider"></div>
              <div class="tv-report-suggest-label">Iesaki dziesmu šim kanālam:</div>
              <input type="text" class="tv-report-input" id="suggestInput" placeholder="YouTube links vai izpildītājs — dziesma">
              <button class="tv-report-submit" id="suggestSubmit">IESNIEGT</button>
              <div class="tv-report-thanks" id="reportStatus" style="display:none;margin-top:8px"></div>
            </div>
          </div>
        </div>
        <!-- TV Info Overlay (Now Playing / Up Next / Just Played) -->
        <div class="tv-overlay" id="tvOverlay">
          <div class="tv-overlay-inner">
            <div class="tv-overlay-label" id="tvOvLabel">TAGAD SKAN</div>
            <div class="tv-overlay-title" id="tvOvTitle">—</div>
            <div class="tv-overlay-artist" id="tvOvArtist">—</div>
            <div class="tv-overlay-meta" id="tvOvMeta"></div>
          </div>
        </div>
        <div class="screen-progress"><div class="screen-progress-fill" id="npProgressFill"></div></div>
        <div class="sms-ticker-screen"><div class="sms-ticker-inner" id="smsTicker"></div></div>
        <!-- Color bars — parādās kad video nav pieejams -->
        <div class="tv-color-bars" id="tvColorBars">
          <div class="bars-row">
            <div class="bar" style="background:#fff"></div>
            <div class="bar" style="background:#fc0"></div>
            <div class="bar" style="background:#0ff"></div>
            <div class="bar" style="background:#0f0"></div>
            <div class="bar" style="background:#f0f"></div>
            <div class="bar" style="background:#f00"></div>
            <div class="bar" style="background:#00f"></div>
          </div>
          <div class="bars-text" id="barsText">MEKLĒ NĀKAMO DZIESMU…</div>
        </div>
        <div class="static-noise" id="staticNoise"><canvas id="noiseCanvas"></canvas></div>
        <!-- Volume OSD -->
        <div class="vol-osd" id="volOsd">
          <div class="vol-osd-label">VOLUME</div>
          <div class="vol-osd-bar">
            <div class="vol-osd-blocks" id="volOsdBlocks"></div>
            <div class="vol-osd-dashes" id="volOsdDashes"></div>
          </div>
          <div class="vol-osd-value" id="volOsdValue">80</div>
        </div>
        <!-- Muted overlay -->
        <div class="mute-osd" id="muteOsd">
          <div class="mute-osd-icon">🔇</div>
          <div class="mute-osd-text">MUTED</div>
          <div class="mute-osd-sub">TAP TO UNMUTE</div>
        </div>
        <div class="power-off-screen" id="powerOff"><div class="power-dot"></div></div>
        <div class="calib-screen" id="calibScreen">
          <div class="calib-bars"><div class="calib-bar"></div><div class="calib-bar"></div><div class="calib-bar"></div><div class="calib-bar"></div><div class="calib-bar"></div><div class="calib-bar"></div><div class="calib-bar"></div><div class="calib-bar"></div></div>
          <div class="calib-bottom"><div class="calib-bottom-bar"></div><div class="calib-bottom-bar"></div><div class="calib-bottom-bar"></div><div class="calib-bottom-bar"></div><div class="calib-bottom-bar"></div><div class="calib-bottom-bar"></div><div class="calib-bottom-bar"></div><div class="calib-bottom-bar"></div></div>
        </div>
      </div>
    </div>

    <!-- PANEL -->
    <div class="tv-panel">
      <div class="panel-header-wrapper">
        <div class="panel-header">
          <div class="panel-header-top-row">
            <div class="power-top-row">
              <!-- 3D Toggle Switch -->
              <input type="checkbox" class="power-toggle" id="powerToggleInput" role="switch" checked>
              <!-- FULL + SPĒLE pogas blakus zem toggle -->
              <div class="power-btn-pair">
                <button class="power-pair-btn fullscreen" id="fullscreenBtn" onclick="toggleFullscreen()">
                  <svg class="pair-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M3 3h6v2H5v4H3zM15 3h6v6h-2V5h-4zM3 15v6h6v-2H5v-4zm18 0v4h-4v2h6v-6z"/></svg>
                  <span class="pair-btn-text">FULL</span>
                </button>
                <button class="power-pair-btn game-btn" id="gamePanelBtn">
                  <span class="pair-btn-icon-text">☕</span>
                  <span class="pair-btn-text">CHILL</span>
                </button>
              </div>
            </div>
            <div class="indicator-bars">
              <div class="indicator-bar active"></div>
              <div class="indicator-bar active"></div>
              <div class="indicator-bar active"></div>
              <div class="indicator-bar"></div>
              <div class="indicator-bar"></div>
              <div class="indicator-bar"></div>
            </div>
            <div class="panel-led" id="ledPower"></div>
          </div>
          <div class="panel-divider"></div>
          <div class="controls-section">
          <div class="controls-3col">
            <div class="ctrl-col ctrl-col-left">
              <button class="ctrl-btn" id="muteBtn" onclick="toggleMute()">
                <span class="ctrl-label">MUTE</span>
              </button>
              <button class="ctrl-btn" id="volDownBtn" onclick="changeVolume(-5)">
                <span class="ctrl-arrow">◀</span>
                <span class="ctrl-label">VOL −</span>
              </button>
            </div>
            <div class="ctrl-col ctrl-col-center">
              <div class="ch-vertical-btn" id="chVerticalBtn">
                <div class="ch-vertical-btn-top" onclick="changeChannel(-1)" title="Iepriekšējais kanāls">▲</div>
                <div class="ch-vertical-btn-center">CH</div>
                <div class="ch-vertical-btn-bottom" onclick="changeChannel(1)" title="Nākošais kanāls">▼</div>
              </div>
            </div>
            <div class="ctrl-col ctrl-col-right">
              <button class="ctrl-btn" id="infoBtn" onclick="toggleInfoPopup()">
                <span class="ctrl-label">INFO</span>
              </button>
              <button class="ctrl-btn" id="volUpBtn" onclick="changeVolume(5)">
                <span class="ctrl-label">VOL +</span>
                <span class="ctrl-arrow">▶</span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="channel-grid" id="channelGrid"><!-- Dinamiski ģenerēts no JS --></div>
      <!-- SMS panels tieši zem kanāliem -->
      <div class="sms-panel" id="smsPanel">
        <div class="sms-panel-row">
          <button class="sms-send-btn" id="smsSendBtn" onclick="sendSMS()">SŪTĪT SMS</button>
          <input type="text" class="sms-name-input" id="smsName" placeholder="Tavs vārds" maxlength="15">
        </div>
        <textarea class="sms-text-input" id="smsText" placeholder="Tava ziņa..." maxlength="280" rows="2"></textarea>
      </div>
      <div class="panel-divider"></div>
      <!-- Speaker grille fills remaining space -->
      <div class="speaker-grille" id="speakerGrille"></div>
      <div class="panel-bottom-zone">
        <div class="util-btns-bottom" style="flex-direction:row;gap:6px">
          <button class="wood-btn" onclick="shareApp()" style="flex:1;min-width:0"><span>📤</span> Iesaki</button>
          <button class="wood-btn" onclick="pwaInstallNative()" style="flex:1;min-width:0"><span>📲</span> App</button>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- ČATA JOSLA — zem TV -->
<!-- INFO POPUP -->
<div class="info-popup-overlay" id="infoOverlay" onclick="if(event.target===this)toggleInfoPopup()">
  <div class="info-popup">
    <div class="info-popup-header">
      <span class="info-popup-title" id="infoTitle">LOM TV — INFO</span>
      <button class="info-popup-close" onclick="toggleInfoPopup()">✕</button>
    </div>
    <div class="info-popup-body" id="infoBody">
      <p><strong>LOM TV</strong> — Latvijas Online Mūzikas kanāls. Retro TV formātā baudi labāko latviešu un ārzemju mūziku — pārslēdz kanālus, sūti SMS un dalies ar draugiem.</p>
      <!-- Iesaki dziesmu — 1 rinda -->
      <div class="info-section-label">Iesaki dziesmu</div>
      <form id="infoSuggestForm" class="contact-form" onsubmit="submitInfoSuggestion(event)" style="flex-direction:row;gap:8px;align-items:center">
        <input type="text" name="suggestSong" placeholder="Izpildītājs — dziesma vai YouTube links" required class="contact-input" id="infoSuggestSong" style="flex:1">
        <button type="submit" class="contact-submit" id="infoSuggestBtn" style="white-space:nowrap;flex-shrink:0">IETEIKT</button>
      </form>
      <div class="contact-status" id="infoSuggestStatus"></div>
      <!-- Sazinies ar mums — kompakts -->
      <div class="info-section-label">Sazinies ar mums</div>
      <form id="contactForm" class="contact-form" onsubmit="submitContactForm(event)">
        <div class="contact-form-row">
          <input type="text" name="name" placeholder="Vārds" required class="contact-input">
          <input type="email" name="email" placeholder="E-pasts" required class="contact-input">
        </div>
        <textarea name="message" placeholder="Tava ziņa..." rows="2" required class="contact-input contact-textarea"></textarea>
        <button type="submit" class="contact-submit" id="contactSubmitBtn">NOSŪTĪT</button>
        <div class="contact-status" id="contactStatus"></div>
      </form>
      <span class="info-version">ver 2.0 — kopš 2003</span>
    </div>
  </div>
</div>

<script>
// ===== GOOGLE SHEETS CMS =====
// Tabulas formāts: YouTube ID | Izpildītājs | Dziesma | Albums | Gads | Garums (sek) | Era | Trim Start | Trim End | POP | ROKS | ŠLĀGERI | RETRO | ĀRZEMJU | 2020+ | HIPHOP | KONKURSI | LIVE | BĒRNI
// Publicē tabulu: File → Share → Publish to web → Sheet1 → CSV
// Ielīmē URL zemāk:
const SHEETS_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT22_gZFH84iXiOMqKCi_ozUAlvU7ovMAH6rvZfwjEV8Dwqkn4lhzZsL4zMwyLGbZe7hS8Mgdw82C3E/pub?gid=0&single=true&output=csv';

// Kanālu konfigurācija (secība, nosaukumi, krāsas)
// csvPrefix — kolonnas nosaukuma sākums, pēc kura meklē CSV headerī
const CHANNEL_CONFIG = [
  // 14 kanāli: 8 pēc stila + 1 ārzemju + 3 pēc gada + 1 spēle + 1 klasika
  {key:'POP',     name:'POP',     label:'Pop',              color:'#9b4dff',  icon:'🎵', csvPrefix:'POP'},
  {key:'ROKS',    name:'ROKS',    label:'Roks',             color:'#19d0e8',  icon:'🎸', csvPrefix:'SMAGAIS'},
  {key:'ŠLĀGERI', name:'ŠLĀGERI', label:'Šlāgeri',         color:'#ff4cd2',  icon:'🎶', csvPrefix:'ŠLĀGERIS'},
  {key:'RAP',     name:'RAP',     label:'Rap',              color:'#ff66ff',  icon:'🎤', csvPrefix:'HIPHOP'},
  {key:'JAZZ',    name:'JAZZ',    label:'Jazz',             color:'#f5a623',  icon:'🎷', csvPrefix:'JAZZ'},
  {key:'DANCE',   name:'DANCE',   label:'Dance',            color:'#00e5ff',  icon:'💃', csvPrefix:'DEJU'},
  {key:'LIVE',    name:'LIVE',    label:'Live & EV',        color:'#e53935',  icon:'🎬', csvPrefix:'LIVE'},
  {key:'BĒRNI',   name:'BĒRNI',   label:'Bērni',            color:'#ffdd57',  icon:'🧸', csvPrefix:'BĒRNU'},
  {key:'ĀRZ',     name:'ĀRZ',     label:'Ārzemju',          color:'#c0c0c0',  icon:'🌍', csvPrefix:'ĀRZEMJU'},
  // Gada kanāli (automātiski pēc gada)
  {key:'RETRO',   name:'RETRO',   label:'Retro',            color:'#35ed7e',  icon:'📻', csvPrefix:'RETRO'},   // līdz 1990
  {key:'ATMODA',  name:'ATMODA',  label:'Atmoda',           color:'#ff8a65',  icon:'🌅', csvPrefix:'_ATMODA'},  // 1991-2021
  {key:'JAUNUMI', name:'JAUNUMI', label:'Jaunumi',          color:'#7a2ed9',  icon:'🔥', csvPrefix:'JAUNUMI'},  // 2022+
  // Spēle + Klasika
  {key:'SPĒLE',   name:'SPĒLE',   label:'Spēle',            color:'#ff2975',  icon:'🎮', type:'game'},
  {key:'KLASIKA', name:'KLASIKA', label:'Klasika',           color:'#d4af37',  icon:'🎻', csvPrefix:'KLASIKA'}
];

// Fallback dati (izmanto, ja Google Sheets nav pieejams)
const FALLBACK_CHANNELS=[
  {name:'POP',label:'Pop',color:'#9b4dff',videos:[
    {id:'J-CmEbXH90M',title:'BrainStorm — Maybe',artist:'BrainStorm',song:'Maybe',decade:'modern',duration:205},
    {id:'p8FNO0DtBng',title:'Dons — Hollow',artist:'Dons',song:'Hollow',decade:'modern',duration:215}
  ]},
  {name:'ROKS',label:'Roks',color:'#19d0e8',videos:[
    {id:'lbeR6Tr_guI',title:'Jumprava — Vēlreiz',artist:'Jumprava',song:'Vēlreiz',decade:'vcr',duration:240}
  ]},
  {name:'RETRO',label:'Retro (līdz 1989)',color:'#35ed7e',videos:[
    {id:'jqUTbDiuN_M',title:'Čikāgas Piecīši — Pazudušais Dēls',artist:'Čikāgas Piecīši',song:'Pazudušais Dēls',decade:'vintage',duration:195}
  ]},
  {name:'ATMODA',label:'Atmoda (1990-2019)',color:'#ff8a65',videos:[
    {id:'LWLozvyMwhY',title:'BrainStorm — Feels',artist:'BrainStorm',song:'Feels',decade:'modern',duration:230}
  ]},
  {name:'JAUNUMI',label:'Jaunumi (2020+)',color:'#7a2ed9',videos:[
    {id:'Z0ZTfUM2-9w',title:'Arvis Reiks — Thinkin Bout You',artist:'Arvis Reiks',song:'Thinkin Bout You',decade:'modern',duration:200}
  ]},
  {name:'SPĒLE',label:'Spēle',color:'#ff2975',_isGame:true,videos:[
    {id:'_game_',title:'Synthwave Racer',artist:'LOM',song:'Game',duration:9999}
  ]}
];

// CSV parsēšana
function parseCSV(text){
  const lines=text.split('\n').filter(l=>l.trim());
  if(lines.length<2)return[];
  const headers=parseCSVLine(lines[0]).map(h=>h.trim());
  const rows=[];
  for(let i=1;i<lines.length;i++){
    const vals=parseCSVLine(lines[i]);
    const row={};
    headers.forEach((h,j)=>{row[h]=vals[j]?.trim()||''});
    rows.push(row);
  }
  return rows;
}
function parseCSVLine(line){
  const result=[];let current='';let inQuotes=false;
  for(let i=0;i<line.length;i++){
    const c=line[i];
    if(c==='"'){if(inQuotes&&line[i+1]==='"'){current+='"';i++}else{inQuotes=!inQuotes}}
    else if(c===','&&!inQuotes){result.push(current);current=''}
    else{current+=c}
  }
  result.push(current);
  return result;
}

// Sheets datu pārveidošana par channels masīvu
// CSV kolonnu nosaukumi ir gari ("POP, POP-ROKS, DISCO" utt.)
// Meklējam pēc prefiksa un arī piešķiram pēc gada (RETRO/ATMODA/JAUNUMI)
function findCSVColumn(headers,prefix){
  if(!prefix)return null; // game kanālam nav CSV prefiksa
  if(prefix.startsWith('_'))return null; // _ATMODA = nav CSV kolonna, aprēķina pēc gada
  return headers.find(h=>h.toUpperCase().startsWith(prefix.toUpperCase()))||null;
}
// Papildu CSV kolonnas kas mapējas uz mūsu kanāliem
const EXTRA_CSV_MAP=[
  // EV / Konkursi → LIVE
  {csvPrefix:'DZIESMU',     targetKey:'LIVE'},
  // Folk, Etno, Akadēmiskā → JAZZ
  {csvPrefix:'FOLK',        targetKey:'JAZZ'},
  {csvPrefix:'Akadēmiskā',  targetKey:'JAZZ'},
  // Regejs, Ska → ROKS
  {csvPrefix:'REGEJS',      targetKey:'ROKS'},
  // Electro, EDM, Latin → DANCE
  {csvPrefix:'ELECTRO',     targetKey:'DANCE'},
  {csvPrefix:'EDM',         targetKey:'DANCE'},
  {csvPrefix:'LATĪŅ',       targetKey:'DANCE'},
  // Blues, Ambient, Klasiskā → JAZZ
  {csvPrefix:'BLUES',       targetKey:'JAZZ'},
  {csvPrefix:'AMBIENT',     targetKey:'JAZZ'},
  {csvPrefix:'KLASISK',     targetKey:'JAZZ'},
];
function sheetsToChannels(rows){
  if(!rows||rows.length===0)return[];
  // Atrast visus CSV header nosaukumus
  const headers=Object.keys(rows[0]);
  // Izveidot mapping: kanāla key → CSV kolonnas nosaukums
  const colMap={};
  CHANNEL_CONFIG.forEach(cfg=>{
    const col=findCSVColumn(headers,cfg.csvPrefix);
    if(col)colMap[cfg.key]=col;
  });
  // Extra CSV kolonnas
  const extraCols=[];
  EXTRA_CSV_MAP.forEach(m=>{
    const col=headers.find(h=>h.toUpperCase().startsWith(m.csvPrefix.toUpperCase()));
    if(col)extraCols.push({col,targetKey:m.targetKey});
  });
  // Inicializēt kanālu map
  const channelMap={};
  CHANNEL_CONFIG.forEach(cfg=>{channelMap[cfg.key]={name:cfg.name,label:cfg.label,color:cfg.color,videos:[]}});
  // Apstrādāt katru rindu
  rows.forEach(row=>{
    const id=row['YouTube ID']||row['youtube_id']||'';
    if(!id)return;
    const artist=row['Izpildītājs']||row['artist']||'';
    const song=row['Dziesma']||row['song']||'';
    const album=row['Albums']||row['album']||'';
    const year=parseInt(row['Gads']||row['year'])||0;
    const duration=parseInt(row['Garums']||row['duration'])||240;
    const trimStart=parseInt(row['Trim Start']||row['trim_start'])||5;
    const trimEnd=parseInt(row['Trim End']||row['trim_end'])||10;
    // Era automātiski pēc gada: ≤1989=vintage, 1990-2000=vcr, 2001+=modern
    const era=year>0?(year<=1989?'vintage':year<=2000?'vcr':'modern'):'modern';
    const video={id,title:artist+' — '+song,artist,song,album,year,decade:era,duration,trimStart,trimEnd};
    const addedTo=new Set();
    // 1) Pārbaudīt tiešās CSV kolonnas (X atzīmes)
    CHANNEL_CONFIG.forEach(cfg=>{
      const col=colMap[cfg.key];
      if(!col)return;
      const val=(row[col]||'').trim().toUpperCase();
      if(val==='X'||val==='1'||val==='TRUE'){
        channelMap[cfg.key].videos.push(video);
        addedTo.add(cfg.key);
      }
    });
    // 2) Extra kolonnas (FOLK→JAZZ, REGEJS→ROKS, Akadēmiskā→JAZZ, ELECTRO→DANCE)
    extraCols.forEach(ec=>{
      const val=(row[ec.col]||'').trim().toUpperCase();
      if((val==='X'||val==='1'||val==='TRUE')&&!addedTo.has(ec.targetKey)){
        channelMap[ec.targetKey].videos.push(video);
        addedTo.add(ec.targetKey);
      }
    });
    // 3) Automātiski pēc gada: RETRO / ATMODA / JAUNUMI
    if(year>0){
      if(year<=1990&&!addedTo.has('RETRO')){channelMap['RETRO'].videos.push(video);addedTo.add('RETRO')}
      if(year>=1991&&year<=2021&&!addedTo.has('ATMODA')){channelMap['ATMODA'].videos.push(video);addedTo.add('ATMODA')}
      if(year>=2022&&!addedTo.has('JAUNUMI')){channelMap['JAUNUMI'].videos.push(video);addedTo.add('JAUNUMI')}
    }
  });
  // Filtrē tukšos kanālus (bet saglabā game kanālus)
  return CHANNEL_CONFIG.map((cfg,i)=>{
    const ch=channelMap[cfg.key];
    if(cfg.type==='game'){ch._isGame=true;ch.videos=[{id:'_game_',title:'Synthwave Racer',artist:'LOM',song:'Game',duration:9999}]}
    return ch;
  }).filter(ch=>ch.videos.length>0||ch._isGame);
}

// Ielādē datus no Google Sheets vai izmanto fallback
let channels=FALLBACK_CHANNELS;
let cmsLoaded=false;

async function loadFromSheets(){
  if(!SHEETS_CSV_URL)return false;
  try{
    const resp=await fetch(SHEETS_CSV_URL);
    if(!resp.ok)return false;
    const text=await resp.text();
    const rows=parseCSV(text);
    if(rows.length===0)return false;
    const parsed=sheetsToChannels(rows);
    if(parsed.length>0){channels=parsed;cmsLoaded=true;console.log('CMS: Ielādētas',rows.length,'dziesmas no Google Sheets');return true}
    return false;
  }catch(e){console.warn('CMS: Google Sheets nav pieejams, izmanto fallback',e);return false}
}

let currentChannel=0,currentVideoIdx={},isPoweredOn=true,player=null,playerReady=false,smsMessages=[],progressInterval=null,isMuted=false,currentVolume=80,volumeBeforeMute=80;
let lastMusicChannel=null; // Pēdējais mūzikas kanāls (ne spēle) — lai ieslēdzot atgriežas
// Dual-player crossfade sistēma
let playerA=null,playerB=null,playerAReady=false,playerBReady=false;
let activeSlot='a'; // 'a' vai 'b' — kurš player pašlaik ir aktīvs
let crossfading=false,crossfadeTimer=null;
const CROSSFADE_DURATION=5000; // 5 sek crossfade — jaunais aug, vecais izplēn
let preloadedVideoId=null; // video ID kas jau ir ielādēts otrajā slotā

// ═══ BROKEN VIDEO TRACKING & WATCHDOG ═══
const brokenVideoIds=new Set(); // Video ID kas nestrādā — izlaiž nākotnē
let watchdogTimer=null; // Watchdog — ja 12s video nesāk spēlēt, skip
let lastWatchdogVideoId=null; // Pēdējais video ID ko watchdog pārbauda
let skipChain=0; // Cik video pēc kārtas izlaisti — ja >5, apstājas (lai nebūtu infinite loop)
const MAX_SKIP_CHAIN=5; // Max pēc kārtas izlaistie pirms apstāšanās

function markBrokenVideo(videoId,reason){
  if(!videoId)return;
  brokenVideoIds.add(videoId);
  console.warn('⛔ Video atzīmēts kā broken:',videoId,reason||'');
}
function isVideoBroken(videoId){return brokenVideoIds.has(videoId)}

// Watchdog: pēc video ielādes sāk skaitīt 12s — ja PLAYING state nav sasniegts, skip
function startWatchdog(videoId){
  clearTimeout(watchdogTimer);
  lastWatchdogVideoId=videoId;
  watchdogTimer=setTimeout(()=>{
    if(!isPoweredOn||crossfading)return;
    // Pārbaudīt vai aktīvais player tiešām spēlē
    try{
      const ap=activeSlot==='a'?playerA:playerB;
      const state=ap.getPlayerState();
      // YT states: -1=unstarted, 0=ended, 1=playing, 2=paused, 3=buffering, 5=cued
      if(state===1)return; // Viss ok, spēlē
      // Ja nav PLAYING pēc 12s — broken
      console.warn('⏱ Watchdog: video',videoId,'nesāka spēlēt 12s laikā (state='+state+')');
      markBrokenVideo(videoId,'watchdog timeout state='+state);
      showColorBars('VIDEO NAV PIEEJAMS — MEKLĒ NĀKAMO…');
      if(skipChain<MAX_SKIP_CHAIN){skipChain++;setTimeout(()=>nextVideo(),500)}
      else{console.warn('⚠ Pārāk daudz skip pēc kārtas — apstājos');skipChain=0;showColorBars('KANĀLA KĻŪDA — PĀRSLĒDZ KANĀLU')}
    }catch(e){}
  },12000);
}
function clearWatchdog(){clearTimeout(watchdogTimer);lastWatchdogVideoId=null}

// ═══════════════════════════════════════
// PSEUDO-LIVE: Visi lietotāji dzird to pašu dziesmu vienlaicīgi
// ═══════════════════════════════════════
// Katram kanālam: efektīvais garums = duration - trimStart - trimEnd
// Unix timestamp % totalDuration → pozīcija playlistā → dziesma + seekTo
function getEffectiveDuration(v){return Math.max(30,(v.duration||240)-(v.trimStart||5)-(v.trimEnd||10))}
function getChannelTotalDuration(chIdx){
  return channels[chIdx].videos.reduce((sum,v)=>sum+getEffectiveDuration(v),0);
}
// Aprēķina kura dziesma skan un kurā sekundē — determinisms no timestamp
function getLivePosition(chIdx){
  const vids=channels[chIdx].videos;
  if(!vids||vids.length===0)return{videoIdx:0,seekTo:0};
  const total=getChannelTotalDuration(chIdx);
  const now=Math.floor(Date.now()/1000);
  let pos=now%total;
  for(let i=0;i<vids.length;i++){
    const eDur=getEffectiveDuration(vids[i]);
    if(pos<eDur)return{videoIdx:i,seekTo:pos+(vids[i].trimStart||5)};
    pos-=eDur;
  }
  return{videoIdx:0,seekTo:vids[0].trimStart||5};
}
// Inicializē visus kanālus uz pseudo-live pozīciju
function syncAllChannels(){
  channels.forEach((ch,i)=>{
    const live=getLivePosition(i);
    currentVideoIdx[i]=live.videoIdx;
  });
}
syncAllChannels();

// Dinamiski ģenerēt kanālu pogas no CHANNEL_CONFIG
function buildChannelGrid(){
  const grid=document.getElementById('channelGrid');
  grid.innerHTML='';
  channels.forEach((ch,i)=>{
    if(isGameChannel(i))return; // Spēle ir atsevišķā pogā augšā, ne gridā
    // Atrast atbilstošo CHANNEL_CONFIG ierakstu
    const cfg=CHANNEL_CONFIG.find(c=>c.name===ch.name)||{icon:'📺',name:ch.name};
    const active=i===0?' active':'';
    grid.innerHTML+=`<button class="ch-btn${active}" data-ch="${i}"><div class="ch-flipdisc"><div class="ch-face ch-face-front"><span class="ch-icon">${cfg.icon}</span><span class="ch-name">${ch.name}</span></div><div class="ch-face ch-face-back"><span class="ch-icon">${cfg.icon}</span><span class="ch-name">${ch.name}</span></div></div></button>`;
  });
}
buildChannelGrid();

function launchTV(){startTV()}
function startTV(){
  if(startTV._started)return;startTV._started=true;
  const ss=document.getElementById('startScreen');
  ss.classList.add('fade-out');
  setTimeout(()=>{
    ss.classList.add('hidden');
    document.getElementById('app').style.display='block';
    const ledM=document.getElementById('ledMarqueeWrap');if(ledM)ledM.classList.add('on');
    isPoweredOn=true;
    document.getElementById('powerToggleInput').checked=true;
    document.getElementById('ledPower').classList.remove('off');
    document.querySelectorAll('.indicator-bar').forEach(b=>b.classList.add('active'));
    // Uzreiz sāk atskaņot — bez kalibrācijas joslām
    initYTPlayer();try{initSMS()}catch(e){setTimeout(initSMS,1500)};startProgressTracker();
    // VHS OSD — laika atjaunošana katru sekundi
    setInterval(()=>{const osd=document.getElementById('vhsOsdTime');if(osd&&isPoweredOn){const now=new Date();osd.textContent=now.toLocaleTimeString('lv-LV',{hour:'2-digit',minute:'2-digit',second:'2-digit'})}},1000);
  },600);
}
// Ielādē CMS datus sākuma ekrāna laikā, tad startē TV
loadFromSheets().then(loaded=>{
  if(loaded){
    syncAllChannels();
    buildChannelGrid();
  }
});
// TV startē tikai ar pogu klikšķi (nodrošina autoplay ar skaņu)

function initYTPlayer(){const tag=document.createElement('script');tag.src='https://www.youtube.com/iframe_api';document.head.appendChild(tag)}
const YT_VARS={autoplay:1,controls:0,disablekb:1,fs:0,modestbranding:1,rel:0,showinfo:0,iv_load_policy:3,cc_load_policy:0,playsinline:1,origin:location.origin};
function setupSlot(p,slot){
  try{p.getIframe().classList.add('yt-ready')}catch(ex){}
  try{p.loadModule('captions');p.unloadModule('captions')}catch(ex){}
}
window.onYouTubeIframeAPIReady=function(){
  // Pseudo-live: aprēķina kur šobrīd ir kanāls
  const live=getLivePosition(currentChannel);
  currentVideoIdx[currentChannel]=live.videoIdx;
  const v=channels[currentChannel].videos[live.videoIdx];
  const trimE=v.trimEnd||10,dur=v.duration||0;
  // Slot A — pirmais aktīvais player, seekTo uz live pozīciju
  playerA=new YT.Player('yt-slot-a',{
    videoId:v.id,
    playerVars:{...YT_VARS,start:live.seekTo,end:dur>trimE?dur-trimE:undefined},
    events:{
      onReady:(e)=>{playerAReady=true;playerReady=true;player=playerA;activeSlot='a';
        e.target.playVideo();updateNowPlaying();setVolume(80);setupSlot(playerA,'a');
      },
      onStateChange:(e)=>{
        if(activeSlot==='a'){
          if(e.data===YT.PlayerState.ENDED&&!crossfading)nextVideo();
          if(e.data===YT.PlayerState.PLAYING){skipChain=0;clearWatchdog();hideColorBars();document.getElementById('ledPower').classList.remove('off');try{playerA.unloadModule('captions')}catch(ex){}}
          if(e.data===YT.PlayerState.PAUSED&&isPoweredOn&&!crossfading){setTimeout(()=>{try{playerA.playVideo()}catch(ex){}},1500)}
        }
      },
      onError:(e)=>{
        console.warn('YT Player A kļūda:',e.data,'— skip uz nākamo');
        clearWatchdog();showColorBars('VIDEO NAV PIEEJAMS — MEKLĒ NĀKAMO…');
        try{const vid=channels[currentChannel].videos[currentVideoIdx[currentChannel]];if(vid)markBrokenVideo(vid.id,'YT error '+e.data)}catch(ex){}
        if(activeSlot==='a'&&!crossfading){if(skipChain<MAX_SKIP_CHAIN){skipChain++;setTimeout(()=>nextVideo(),800)}else{skipChain=0;console.warn('⚠ Pārāk daudz kļūdu pēc kārtas')}}
      }
    }
  });
  // Slot B — otrs player priekš crossfade
  playerB=new YT.Player('yt-slot-b',{
    playerVars:{...YT_VARS},
    events:{
      onReady:(e)=>{playerBReady=true;setupSlot(playerB,'b')},
      onStateChange:(e)=>{
        if(activeSlot==='b'){
          if(e.data===YT.PlayerState.ENDED&&!crossfading)nextVideo();
          if(e.data===YT.PlayerState.PLAYING){skipChain=0;clearWatchdog();hideColorBars();document.getElementById('ledPower').classList.remove('off');try{playerB.unloadModule('captions')}catch(ex){}}
          if(e.data===YT.PlayerState.PAUSED&&isPoweredOn&&!crossfading){setTimeout(()=>{try{playerB.playVideo()}catch(ex){}},1500)}
        }
      },
      onError:(e)=>{
        console.warn('YT Player B kļūda:',e.data,'— skip uz nākamo');
        clearWatchdog();showColorBars('VIDEO NAV PIEEJAMS — MEKLĒ NĀKAMO…');
        try{const vid=channels[currentChannel].videos[currentVideoIdx[currentChannel]];if(vid)markBrokenVideo(vid.id,'YT error '+e.data)}catch(ex){}
        if(activeSlot==='b'&&!crossfading){if(skipChain<MAX_SKIP_CHAIN){skipChain++;setTimeout(()=>nextVideo(),800)}else{skipChain=0;console.warn('⚠ Pārāk daudz kļūdu pēc kārtas')}}
      }
    }
  });
};

// Preload nākamo dziesmu otrajā playerī (muted)
function preloadNext(){
  if(crossfading)return;
  const nextV=getNextVideoInfo();
  if(!nextV||preloadedVideoId===nextV.id)return;
  const nextSlot=activeSlot==='a'?'b':'a';
  const nextPlayer=nextSlot==='a'?playerA:playerB;
  const nextReady=nextSlot==='a'?playerAReady:playerBReady;
  if(!nextPlayer||!nextReady)return;
  const trimS=nextV.trimStart||5,trimE=nextV.trimEnd||10,dur=nextV.duration||0;
  const opts={videoId:nextV.id,startSeconds:trimS};
  if(dur>trimE)opts.endSeconds=dur-trimE;
  try{
    nextPlayer.mute();
    nextPlayer.setVolume(0);
    nextPlayer.loadVideoById(opts);
    preloadedVideoId=nextV.id;
    console.log('Preload:',nextV.title);
  }catch(e){}
}
function crossfadeTo(v){
  if(!playerReady)return;
  if(crossfading)return;
  // Saglabā pašreizējo dziesmu kā "iepriekšējo" pirms pārslēgšanas
  try{previousVideo=channels[currentChannel].videos[currentVideoIdx[currentChannel]]}catch(e){previousVideo=null}
  crossfading=true;
  const trimS=v.trimStart||5,trimE=v.trimEnd||10,dur=v.duration||0;
  const opts={videoId:v.id,startSeconds:trimS};
  if(dur>trimE)opts.endSeconds=dur-trimE;
  // Kurš ir nākamais slots?
  const nextSlot=activeSlot==='a'?'b':'a';
  const nextPlayer=nextSlot==='a'?playerA:playerB;
  const currPlayer=activeSlot==='a'?playerA:playerB;
  const nextEl=document.getElementById('yt-slot-'+nextSlot);
  const currEl=document.getElementById('yt-slot-'+activeSlot);
  const dimOv=document.getElementById('tvDimOverlay');
  // Ja video jau ir preloaded — nav jāielādē no jauna, tikai seeko uz sākumu
  if(preloadedVideoId===v.id){
    try{nextPlayer.seekTo(trimS,true)}catch(e){}
  }else{
    nextPlayer.loadVideoById(opts);
  }
  preloadedVideoId=null;
  nextPlayer.setVolume(0);
  nextPlayer.unMute();
  // Jaunais klips UZREIZ redzams, vecais paslēpts + noņem dimming
  nextEl.classList.remove('yt-hidden');
  currEl.classList.add('yt-hidden');
  if(dimOv)dimOv.classList.remove('dimming');
  // Volume crossfade: vecais fade out, jaunais fade in pa CROSSFADE_DURATION (5s)
  const steps=25,interval=CROSSFADE_DURATION/steps;
  let step=0;
  const vol=isMuted?0:currentVolume;
  let currVol=vol;
  try{currVol=currPlayer.getVolume()||vol}catch(e){}
  clearInterval(crossfadeTimer);
  crossfadeTimer=setInterval(()=>{
    step++;
    const pct=step/steps;
    // Vecais klips — fade out (vēl skan kādu brīdi bet kļūst arvien klusāks)
    const fadeOutVol=Math.round(currVol*Math.cos(pct*Math.PI/2));
    // Jaunais klips — fade in (sāk klusām, aug līdz pilnai skaņai)
    const fadeInVol=Math.round(vol*Math.sin(pct*Math.PI/2));
    try{currPlayer.setVolume(fadeOutVol)}catch(e){}
    try{nextPlayer.setVolume(fadeInVol)}catch(e){}
    if(step>=steps){
      clearInterval(crossfadeTimer);
      try{currPlayer.pauseVideo()}catch(e){}
      activeSlot=nextSlot;
      player=nextPlayer;
      crossfading=false;
      try{nextPlayer.setVolume(vol)}catch(e){}
    }
  },interval);
  updateNowPlaying();resetOverlayPhases();
  startWatchdog(v.id); // Watchdog: ja 12s nesāk spēlēt — auto-skip
  // Pēc crossfade: rāda "TAGAD SKAN" ar jauno dziesmu ~12s (aizkave 13s no crossfade sākuma)
  const t1=setTimeout(()=>{
    showOverlay('now',v,12); // 12s un pazūd
    ovPhasesDone.now=true;
    try{if(window._ttsPlayPending)window._ttsPlayPending()}catch(e){}
  },13000);
  ovTimers.push(t1);
}
function playVideo(v){crossfadeTo(v)}
function playVideoLive(v,seekTo){
  // Bez crossfade, ar seekTo uz pseudo-live pozīciju
  if(!playerReady)return;
  crossfading=false;clearInterval(crossfadeTimer);preloadedVideoId=null;
  const trimE=v.trimEnd||10,dur=v.duration||0;
  const opts={videoId:v.id,startSeconds:seekTo};
  if(dur>trimE)opts.endSeconds=dur-trimE;
  const currPlayer=activeSlot==='a'?playerA:playerB;
  currPlayer.loadVideoById(opts);
  const vol=isMuted?0:currentVolume;
  try{currPlayer.setVolume(vol)}catch(e){}
  updateNowPlaying();resetOverlayPhases();
  startWatchdog(v.id);
}
function playVideoHard(v){
  // Bez crossfade — tūlītēja pārslēgšana (kanāla maiņa ar static)
  if(!playerReady)return;
  crossfading=false;clearInterval(crossfadeTimer);preloadedVideoId=null;
  const trimS=v.trimStart||5,trimE=v.trimEnd||10,dur=v.duration||0;
  const opts={videoId:v.id,startSeconds:trimS};
  if(dur>trimE)opts.endSeconds=dur-trimE;
  const currPlayer=activeSlot==='a'?playerA:playerB;
  currPlayer.loadVideoById(opts);
  const vol=isMuted?0:currentVolume;
  try{currPlayer.setVolume(vol)}catch(e){}
  updateNowPlaying();resetOverlayPhases();
  startWatchdog(v.id);
}
function getCurrentVideo(){return channels[currentChannel].videos[currentVideoIdx[currentChannel]]}
function nextVideo(){
  const ch=currentChannel;
  const total=channels[ch].videos.length;
  // Meklē nākamo strādājošo video (izlaiž broken)
  let tried=0;
  do{
    currentVideoIdx[ch]=(currentVideoIdx[ch]+1)%total;
    tried++;
    if(!isVideoBroken(channels[ch].videos[currentVideoIdx[ch]].id))break;
    console.log('⏭ Izlaižu broken video:',channels[ch].videos[currentVideoIdx[ch]].title);
  }while(tried<total);
  if(tried>=total){console.warn('⚠ Visi video šajā kanālā ir broken!');skipChain=0;return}
  crossfadeTo(channels[ch].videos[currentVideoIdx[ch]]);
}
function prevVideo(){
  // Prev nav pseudo-live — vienkārši iepriekšējā dziesma
  const ch=currentChannel;
  currentVideoIdx[ch]=(currentVideoIdx[ch]-1+channels[ch].videos.length)%channels[ch].videos.length;
  const v=channels[ch].videos[currentVideoIdx[ch]];
  crossfadeTo(v);
}
function getNextVideoInfo(){
  const ch=currentChannel,nextIdx=(currentVideoIdx[ch]+1)%channels[ch].videos.length;
  return channels[ch].videos[nextIdx];
}
function parseVideoMeta(v){
  // Parse "Artist — Title" format, or just use title
  const parts=v.title.split(' — ');
  if(parts.length>=2)return{artist:parts[0].trim(),title:parts.slice(1).join(' — ').trim()};
  const parts2=v.title.split(' - ');
  if(parts2.length>=2)return{artist:parts2[0].trim(),title:parts2.slice(1).join(' - ').trim()};
  return{artist:'',title:v.title};
}
// TV Overlay — 4 phase system with previous video tracking
let ovTimers=[];let ovPhasesDone={now:false,next:false,just:false,xfade:false,newNow:false};
let previousVideo=null;
function resetOverlayPhases(){ovPhasesDone={now:false,next:false,just:false,xfade:false,newNow:false};ovTimers.forEach(t=>clearTimeout(t));ovTimers=[];hideOverlay();const dim=document.getElementById('tvDimOverlay');if(dim)dim.classList.remove('dimming')}
function showOverlay(phase,videoData,duration){
  const ov=document.getElementById('tvOverlay');
  const meta=parseVideoMeta(videoData);
  ov.className='tv-overlay phase-'+phase;
  document.getElementById('tvOvLabel').textContent=phase==='now'?'TAGAD SKAN':'NĀKAMAIS';
  document.getElementById('tvOvTitle').textContent=meta.title;
  document.getElementById('tvOvArtist').textContent=meta.artist;
  document.getElementById('tvOvMeta').textContent='';
  // Show
  requestAnimationFrame(()=>{ov.classList.add('show')});
  // Auto-hide
  if(duration>0){const t=setTimeout(()=>{ov.classList.remove('show')},duration*1000);ovTimers.push(t)}
}
function hideOverlay(){const ov=document.getElementById('tvOverlay');if(ov)ov.classList.remove('show')}
function updateNowPlaying(){
  const ch=channels[currentChannel],v=ch.videos[currentVideoIdx[currentChannel]];
  const npt=document.getElementById('npText'),npc=document.getElementById('npCh');
  if(npt)npt.textContent=v.title;
  if(npc){npc.textContent='KAN '+(currentChannel+1)+' \u2014 '+ch.name;npc.style.color=ch.color}
  applyEraEffect(v.decade||'modern');
}
function applyEraEffect(decade){
  const s=document.getElementById('tvScreen');
  s.classList.remove('era-vintage','era-vcr','era-modern');
  s.classList.add(decade==='vintage'?'era-vintage':decade==='vcr'?'era-vcr':'era-modern');
}
function startProgressTracker(){
  if(progressInterval)clearInterval(progressInterval);
  progressInterval=setInterval(()=>{
    if(!playerReady||!isPoweredOn)return;
    if(isGameChannel(currentChannel))return; // Spēlei nav progress tracking
    try{
      const ap=activeSlot==='a'?playerA:playerB;
      const d=ap.getDuration(),c=ap.getCurrentTime();
      if(d<=0)return;
      const v=channels[currentChannel].videos[currentVideoIdx[currentChannel]];
      const trimE=v.trimEnd||10;
      const effectiveEnd=d>trimE?d-trimE:d; // endSeconds — kur playeris apstāsies
      const remaining=effectiveEnd-c; // Laiks līdz efektīvajām beigām
      const p=(c/effectiveEnd)*100+'%';document.getElementById('npProgressFill').style.width=p;
      const dimOv=document.getElementById('tvDimOverlay');
      // TAGAD SKAN — backup: ja crossfade taimeris nebija parādījis
      if(c>=40&&c<60&&!ovPhasesDone.now){ovPhasesDone.now=true;showOverlay('now',v,10)}
      // NĀKAMAIS — 40 sek. pirms beigām + preload
      if(remaining<=40&&remaining>25&&!ovPhasesDone.next){ovPhasesDone.next=true;showOverlay('next',getNextVideoInfo(),8);preloadNext()}
      // ═══ JAUNA CROSSFADE MEHĀNIKA: 20s → 15s → 10s ═══
      // 20s pirms beigām: Ekrāns sāk aptumšoties + volume lēnām samazinās
      if(remaining<=20&&remaining>15&&!crossfading&&!isMuted){
        if(dimOv&&!dimOv.classList.contains('dimming'))dimOv.classList.add('dimming');
        const fadeProgress=(remaining-15)/5; // 1.0 pie 20s → 0.0 pie 15s
        const fadeVol=Math.round(currentVolume*(0.4+0.6*fadeProgress));
        try{ap.setVolume(fadeVol)}catch(e){}
      }
      // 15s pirms beigām: Jaunais klips parādās — crossfade sākas
      // Jaunais redzams un sāk skanēt klusām, vecais vēl skan bet paslēpts
      if(remaining<=15&&remaining>10&&!ovPhasesDone.xfade&&!crossfading){ovPhasesDone.xfade=true;nextVideo()}
      // 10s pirms beigām: No vecā nekas nav palicis (crossfadeTo jau pabeidza fade)
    }catch(e){}
  },500);
}
document.getElementById('channelGrid').addEventListener('click',(e)=>{
  const btn=e.target.closest('.ch-btn');if(!btn||!isPoweredOn)return;
  const ch=parseInt(btn.dataset.ch);if(ch===currentChannel)return;switchChannel(ch);
});
function isGameChannel(ch){
  const c=channels[ch];if(!c)return false;
  return c._isGame||CHANNEL_CONFIG.find(cfg=>cfg.key===c.name&&cfg.type==='game');
}
function switchChannel(ch){
  if(ch<0||ch>=channels.length)return;
  hideColorBars();clearWatchdog();skipChain=0; // Reset error state
  resetOverlayPhases(); // Notīra TAGAD SKAN / TIKKO SKANĒJA overlay + taimerus (lai nepaliek no iepriekšējā kanāla)
  // Ja iepriekšējais bija spēle — apstādināt
  if(isGameChannel(currentChannel)){stopGame()}
  currentChannel=ch;
  if(!isGameChannel(ch))lastMusicChannel=ch; // Atceries pēdējo mūzikas kanālu
  document.querySelectorAll('#channelGrid .ch-btn').forEach(b=>b.classList.toggle('active',parseInt(b.dataset.ch)===ch));
  const ov=document.getElementById('chOverlay');ov.textContent='KAN '+(ch+1);ov.classList.add('show');setTimeout(()=>ov.classList.remove('show'),1500);
  // VHS OSD — atjaunināt kanāla nosaukumu
  const osdCh=document.getElementById('vhsOsdCh');if(osdCh)osdCh.textContent='▶ '+channels[ch].name;
  if(isGameChannel(ch)){
    // Spēles kanāls — YouTube NEpauzē (lofi skanēs caur to)
    showStatic(()=>{startGame()});
    return;
  }
  // Parastais YouTube kanāls
  const live=getLivePosition(ch);
  currentVideoIdx[ch]=live.videoIdx;
  showStatic(()=>{
    const v=channels[ch].videos[live.videoIdx];
    playVideoLive(v,live.seekTo);
  });
}
function changeChannel(dir){
  // Izlaižam game/CHILL kanālus — tikai mūzikas kanāli riņķī
  let n=currentChannel;
  const total=channels.length;
  for(let i=0;i<total;i++){
    n+=dir;
    if(n<0)n=total-1;
    if(n>=total)n=0;
    if(!isGameChannel(n)){switchChannel(n);return}
  }
}
// Color Bars — parādās kad video nav pieejams (error/broken)
function showColorBars(msg){
  const el=document.getElementById('tvColorBars'),txt=document.getElementById('barsText');
  if(!el)return;
  if(txt)txt.textContent=msg||'MEKLĒ NĀKAMO DZIESMU…';
  el.classList.add('show');
}
function hideColorBars(){
  const el=document.getElementById('tvColorBars');
  if(el)el.classList.remove('show');
}
function showStatic(cb){
  const el=document.getElementById('staticNoise'),canvas=document.getElementById('noiseCanvas'),ctx=canvas.getContext('2d');
  el.classList.add('show');canvas.width=400;canvas.height=300;let f=0;
  function draw(){const img=ctx.createImageData(canvas.width,canvas.height);for(let i=0;i<img.data.length;i+=4){const v=Math.random()*255;img.data[i]=v;img.data[i+1]=v;img.data[i+2]=v;img.data[i+3]=255}ctx.putImageData(img,0,0);f++;if(f<14)requestAnimationFrame(draw);else{el.classList.remove('show');if(cb)cb()}}
  draw();
}
function togglePower(){
  const tog=document.getElementById('powerToggleInput'),off=document.getElementById('powerOff'),led=document.getElementById('ledPower'),bars=document.querySelectorAll('.indicator-bar');
  const vhsOsd=document.getElementById('vhsOsd');
  if(isPoweredOn){
    isPoweredOn=false;tog.checked=false;led.classList.add('off');
    if(typeof stopGame==='function'){try{stopGame()}catch(e){}}
    try{if(playerAReady)playerA.pauseVideo()}catch(e){}
    try{if(playerBReady)playerB.pauseVideo()}catch(e){}
    off.classList.add('show');const d=off.querySelector('.power-dot');d.style.animation='none';d.offsetHeight;d.style.animation='';bars.forEach((b,i)=>{if(i<3)b.classList.add('active');else b.classList.remove('active')});
    if(vhsOsd)vhsOsd.style.display='none';
    const ledMq=document.getElementById('ledMarqueeWrap');if(ledMq)ledMq.classList.remove('on');
    setChatEnabled(false);
  }
  else{
    isPoweredOn=true;tog.checked=true;led.classList.remove('off');off.classList.remove('show');bars.forEach(b=>b.classList.add('active'));
    if(vhsOsd)vhsOsd.style.display='';
    const ledMq=document.getElementById('ledMarqueeWrap');if(ledMq)ledMq.classList.add('on');
    setChatEnabled(true);
    // Ja bija uz spēles vai tikko ienāca — random mūzikas kanāls (ne spēle)
    if(isGameChannel(currentChannel)||!lastMusicChannel){
      const musicChannels=channels.map((_,i)=>i).filter(i=>!isGameChannel(i));
      const rndCh=musicChannels[Math.floor(Math.random()*musicChannels.length)]||0;
      switchChannel(rndCh);
    } else {
      // Atgriežas uz to pašu kanālu kur bija
      showStatic(()=>{
        const ap=activeSlot==='a'?playerA:playerB;
        if(playerReady&&ap)ap.playVideo();
      });
    }
  }
}
document.getElementById('powerToggleInput').addEventListener('change',function(){
  if(this.checked!==isPoweredOn)togglePower();
});
// SPĒLE poga — atsevišķā panelī augšā
document.getElementById('gamePanelBtn').addEventListener('click',function(){
  if(!isPoweredOn)return;
  // Atrast spēles kanāla indeksu
  const gameIdx=channels.findIndex((_,i)=>isGameChannel(i));
  if(gameIdx<0)return;
  if(currentChannel===gameIdx){
    // Ja jau uz spēles — atgriežamies uz pēdējo mūzikas kanālu
    switchChannel(lastMusicChannel||0);
    this.classList.remove('active');
  }else{
    switchChannel(gameIdx);
    this.classList.add('active');
  }
});
function toggleMute(){
  const btn=document.getElementById('muteBtn');
  if(isMuted){isMuted=false;btn.classList.remove('active');setVolume(volumeBeforeMute);showMuteOSD(false)}
  else{volumeBeforeMute=currentVolume;isMuted=true;btn.classList.add('active');setVolume(0);showMuteOSD(true)}
  if(typeof gameAudio!=='undefined'&&gameAudio){gameAudio.muted=isMuted}
}
function toggleFullscreen(){
  const ledMq=document.getElementById('ledMarqueeWrap');
  if(!document.fullscreenElement){
    document.documentElement.requestFullscreen().catch(()=>{});
    document.getElementById('fullscreenBtn').classList.add('active');
    document.querySelector('.tv-casing').classList.add('fs-mode');
    if(ledMq)ledMq.classList.remove('on'); // Slēpt marquee fullscreenā
  }
  else{
    document.exitFullscreen().catch(()=>{});
    document.getElementById('fullscreenBtn').classList.remove('active');
    document.querySelector('.tv-casing').classList.remove('fs-mode');
    if(ledMq&&isPoweredOn)ledMq.classList.add('on');
  }
}
document.addEventListener('fullscreenchange',()=>{
  if(!document.fullscreenElement){
    document.getElementById('fullscreenBtn').classList.remove('active');
    document.querySelector('.tv-casing').classList.remove('fs-mode');
    const ledMq=document.getElementById('ledMarqueeWrap');if(ledMq&&isPoweredOn)ledMq.classList.add('on');
  }
});
let volOsdTimer=null,muteOsdTimer=null;
function showVolOSD(val){
  const osd=document.getElementById('volOsd');
  const blocks=document.getElementById('volOsdBlocks');
  const dashes=document.getElementById('volOsdDashes');
  const valEl=document.getElementById('volOsdValue');
  if(!osd)return;
  // Build blocks + dashes
  const totalSegs=15;const filledSegs=Math.round(val/100*totalSegs);
  let bHTML='',dHTML='';
  for(let i=0;i<filledSegs;i++){const h=10+Math.round(i/totalSegs*18);bHTML+='<div class="vol-osd-block" style="height:'+h+'px"></div>'}
  for(let i=filledSegs;i<totalSegs;i++){dHTML+='<div class="vol-osd-dash"></div>'}
  blocks.innerHTML=bHTML;dashes.innerHTML=dHTML;
  valEl.textContent=val;
  osd.classList.add('show');
  clearTimeout(volOsdTimer);
  volOsdTimer=setTimeout(()=>osd.classList.remove('show'),1800);
}
function showMuteOSD(show){
  const osd=document.getElementById('muteOsd');if(!osd)return;
  clearTimeout(muteOsdTimer);muteOsdTimer=null;
  if(show){osd.classList.add('show')}
  else{osd.classList.remove('show')}
}
function setVolume(val){
  const prevVolume=currentVolume;
  if(val<0)val=0;if(val>100)val=100;
  currentVolume=val;
  const muteBtn=document.getElementById('muteBtn');
  if(val===0&&!isMuted){volumeBeforeMute=prevVolume||volumeBeforeMute;isMuted=true;if(muteBtn)muteBtn.classList.add('active');showMuteOSD(true)}
  else if(val>0&&isMuted){isMuted=false;if(muteBtn)muteBtn.classList.remove('active');showMuteOSD(false);volumeBeforeMute=val}
  if(playerReady)try{
    const ap=activeSlot==='a'?playerA:playerB;
    if(val===0){ap.mute()}else{ap.unMute();ap.setVolume(val)}
  }catch(e){}
  // Sync game audio volume
  if(typeof gameAudio!=='undefined'&&gameAudio){gameAudio.volume=val/100;gameAudio.muted=(val===0)}
  // sync circular knob
  const pct2=val/100;
  const arc=document.querySelector('.vc-arc'),glow=document.querySelector('.vc-glow');
  if(arc){arc.style.setProperty('--vc-pct',pct2);arc.style.strokeDasharray=(pct2*220)+' 220'}
  if(glow){glow.style.strokeDasharray=(pct2*220)+' 220'}
  const vcv=document.getElementById('vcVal');if(vcv)vcv.textContent=val;
  const vcd=document.getElementById('vcDot');if(vcd)vcd.style.rotate='calc(('+(pct2*252-126)+')*1deg)';
  const vci=document.getElementById('vcInput');if(vci&&parseInt(vci.value)!==val)vci.value=val;
  // Show volume OSD on screen
  showVolOSD(val);
}
function changeVolume(delta){
  if(isMuted&&delta>0){
    isMuted=false;
    const btn=document.getElementById('muteBtn');if(btn)btn.classList.remove('active');
    showMuteOSD(false);
    setVolume(volumeBeforeMute);
  }
  else{setVolume(currentVolume+delta)}
}
document.getElementById('vcInput').addEventListener('input',function(){
  const v=parseInt(this.value);
  setVolume(v);
});
// Initial volume set (will be applied on startTV)
setTimeout(()=>{setVolume(80)},400);
// SMS/Chat sistēma — viltotās ziņas pa 1/min, īstās uzreiz
var fakeSMS=[
  {name:'Jānis',text:'Sveiki visiem no Liepājas'},
  {name:'Kristīne',text:'Vai kāds atceras šo dziesmu'},
  {name:'Andris',text:'Palieliniet skaļumu'},
  {name:'Māra',text:'Kas par aukstu laiku šovakar'},
  {name:'Pēteris',text:'The Hobos bija brutāli'},
  {name:'Ilze',text:'Kur var nopirkt šo albumu'},
  {name:'Gatis',text:'Atceros šo dziesmu no bērnības'},
  {name:'Laura',text:'Piekrītu kur aizlīdām'},
  {name:'Roberts',text:'Pārslēdziet uz ROKS kanālu'},
  {name:'Inga',text:'Labvakar visiem'},
  {name:'Mārtiņš',text:'Vai te kāds ir no Ventspils'},
  {name:'Diāna',text:'Iesakiet labas dziesmas'},
  {name:'Edgars',text:'Prāta Vētra rulē'},
  {name:'Zane',text:'Sveiciens no Valmieras'},
  {name:'Aivars',text:'Agrāk TV bija labāks'},
  {name:'Elīna',text:'Kāds dzird no Jelgavas'},
  {name:'Kārlis',text:'Gribu vēl tādas dziesmas'},
  {name:'Dace',text:'Labākais kanāls šobrīd'},
  {name:'Raimonds',text:'Lūdzu vairāk retro'},
  {name:'Santa',text:'Kas ir šīs dziesmas autors'},
  {name:'Jēkabs',text:'Dzirdu pirmo reizi forši'},
  {name:'Agnese',text:'Šī bija mūsu izlaiduma dziesma'},
  {name:'Toms',text:'Vakar arī klausījos te'},
  {name:'Līga',text:'Mana mīļākā dziesma'},
  {name:'Oskars',text:'Šeit vienmēr laba mūzika'}
];
// Bad-words filtrs — ielādē no localStorage vai tukšs
let BAD_WORDS=[];
try{const bw=localStorage.getItem('lom_badwords');if(bw)BAD_WORDS=JSON.parse(bw)}catch(e){}
function filterBadWords(text){
  let c=text;
  BAD_WORDS.forEach(w=>{if(w.length<2)return;const re=new RegExp(w.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),'gi');c=c.replace(re,'\u2605'.repeat(Math.min(w.length,5)))});
  return c;
}
// Sanitizācija — tikai plain teksts, nekādu URL/email/kodu
function sanitizeChat(text){
  let s=text.replace(/<[^>]*>/g,''); // noņem HTML tagus
  s=s.replace(/https?:\/\/\S+/gi,''); // noņem URL ar http
  s=s.replace(/www\.\S+/gi,''); // noņem www.
  s=s.replace(/\S+\.(com|lv|org|net|io|eu|ru|de|uk|info|biz|me)\b/gi,''); // noņem domēnus
  s=s.replace(/\S+@\S+\.\S+/gi,''); // noņem email
  s=s.replace(/(\+?\d[\d\s\-]{6,})/g,''); // noņem tālruņu numurus (7+ cipari)
  s=s.replace(/[{}\[\]<>\\\/`]/g,''); // noņem koda simbolus
  s=s.replace(/\s+/g,' ').trim();
  return filterBadWords(s);
}
// smsMessages jau deklarēts augstāk (globālajā let blokā)
var smsTickerInterval=null;
var smsFakeIdx=0;
var smsStartTime=0;

// ═══ LIVE VIEWERS COUNTER ═══
// Simulē skatītāju skaitu: dienas laikā augstāk (~160-200), naktī zemāk (~100-130)
function getLiveViewerBase(){
  const h=new Date().getHours();
  // Diena (10-22): augstāks, nakts (23-9): zemāks
  if(h>=10&&h<14)return 165; // Pusdienlaiks
  if(h>=14&&h<18)return 145; // Pēcpusdiena
  if(h>=18&&h<22)return 185; // Pīķis vakarā
  if(h>=22||h<2)return 130;  // Vēls vakars
  return 108; // Nakts
}
function updateLiveCount(){
  const el=document.getElementById('tvLiveCount');if(!el)return;
  const base=getLiveViewerBase();
  const jitter=Math.floor(Math.random()*21)-10; // ±10
  el.textContent=Math.max(80,base+jitter);
}
updateLiveCount();
setInterval(updateLiveCount,7000+Math.random()*6000); // Ik 7-13 sek

// ═══ REPORT + IETEIKUMU SISTĒMA ═══
// Google Sheets Apps Script Web App URL — nomainīt uz savu!
const SHEETS_SUBMIT_URL=''; // TODO: ielīmē savu Google Apps Script deploy URL

function getReportContext(){
  const v=getCurrentVideo();
  const chName=channels[currentChannel]?channels[currentChannel].name:'?';
  return{videoId:v?v.id:'',title:v?v.title:'',artist:v?v.artist:'',song:v?v.song:'',channel:chName};
}

function submitToSheets(data){
  if(!SHEETS_SUBMIT_URL){console.log('📋 Sheets submit (nav URL):',data);return Promise.resolve(true)}
  return fetch(SHEETS_SUBMIT_URL,{
    method:'POST',mode:'no-cors',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify(data)
  }).then(()=>true).catch(e=>{console.warn('Sheets submit kļūda:',e);return false});
}

function showReportStatus(msg,color){
  const el=document.getElementById('reportStatus');
  if(!el)return;
  el.textContent=msg;el.style.color=color||'#35ed7e';el.style.display='block';
  setTimeout(()=>{el.style.display='none'},2500);
}

// Report poga toggle
document.getElementById('reactReport').addEventListener('click',(e)=>{
  e.stopPropagation();
  const popup=document.getElementById('reportPopup');
  // Reset status un input katru reizi atverot
  if(!popup.classList.contains('show')){
    const st=document.getElementById('reportStatus');if(st)st.style.display='none';
    const inp=document.getElementById('suggestInput');if(inp)inp.value='';
  }
  popup.classList.toggle('show');
});

// ATBILST poga
document.getElementById('reportFits').addEventListener('click',(e)=>{
  e.stopPropagation();
  const ctx=getReportContext();
  submitToSheets({type:'vote',vote:'atbilst',...ctx,time:new Date().toISOString()});
  showReportStatus('Paldies! Atzīmēts.','#35ed7e');
});

// NEATBILST poga
document.getElementById('reportNotFits').addEventListener('click',(e)=>{
  e.stopPropagation();
  const ctx=getReportContext();
  submitToSheets({type:'vote',vote:'neatbilst',...ctx,time:new Date().toISOString()});
  showReportStatus('Atzīmēts — neatbilst.','#ffdd57');
});

// IESNIEGT IETEIKUMU poga
document.getElementById('suggestSubmit').addEventListener('click',(e)=>{
  e.stopPropagation();
  const input=document.getElementById('suggestInput');
  const val=input.value.trim();
  if(!val){input.style.borderColor='rgba(255,107,107,0.6)';setTimeout(()=>{input.style.borderColor=''},1500);return}
  const ctx=getReportContext();
  const btn=document.getElementById('suggestSubmit');
  btn.disabled=true;btn.textContent='SŪTA...';
  submitToSheets({type:'suggestion',suggestion:val,...ctx,time:new Date().toISOString()}).then(()=>{
    btn.disabled=false;btn.textContent='IESNIEGT IETEIKUMU';
    input.value='';
    showReportStatus('Paldies par ieteikumu!','#8be9fd');
  });
});

// Enter taustiņš input laukā
document.getElementById('suggestInput').addEventListener('keydown',(e)=>{
  if(e.key==='Enter'){e.preventDefault();document.getElementById('suggestSubmit').click()}
});

// Aizvērt report popup klikšķinot ārpus tā
document.addEventListener('click',(e)=>{
  const popup=document.getElementById('reportPopup');
  if(popup&&popup.classList.contains('show')&&!e.target.closest('.tv-reactions')&&!e.target.closest('.tv-report-popup')){
    popup.classList.remove('show');
  }
});

function initSMS(){
  smsMessages=[];smsFakeIdx=0;smsStartTime=Date.now();
  // Sākotnēji pievienot 3 ziņas lai ticker nav tukšs
  if(typeof fakeSMS!=='undefined'&&fakeSMS)for(let i=0;i<3;i++){smsMessages.push(fakeSMS[smsFakeIdx%fakeSMS.length]);smsFakeIdx++}
  renderTicker();
  // Ik 60 sek pievienot jaunu viltotu ziņu
  if(smsTickerInterval)clearInterval(smsTickerInterval);
  smsTickerInterval=setInterval(()=>{
    if(!fakeSMS||!fakeSMS.length)return;
    smsMessages.push(fakeSMS[smsFakeIdx%fakeSMS.length]);smsFakeIdx++;
    // Noņemt vecākās ja par daudz (max 20 redzamas)
    if(smsMessages.length>20)smsMessages.shift();
    renderTicker();
  },60000);
  const n=document.getElementById('smsName'),t=document.getElementById('smsText');
  if(n&&t){n.addEventListener('input',checkSMSForm);t.addEventListener('input',checkSMSForm);checkSMSForm()}
}
function renderTicker(){
  // TV ekrāna ticker — drošs DOM API (bez innerHTML)
  const t=document.getElementById('smsTicker');
  t.textContent='';
  for(let r=0;r<2;r++)smsMessages.forEach(m=>{
    const item=document.createElement('span');item.className='sms-item';
    const name=document.createElement('span');name.className='sms-name';name.textContent=m.name+':';
    const text=document.createElement('span');text.className='sms-text';text.textContent=' '+m.text;
    const sep=document.createElement('span');sep.className='sms-sep';sep.textContent='|';
    item.append(name,text,sep);t.appendChild(item);
  });
  t.style.animationDuration=Math.max(40,t.scrollWidth/2/35)+'s';
  renderLedChat();
}
function renderLedChat(){
  const el=document.getElementById('ledMarqueeText');if(!el)return;
  el.textContent='';
  const msgs=smsMessages.length>0?smsMessages:[{name:'LOM TV',text:'Sūti ziņu — tā parādīsies šeit!'}];
  for(let r=0;r<2;r++)msgs.forEach(m=>{
    const name=document.createElement('span');name.className='chat-name';name.textContent=m.name+':';
    const text=document.createTextNode(' '+m.text);
    const sep=document.createElement('span');sep.className='chat-sep';sep.textContent='·';
    el.append(name,text,sep);
  });
  el.style.animationDuration=Math.max(50,el.scrollWidth/2/25)+'s';
}
function checkSMSForm(){
  const n=document.getElementById('smsName'),t=document.getElementById('smsText'),btn=document.getElementById('smsSendBtn');
  if(n.value.trim()&&t.value.trim()){btn.classList.add('active')}
  else{btn.classList.remove('active')}
}
function sendSMS(){
  if(!isPoweredOn)return;
  const n=document.getElementById('smsName'),t=document.getElementById('smsText');
  if(!n.value.trim()||!t.value.trim())return;
  const cleanName=sanitizeChat(n.value.trim()).substring(0,15);
  const cleanText=sanitizeChat(t.value.trim()).substring(0,280);
  if(!cleanName||!cleanText)return;
  const msg={name:cleanName,text:cleanText,ts:Date.now(),real:true};
  smsMessages.push(msg);renderTicker();
  // Saglabāt localStorage
  try{
    let stored=JSON.parse(localStorage.getItem('lom_chat')||'[]');
    stored.push(msg);
    // Noņemt vecākos par 1h
    const cutoff=Date.now()-3600000;
    stored=stored.filter(m=>m.ts>cutoff);
    localStorage.setItem('lom_chat',JSON.stringify(stored));
  }catch(e){}
  // Pirmajās 2 minūtēs — atkārtot pēc 30 sek
  const elapsed=Date.now()-smsStartTime;
  if(elapsed<120000){setTimeout(()=>{smsMessages.push(msg);renderTicker()},30000)}
  n.value='';t.value='';checkSMSForm();
  // Sinhronizēt ar LED čata vārdu lauku
  const ledN=document.getElementById('ledChatName');
  if(ledN&&cleanName)ledN.value=cleanName;
}
// LED ČATA JOSLA — sūtīšana no apakšas
function sendLedChat(){
  if(!isPoweredOn)return;
  const n=document.getElementById('ledChatName'),t=document.getElementById('ledChatMsg');
  if(!n||!t)return;
  if(!n.value.trim()||!t.value.trim())return;
  const cleanName=sanitizeChat(n.value.trim()).substring(0,15);
  const cleanText=sanitizeChat(t.value.trim()).substring(0,280);
  if(!cleanName||!cleanText)return;
  const msg={name:cleanName,text:cleanText,ts:Date.now(),real:true};
  smsMessages.push(msg);renderTicker();
  try{let stored=JSON.parse(localStorage.getItem('lom_chat')||'[]');stored.push(msg);stored=stored.filter(m=>m.ts>Date.now()-3600000);localStorage.setItem('lom_chat',JSON.stringify(stored))}catch(e){}
  t.value='';
  // Sinhronizēt ar panelī esošo vārdu
  const smsN=document.getElementById('smsName');if(smsN)smsN.value=cleanName;
}
// LED chat noņemts — SMS ticker uz TV ekrāna
function shareApp(){const u=location.href;if(navigator.share)navigator.share({title:'LOM TV',text:'LOM TV — Latvijas Online Mūzika 📺🇱🇻',url:u}).catch(()=>{});else navigator.clipboard.writeText(u).catch(()=>{})}
// Click on screen = toggle mute
document.getElementById('tvScreen').addEventListener('click',(e)=>{
  if(!isPoweredOn)return;
  if(e.target.closest('.screen-logo')||e.target.closest('.now-playing')||e.target.closest('.fs-exit-btn'))return;
  toggleMute();
});
document.addEventListener('keydown',(e)=>{
  if(e.target.tagName==='INPUT'||e.target.tagName==='TEXTAREA'||e.target.tagName==='SELECT')return;
  const n=parseInt(e.key);
  if(n>=1&&n<=9&&n<=channels.length&&!isGameChannel(n-1))switchChannel(n-1);
  if(e.key==='0'&&channels.length>=10&&!isGameChannel(9))switchChannel(9);
  // Kad spēle aktīva — bultiņas kontrolē tikai spēli, ne skaļumu/kanālus
  if(!gameRunning){
    if(e.key==='ArrowUp'){e.preventDefault();changeChannel(-1)}if(e.key==='ArrowDown'){e.preventDefault();changeChannel(1)}
    if(e.key==='ArrowLeft'){e.preventDefault();changeVolume(-5)}if(e.key==='ArrowRight'){e.preventDefault();changeVolume(5)}
  }
  if(e.key==='n'||e.key==='N')nextVideo();if(e.key==='Escape'&&document.fullscreenElement)document.exitFullscreen();
});
function setChatEnabled(on){
  const ticker=document.querySelector('.sms-ticker-screen');if(ticker)ticker.classList.toggle('off',!on);
  const panel=document.getElementById('smsPanel');if(panel)panel.classList.toggle('disabled',!on);
  const name=document.getElementById('smsName'),text=document.getElementById('smsText'),btn=document.getElementById('smsSendBtn');
  [name,text,btn].forEach(el=>{if(el)el.disabled=!on});
}
// ====== SYNTHWAVE GAME ENGINE ======
// Lofi YouTube video priekš spēles fona audio (~12h)
const GAME_LOFI_ID='nNgIMdc6wqU';
const GAME_LOFI_DURATION=42600; // ~11h50min sekundēs
var gameAudio=new Audio(); // Legacy fallback
gameAudio.loop=true;gameAudio.volume=0.5;
var gameRunning=false,gameScore=0,gameCarLane=1,gameLoop=null,gameSpeed=1.2,gameLastSpawn=0;
let gameLives=3,gameHiscore=0,gameInvincible=false;
let gameTouchStartX=0;

function generateStars(){
  const c=document.getElementById('swStars');if(!c)return;
  c.innerHTML='';
  for(let i=0;i<60;i++){
    const s=document.createElement('div');s.className='sw-star';
    s.style.left=Math.random()*100+'%';
    s.style.top=Math.random()*55+'%';
    s.style.width=(1+Math.random()*2)+'px';
    s.style.height=s.style.width;
    s.style.animationDelay=Math.random()*3+'s';
    s.style.animationDuration=(2+Math.random()*3)+'s';
    if(Math.random()>0.6)s.style.background='rgba(155,77,255,0.7)';
    c.appendChild(s);
  }
}

function startGame(){
  gameRunning=true;gameScore=0;gameCarLane=1;gameSpeed=1.2;gameLastSpawn=0;
  gameInvincible=false;
  const gs=document.getElementById('game-slot');
  if(gs)gs.style.display='block';
  // Paslēpt game over ekrānu
  const go=document.getElementById('swGameover');if(go)go.classList.remove('show');
  // Ģenerēt zvaigznes
  generateStars();
  // Notīrīt vecos obstacles
  const ob=document.getElementById('swObstacles');if(ob)ob.innerHTML='';
  // Auto pozīcija — centrs
  updateCarPosition();
  // Score
  const sc=document.getElementById('swScore');if(sc)sc.textContent='0';
  // Paslēpt lives un gameover (nav vajadzīgi)
  const livesEl=document.getElementById('swLives');if(livesEl)livesEl.style.display='none';
  const goEl=document.getElementById('swGameover');if(goEl){goEl.classList.remove('show');goEl.style.display='none'}
  // Hiscore no localStorage
  try{gameHiscore=parseInt(localStorage.getItem('lomGameHiscore'))||0}catch(e){}
  const hi=document.getElementById('swHiscore');if(hi)hi.textContent=gameHiscore;
  // Audio — lofi YouTube fonā
  startGameAudio();
  // SPĒLE poga active
  const gb=document.getElementById('gamePanelBtn');if(gb)gb.classList.add('active');
  // Grid ātrums — CSS custom property
  updateGridSpeed();
  // Game loop
  lastGameTime=0;
  gameLoop=requestAnimationFrame(gameTick);
}
function renderLives(){
  const c=document.getElementById('swLives');if(!c)return;
  c.innerHTML='';
  for(let i=0;i<3;i++){
    const h=document.createElement('span');h.className='sw-heart'+(i>=gameLives?' lost':'');
    h.textContent='\u2764';c.appendChild(h);
  }
}
function updateGridSpeed(){
  // Grid animācijas ātrums atkarīgs no spēles ātruma
  const gridDur=Math.max(0.3,1.2-gameSpeed*0.15);
  const grid=document.querySelector('.sw-grid');
  if(grid)grid.style.animationDuration=gridDur.toFixed(2)+'s';
}

function stopGame(){
  gameRunning=false;
  if(gameLoop){cancelAnimationFrame(gameLoop);gameLoop=null}
  const gs=document.getElementById('game-slot');
  if(gs)gs.style.display='none';
  // SPĒLE poga deactivate
  const gb=document.getElementById('gamePanelBtn');if(gb)gb.classList.remove('active');
  stopGameAudio();
}

function startGameAudio(){
  // Atskaņot lofi YouTube video fonā caur aktīvo YouTube slotu
  try{
    const ap=activeSlot==='a'?playerA:playerB;
    if(!ap||!playerReady)return;
    // Pseudo-live: sāk no nejaušas pozīcijas (kā kanāls)
    const now=Math.floor(Date.now()/1000);
    const seekPos=now%GAME_LOFI_DURATION;
    ap.loadVideoById({videoId:GAME_LOFI_ID,startSeconds:seekPos});
    const vol=isMuted?0:currentVolume;
    ap.setVolume(vol);
  }catch(e){}
}
function stopGameAudio(){
  // YouTube playeris tiks pārņemts atpakaļ ar switchChannel → playVideoLive
  // Nav jāapstādina manuāli — switchChannel to izdarīs
}

let lastGameTime=0;
function gameTick(ts){
  if(!gameRunning)return;
  if(!lastGameTime)lastGameTime=ts;
  const dt=Math.min(ts-lastGameTime,50);
  lastGameTime=ts;
  // Score +1 katru frame (~60/sek)
  gameScore++;
  // Ātrums aug pakāpeniski: 1.2 → ~4.0 pie 3000 punktiem
  gameSpeed=1.2+Math.min(gameScore/1000,2.8);
  // Atjaunina grid ātrumu katru 60. kadru
  if(gameScore%60===0)updateGridSpeed();
  // Spawn obstacles — lēnāk sākumā
  const spawnRate=Math.max(50,130-Math.floor(gameScore/120));
  if(gameScore-gameLastSpawn>=spawnRate){
    gameLastSpawn=gameScore;
    spawnObstacle();
  }
  // Move obstacles
  moveObstacles();
  // Update score display
  if(gameScore%3===0){const sc=document.getElementById('swScore');if(sc)sc.textContent=gameScore}
  // Bonus katrus 500 punktus
  if(gameScore>0&&gameScore%500===0){showGameBonus('+500')}
  gameLoop=requestAnimationFrame(gameTick);
}

function spawnObstacle(){
  const container=document.getElementById('swObstacles');if(!container)return;
  const lane=Math.floor(Math.random()*3); // 0,1,2
  const types=['palm','palm','building','building','mountain','barrel','cruiser','diamond'];
  const type=types[Math.floor(Math.random()*types.length)];
  const el=document.createElement('div');
  el.className='sw-obstacle sw-'+type;
  el.dataset.lane=lane;
  el.dataset.y=0;
  el.dataset.type=type;
  // Size by type
  if(type==='palm'){el.style.width='60px';el.style.height='90px';
    el.innerHTML='<div class="sw-palm-trunk"></div><div class="sw-palm-top"></div>'}
  else if(type==='building'){
    const w=28+Math.random()*28;el.style.width=w+'px';el.style.height=(55+Math.random()*55)+'px'}
  else if(type==='diamond'){el.style.width='28px';el.style.height='28px'}
  else if(type==='barrel'){el.style.width='28px';el.style.height='32px'}
  else if(type==='cruiser'){el.style.width='40px';el.style.height='60px';
    el.innerHTML='<div class="sw-cruiser-lights"></div>'}
  else{el.style.width=(65+Math.random()*45)+'px';el.style.height=(40+Math.random()*30)+'px'}
  container.appendChild(el);
}

function moveObstacles(){
  const container=document.getElementById('swObstacles');if(!container)return;
  const obstacles=container.children;
  const toRemove=[];
  for(let i=0;i<obstacles.length;i++){
    const el=obstacles[i];
    let y=parseFloat(el.dataset.y)||0;
    y+=gameSpeed*0.7;
    el.dataset.y=y;
    const progress=Math.min(y/100,1.15);
    // Horizon at ~54% from top (matches sw-sun bottom:42% + sun height)
    const topPct=50+progress*46; // 50% → 96%
    const scale=0.15+progress*1.4; // small at horizon → big at bottom
    const laneX=[22,50,78];
    const lane=parseInt(el.dataset.lane);
    // Lanes spread apart as objects come closer (perspective)
    const spread=1+progress*1.2;
    const centerX=50;
    const laneOffset=(laneX[lane]-centerX)*spread+centerX;
    el.style.top=topPct+'%';
    el.style.left=laneOffset+'%';
    el.style.transform='translateX(-50%) scale('+scale.toFixed(2)+')';
    el.style.opacity=Math.min(1,progress*3);
    // Collision zone: progress ~0.80-0.95 and same lane
    if(progress>0.78&&progress<0.95&&lane===gameCarLane&&!el.dataset.hit){
      const type=el.dataset.type;
      if(type==='diamond'){
        // Collect diamond! +100 bonus
        gameScore+=100;
        toRemove.push(el);
        showGameBonus('+100');
      }else if(!gameInvincible){
        // Hit obstacle — flash efekts, spēle turpinās
        el.dataset.hit='1';
        // Sarkans ekrāna flash
        const flash=document.getElementById('swHitFlash');
        if(flash){flash.classList.add('flash');setTimeout(()=>flash.classList.remove('flash'),200)}
        // Auto flash
        const car=document.getElementById('swCar');
        if(car){car.classList.add('hit');setTimeout(()=>car.classList.remove('hit'),500)}
        // Īsa invincibility lai netrāpa divas reizes pēc kārtas
        gameInvincible=true;
        setTimeout(()=>{gameInvincible=false},800);
      }
    }
    if(y>125)toRemove.push(el);
  }
  toRemove.forEach(el=>el.remove());
}

function updateCarPosition(){
  const car=document.getElementById('swCar');if(!car)return;
  const laneX=[22,50,78]; // % positions for 3 lanes
  car.style.left=laneX[gameCarLane]+'%';
  car.style.transform='translateX(-50%)';
}

function showGameBonus(text){
  const scene=document.querySelector('.sw-scene');if(!scene)return;
  const b=document.createElement('div');b.className='sw-bonus';b.textContent=text||'+'+gameScore;
  scene.appendChild(b);
  setTimeout(()=>b.remove(),900);
}
function gameOver(){
  gameRunning=false;
  if(gameLoop){cancelAnimationFrame(gameLoop);gameLoop=null}
  // Hiscore
  if(gameScore>gameHiscore){
    gameHiscore=gameScore;
    try{localStorage.setItem('lomGameHiscore',gameHiscore)}catch(e){}
  }
  // Game Over ekrāns
  const go=document.getElementById('swGameover');
  const goScore=document.getElementById('swGoScore');
  const goHi=document.getElementById('swGoHiscore');
  if(goScore)goScore.textContent='SCORE: '+gameScore;
  if(goHi)goHi.textContent='BEST: '+gameHiscore;
  if(go)go.classList.add('show');
}
// Restart poga
document.getElementById('swGoRestart').addEventListener('click',function(){
  const go=document.getElementById('swGameover');if(go)go.classList.remove('show');
  // Restart spēli
  startGame();
});

// Keyboard controls
document.addEventListener('keydown',function(e){
  if(!gameRunning)return;
  if(e.key==='ArrowLeft'&&gameCarLane>0){gameCarLane--;updateCarPosition();e.preventDefault()}
  if(e.key==='ArrowRight'&&gameCarLane<2){gameCarLane++;updateCarPosition();e.preventDefault()}
});
// Touch controls
document.addEventListener('DOMContentLoaded',function(){
  const tl=document.getElementById('swTouchL'),tr=document.getElementById('swTouchR');
  if(tl)tl.addEventListener('touchstart',function(e){if(!gameRunning)return;e.preventDefault();if(gameCarLane>0){gameCarLane--;updateCarPosition()}},{passive:false});
  if(tr)tr.addEventListener('touchstart',function(e){if(!gameRunning)return;e.preventDefault();if(gameCarLane<2){gameCarLane++;updateCarPosition()}},{passive:false});
});

// ====== INFO POPUP ======
function toggleInfoPopup(){
  const ov=document.getElementById('infoOverlay');
  ov.classList.toggle('show');
}

// KONTAKTU FORMA — tagad caur Google Sheets
function submitContactForm(e){
  e.preventDefault();
  const form=document.getElementById('contactForm');
  const btn=document.getElementById('contactSubmitBtn');
  const status=document.getElementById('contactStatus');
  const data=Object.fromEntries(new FormData(form));
  btn.disabled=true;btn.textContent='SŪTA...';status.textContent='';
  submitToSheets({type:'contact',...data,time:new Date().toISOString()}).then(()=>{
    status.textContent='Paldies! Ziņa nosūtīta.';status.style.color='#35ed7e';form.reset();
  }).catch(()=>{
    status.textContent='Kļūda. Mēģini vēlreiz.';status.style.color='#ff6b6b';
  }).finally(()=>{btn.disabled=false;btn.textContent='NOSŪTĪT'});
}

// INFO POPUP — dziesmu ieteikuma forma
function submitInfoSuggestion(e){
  e.preventDefault();
  const btn=document.getElementById('infoSuggestBtn');
  const status=document.getElementById('infoSuggestStatus');
  const song=document.getElementById('infoSuggestSong').value.trim();
  if(!song)return;
  btn.disabled=true;btn.textContent='SŪTA...';status.textContent='';
  submitToSheets({type:'suggestion',suggestion:song,time:new Date().toISOString()}).then(()=>{
    status.textContent='Paldies par ieteikumu!';status.style.color='#35ed7e';
    document.getElementById('infoSuggestForm').reset();
  }).catch(()=>{
    status.textContent='Kļūda. Mēģini vēlreiz.';status.style.color='#ff6b6b';
  }).finally(()=>{btn.disabled=false;btn.textContent='IETEIKT'});
}

// ADMIN MODERĀCIJAS PANELIS — ?admin=1
(function(){
  if(!new URLSearchParams(location.search).has('admin'))return;
  const css=document.createElement('style');
  css.textContent=`
    .admin-panel{position:fixed;top:0;right:0;width:380px;max-height:100vh;overflow-y:auto;z-index:9999;
      background:rgba(10,10,20,0.96);border-left:2px solid var(--neon-purple);padding:16px;font-family:var(--font-main);font-size:14px;color:#ccc}
    .admin-panel h3{color:var(--neon-purple);margin-bottom:12px;font-size:18px}
    .admin-msg{display:flex;align-items:center;gap:8px;padding:6px 0;border-bottom:1px solid rgba(255,255,255,0.08)}
    .admin-msg-text{flex:1;word-break:break-word}
    .admin-msg-name{color:var(--electric-blue);font-weight:700}
    .admin-msg-time{color:rgba(255,255,255,0.3);font-size:11px;flex-shrink:0}
    .admin-del{background:#ff4444;color:#fff;border:none;border-radius:4px;padding:2px 8px;cursor:pointer;font-size:12px;flex-shrink:0}
    .admin-del:hover{background:#ff6666}
    .admin-section{margin-top:16px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.15)}
    .admin-section h4{color:var(--electric-blue);margin-bottom:8px}
    .admin-textarea{width:100%;height:80px;background:#1a1a2a;color:#ccc;border:1px solid rgba(155,77,255,0.3);border-radius:6px;padding:8px;font-size:13px;resize:vertical}
    .admin-btn{background:var(--neon-purple);color:#fff;border:none;border-radius:6px;padding:8px 16px;cursor:pointer;font-size:13px;margin-top:6px}
    .admin-btn:hover{opacity:0.85}
    .admin-close{position:absolute;top:8px;right:12px;background:none;border:none;color:#fff;font-size:24px;cursor:pointer}
    .admin-tts{display:flex;gap:6px;margin-top:8px}
    .admin-tts-input{flex:1;background:#1a1a2a;color:#ccc;border:1px solid rgba(155,77,255,0.3);border-radius:6px;padding:8px;font-size:13px;resize:none}
    .admin-tts-btn{background:linear-gradient(135deg,#ff2975,#9b4dff);color:#fff;border:none;border-radius:6px;padding:8px 14px;cursor:pointer;font-size:12px;font-weight:700;letter-spacing:1px;white-space:nowrap;transition:all .15s}
    .admin-tts-btn:hover{opacity:0.85;transform:scale(1.02)}
    .admin-tts-btn:disabled{opacity:0.4;cursor:not-allowed;transform:none}
    .admin-tts-btn.pub{background:linear-gradient(135deg,#19d0e8,#35ed7e)}
    .admin-tts-status{font-size:11px;margin-top:4px;min-height:16px}
    .admin-voice-select{background:#1a1a2a;color:#ccc;border:1px solid rgba(155,77,255,0.3);border-radius:4px;padding:4px;font-size:12px;margin-top:6px}
  `;
  document.head.appendChild(css);
  const panel=document.createElement('div');
  panel.className='admin-panel';
  panel.id='adminPanel';
  panel.innerHTML=`
    <button class="admin-close" onclick="document.getElementById('adminPanel').style.display='none'">&times;</button>
    <h3>Čata moderācija</h3>
    <div id="adminMsgList"><em>Nav ziņu</em></div>
    <div class="admin-section">
      <h4>🎙️ Ētera balss (ElevenLabs TTS)</h4>
      <input type="password" class="admin-tts-input" id="adminApiKey" placeholder="ElevenLabs API atslēga (sk_...)" style="width:100%;margin-bottom:6px;height:32px;font-size:12px">
      <textarea class="admin-tts-input" id="adminTtsText" placeholder="Ieraksti tekstu kas tiks nolasīts ēterā..." rows="3"></textarea>
      <select class="admin-voice-select" id="adminVoiceSelect">
        <option value="EkK5I93UQWFDigLMpZcX">James — Husky & Engaging</option>
        <option value="pNInz6obpgDQGcFmaJgB">Adam (vīrietis EN)</option>
        <option value="nPczCjzI2devNBz1zQrb">Brian (vīrietis EN)</option>
        <option value="21m00Tcm4TlvDq8ikWAM">Rachel (sieviete EN)</option>
        <option value="EXAVITQu4vr4xnSDxMaL">Sarah (sieviete EN)</option>
        <option value="onwK4e9ZLuTAKqWW03F9">Daniel (vīrietis EN)</option>
        <option value="XB0fDUnXU5powFXDhCwa">Charlotte (sieviete EN)</option>
      </select>
      <select class="admin-voice-select" id="adminModelSelect" style="margin-top:4px">
        <option value="eleven_flash_v2_5">Flash v2.5 (ātrākais)</option>
        <option value="eleven_turbo_v2_5">Turbo v2.5 (balanss)</option>
        <option value="eleven_multilingual_v2">Multilingual v2 (klasiskais)</option>
      </select>
      <div class="admin-tts" style="margin-top:8px">
        <button class="admin-tts-btn" id="adminTtsPlay" onclick="adminTtsSpeak()">▶ ATSKAŅOT</button>
        <button class="admin-tts-btn pub" id="adminTtsPub" onclick="adminTtsPublish()">📢 ĒTERĀ (starp dziesmām)</button>
      </div>
      <div class="admin-tts-status" id="adminTtsStatus"></div>
    </div>
    <div class="admin-section">
      <h4>Aizliegto vārdu saraksts</h4>
      <textarea class="admin-textarea" id="adminBadWords" placeholder="Viens vārds per rindiņu..."></textarea>
      <button class="admin-btn" onclick="saveBadWords()">Saglabāt vārdus</button>
      <input type="file" id="adminBadFile" accept=".txt" style="margin-top:6px;color:#ccc" onchange="loadBadFile(event)">
    </div>
  `;
  document.body.appendChild(panel);
  // Ielādēt bad words textarea
  try{const bw=localStorage.getItem('lom_badwords');if(bw){document.getElementById('adminBadWords').value=JSON.parse(bw).join('\n')}}catch(e){}
  // Atjaunot ziņu sarakstu
  function refreshAdmin(){
    const list=document.getElementById('adminMsgList');
    let stored=[];
    try{stored=JSON.parse(localStorage.getItem('lom_chat')||'[]')}catch(e){}
    const cutoff=Date.now()-3600000;
    stored=stored.filter(m=>m.ts>cutoff);
    if(stored.length===0){list.innerHTML='<em>Nav zinu pedeja 1h</em>';return}
    let h='';
    stored.forEach((m,i)=>{
      const t=new Date(m.ts);const time=t.getHours().toString().padStart(2,'0')+':'+t.getMinutes().toString().padStart(2,'0');
      h+=`<div class="admin-msg"><span class="admin-msg-time">${time}</span><span class="admin-msg-name">${m.name}:</span><span class="admin-msg-text">${m.text}</span><button class="admin-del" onclick="adminDeleteMsg(${i})">X</button></div>`;
    });
    list.innerHTML=h;
  }
  refreshAdmin();
  setInterval(refreshAdmin,10000);
  window.adminDeleteMsg=function(idx){
    try{
      let stored=JSON.parse(localStorage.getItem('lom_chat')||'[]');
      const cutoff=Date.now()-3600000;
      stored=stored.filter(m=>m.ts>cutoff);
      stored.splice(idx,1);
      localStorage.setItem('lom_chat',JSON.stringify(stored));
      refreshAdmin();
    }catch(e){}
  };
  window.saveBadWords=function(){
    const words=document.getElementById('adminBadWords').value.split('\n').map(w=>w.trim()).filter(w=>w.length>1);
    BAD_WORDS=words;
    localStorage.setItem('lom_badwords',JSON.stringify(words));
    alert('Saglabati '+words.length+' vardi');
  };
  window.loadBadFile=function(e){
    const file=e.target.files[0];if(!file)return;
    const reader=new FileReader();
    reader.onload=function(ev){
      document.getElementById('adminBadWords').value=ev.target.result;
      saveBadWords();
    };
    reader.readAsText(file);
  };

  // ═══ ELEVENLABS TTS ═══
  let ttsAudio=null;
  let pendingTtsBlob=null; // Audio blob kas gaida atskaņošanu starp dziesmām
  let pendingTtsSmsText=null; // SMS teksts kas gaida publicēšanu

  // API atslēga no localStorage + input lauka
  function getElevenLabsKey(){
    const inp=document.getElementById('adminApiKey');
    const val=inp?inp.value.trim():'';
    if(val){localStorage.setItem('lom_11labs_key',val);return val}
    return localStorage.getItem('lom_11labs_key')||'';
  }
  // Ielādēt saglabāto atslēgu input laukā
  try{const saved=localStorage.getItem('lom_11labs_key');if(saved){const inp=document.getElementById('adminApiKey');if(inp)inp.value=saved}}catch(e){}

  // Ģenerē TTS audio blob (neatskano — tikai atgriež blob)
  async function elevenLabsGenerate(text,voiceId,modelId){
    const apiKey=getElevenLabsKey();
    if(!apiKey)throw new Error('Nav ElevenLabs API atslēgas! Ielīmē to augšā.');
    const resp=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${voiceId}?output_format=mp3_44100_128`,{
      method:'POST',
      headers:{'Content-Type':'application/json','xi-api-key':apiKey},
      body:JSON.stringify({
        text:text,
        model_id:modelId||'eleven_flash_v2_5',
        voice_settings:{stability:0.5,similarity_boost:0.75,speed:1.0}
      })
    });
    if(!resp.ok){
      const err=await resp.text();
      throw new Error('API kļūda '+resp.status+': '+err);
    }
    return await resp.blob();
  }

  // Atskaņo TTS blob uzreiz (ar mūzikas ducking)
  function playTtsBlob(blob){
    const url=URL.createObjectURL(blob);
    if(ttsAudio){try{ttsAudio.pause()}catch(e){}}
    ttsAudio=new Audio(url);
    ttsAudio.volume=Math.min(1,(currentVolume/100)*0.9);
    const ap=activeSlot==='a'?playerA:playerB;
    const origVol=isMuted?0:currentVolume;
    try{if(ap)ap.setVolume(Math.round(origVol*0.50))}catch(e){}
    ttsAudio.addEventListener('ended',()=>{
      URL.revokeObjectURL(url);
      try{if(ap)ap.setVolume(origVol)}catch(e){}
    });
    ttsAudio.addEventListener('error',()=>{
      try{if(ap)ap.setVolume(origVol)}catch(e){}
    });
    ttsAudio.play();
  }

  // Izsauc šo no crossfadeTo() — ja ir pending TTS, atskaņo to
  window._ttsPlayPending=function(){
    if(!pendingTtsBlob)return;
    const blob=pendingTtsBlob;
    const smsText=pendingTtsSmsText;
    pendingTtsBlob=null;
    pendingTtsSmsText=null;
    // Pievieno SMS tikeram
    if(smsText){smsMessages.push({name:'📢 LOM TV',text:smsText});renderTicker()}
    // Atskaņo TTS
    playTtsBlob(blob);
    const status=document.getElementById('adminTtsStatus');
    if(status){status.textContent='🔊 Atskaņo ēterā...';status.style.color='#35ed7e'}
  };

  // ▶ ATSKAŅOT — ģenerē un atskaņo uzreiz (priekšskatījums admin)
  window.adminTtsSpeak=async function(){
    const text=document.getElementById('adminTtsText').value.trim();
    if(!text)return;
    const voiceId=document.getElementById('adminVoiceSelect').value;
    const modelId=document.getElementById('adminModelSelect').value;
    const status=document.getElementById('adminTtsStatus');
    const playBtn=document.getElementById('adminTtsPlay');
    if(status){status.textContent='⏳ Ģenerē audio...';status.style.color='#f5a623'}
    if(playBtn)playBtn.disabled=true;
    try{
      const blob=await elevenLabsGenerate(text,voiceId,modelId);
      playTtsBlob(blob);
      if(status){status.textContent='🔊 Atskaņo...';status.style.color='#35ed7e'}
    }catch(err){
      console.error('TTS kļūda:',err);
      if(status){status.textContent='❌ '+err.message;status.style.color='#ff6b6b'}
    }finally{
      if(playBtn)playBtn.disabled=false;
    }
  };

  // 📢 ĒTERĀ — ģenerē ar nākamās dziesmas pieteikumu, atskaņo starp dziesmām
  window.adminTtsPublish=async function(){
    const text=document.getElementById('adminTtsText').value.trim();
    if(!text)return;
    const voiceId=document.getElementById('adminVoiceSelect').value;
    const modelId=document.getElementById('adminModelSelect').value;
    const status=document.getElementById('adminTtsStatus');
    const pubBtn=document.getElementById('adminTtsPub');
    // Dabū nākamās dziesmas info
    const nextV=getNextVideoInfo();
    const meta=parseVideoMeta(nextV);
    const artist=meta.artist||'nezināms izpildītājs';
    const song=meta.title||nextV.title||'nezināma dziesma';
    // Pilns teksts: ievads + lietotāja teksts + nākamās dziesmas pieteikums
    const fullText='Jūs klausaties Latvijas Online mūzikas kanālu. '+text+' Nākošā dziesma - '+song+', ko izpilda '+artist+', lai skan visiem Rīgā... un visiem visā Latvijā!';
    if(status){status.textContent='⏳ Ģenerē audio (gaidīs crossfade)...';status.style.color='#f5a623'}
    if(pubBtn)pubBtn.disabled=true;
    try{
      const blob=await elevenLabsGenerate(fullText,voiceId,modelId);
      // Saglabā — atskaņos kad sāksies nākamā dziesma (crossfadeTo)
      pendingTtsBlob=blob;
      pendingTtsSmsText=text;
      if(status){status.textContent='✅ Gatavs — atskaņos starp dziesmām ('+song+')';status.style.color='#35ed7e'}
    }catch(err){
      console.error('TTS kļūda:',err);
      if(status){status.textContent='❌ '+err.message;status.style.color='#ff6b6b'}
    }finally{
      if(pubBtn)pubBtn.disabled=false;
    }
    document.getElementById('adminTtsText').value='';
  };
})();
</script>

<!-- PWA INSTALL POPUP -->
<div class="pwa-overlay" id="pwaOverlay" onclick="if(event.target===this)closePwaPopup()">
  <div class="pwa-popup">
    <div class="pwa-header">
      <span class="pwa-header-title">Iegūt LOM TV</span>
      <button class="pwa-close" onclick="closePwaPopup()">✕</button>
    </div>
    <!-- Galvenais skats — 2 opcijas -->
    <div class="pwa-body" id="pwaMain">
      <div class="pwa-card" id="pwaInstallBtn" onclick="pwaInstallNative()">
        <div class="pwa-card-icon">📱</div>
        <div class="pwa-card-text">
          <div class="pwa-card-title">Instalēt šajā ierīcē</div>
          <div class="pwa-card-desc">Pievieno LOM TV savam ekrānam</div>
        </div>
      </div>
      <div class="pwa-card" onclick="window.open('https://github.com/arturs123456/LOM','_blank')">
        <div class="pwa-card-icon">💻</div>
        <div class="pwa-card-text">
          <div class="pwa-card-title">Atvērt GitHub</div>
          <div class="pwa-card-desc">Pirmkods un Android TV APK</div>
        </div>
      </div>
    </div>
    <!-- Instrukcijas (2. solis — ja nav native prompt) -->
    <div class="pwa-instructions" id="pwaInstructions">
      <button class="pwa-back" onclick="pwaShowMain()">← Atpakaļ</button>
      <p id="pwaInstrText">Lai instalētu LOM TV:</p>
      <div id="pwaSteps"></div>
    </div>
    <div class="pwa-footer">
      Patīk LOM TV? Dalies ar draugiem!
    </div>
  </div>
</div>

<script>
// ====== PWA SERVICE WORKER + INSTALL ======
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('./sw.js').then(()=>{
    console.log('SW reģistrēts');
  }).catch(e=>console.warn('SW kļūda:',e));
}

let deferredPwaPrompt=null;
window.addEventListener('beforeinstallprompt',(e)=>{
  e.preventDefault();
  deferredPwaPrompt=e;
  console.log('PWA install prompt saglabāts');
});

function openPwaPopup(){
  document.getElementById('pwaOverlay').classList.add('show');
  document.getElementById('pwaMain').style.display='';
  document.getElementById('pwaInstructions').classList.remove('show');
}
function closePwaPopup(){
  document.getElementById('pwaOverlay').classList.remove('show');
}
function pwaShowMain(){
  document.getElementById('pwaMain').style.display='';
  document.getElementById('pwaInstructions').classList.remove('show');
}
function pwaInstallNative(){
  // Ja ir native prompt (Chrome/Edge) — uzreiz instalējam
  if(deferredPwaPrompt){
    deferredPwaPrompt.prompt();
    deferredPwaPrompt.userChoice.then(r=>{
      console.log('PWA install:',r.outcome);
      deferredPwaPrompt=null;
      if(r.outcome==='accepted')closePwaPopup();
    });
    return;
  }
  // Ja nav native prompt — atveram popup ar instrukcijām
  document.getElementById('pwaOverlay').classList.add('show');
  document.getElementById('pwaMain').style.display='none';
  const instr=document.getElementById('pwaInstructions');
  instr.classList.add('show');
  showPwaInstructions();
}
function showPwaInstructions(){
  document.getElementById('pwaMain').style.display='none';
  const instr=document.getElementById('pwaInstructions');
  instr.classList.add('show');
  const steps=document.getElementById('pwaSteps');
  const ua=navigator.userAgent;
  const isIOS=/iPad|iPhone|iPod/.test(ua);
  const isMac=/Macintosh/.test(ua);
  const isSafari=/Safari/.test(ua)&&!/Chrome/.test(ua);
  const isChrome=/Chrome/.test(ua)&&!/Edg/.test(ua);
  const isEdge=/Edg/.test(ua);
  const isFirefox=/Firefox/.test(ua);

  let html='';
  if(isIOS){
    document.getElementById('pwaInstrText').textContent='Lai instalētu LOM TV uz iPhone/iPad:';
    html='<div class="pwa-step"><strong>Safari:</strong><span>Spied "Dalīties" pogu (⬆) → "Pievienot sākuma ekrānam"</span></div>';
  }else if(isMac){
    document.getElementById('pwaInstrText').textContent='Lai instalētu LOM TV uz Mac:';
    if(isSafari)html='<div class="pwa-step"><strong>Safari:</strong><span>File → Add to Dock...</span></div>';
    if(isChrome||!isSafari)html+='<div class="pwa-step"><strong>Chrome:</strong><span>Spied instalēšanas ikonu ⬇ adreses joslā</span></div>';
  }else{
    document.getElementById('pwaInstrText').textContent='Lai instalētu LOM TV:';
    if(isChrome)html='<div class="pwa-step"><strong>Chrome:</strong><span>Spied ⋮ → "Instalēt lietotni" vai ⬇ ikonu adreses joslā</span></div>';
    else if(isEdge)html='<div class="pwa-step"><strong>Edge:</strong><span>Spied ⋯ → "Lietotnes" → "Instalēt šo vietni kā lietotni"</span></div>';
    else if(isFirefox)html='<div class="pwa-step"><strong>Firefox:</strong><span>Firefox pagaidām neatbalsta PWA instalāciju. Izmanto Chrome vai Edge.</span></div>';
    else html='<div class="pwa-step"><strong>Pārlūks:</strong><span>Meklē "Instalēt" vai "Pievienot sākuma ekrānam" opciju izvēlnē</span></div>';
  }
  steps.innerHTML=html;
}
</script>
</body>
</html>
